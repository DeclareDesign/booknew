<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Declaration | Research Design: Declare, Diagnose, Redesign</title>
<meta name="author" content="Graeme Blair, Alexander Coppock, and Macartan Humphreys">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.2.9000/tabs.js"></script><script src="libs/bs3compat-0.2.2.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<link href="libs/bs4_book-1.0.0/dd_imgpopup.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/bs4_book-1.0.0/dd_imgpopup.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://hypothes.is/embed.js" async></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Research Design: Declare, Diagnose, Redesign</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li class="book-part">Introduction</li>
<li><a class="" href="preamble.html"><span class="header-section-number">1</span> Preamble</a></li>
<li><a class="" href="improving-research-designs.html"><span class="header-section-number">2</span> Improving research designs</a></li>
<li><a class="" href="primer.html"><span class="header-section-number">3</span> Software primer</a></li>
<li><a class="" href="part-i-exercises.html"><span class="header-section-number">4</span> Part I Exercises</a></li>
<li class="book-part">Declaration, Diagnosis, Redesign</li>
<li><a class="active" href="declaration.html"><span class="header-section-number">5</span> Declaration</a></li>
<li><a class="" href="specifying-the-model.html"><span class="header-section-number">6</span> Specifying the model</a></li>
<li><a class="" href="defining-the-inquiry.html"><span class="header-section-number">7</span> Defining the inquiry</a></li>
<li><a class="" href="crafting-a-data-strategy.html"><span class="header-section-number">8</span> Crafting a data strategy</a></li>
<li><a class="" href="choosing-an-answer-strategy.html"><span class="header-section-number">9</span> Choosing an answer strategy</a></li>
<li><a class="" href="p2diagnosis.html"><span class="header-section-number">10</span> Diagnosis</a></li>
<li><a class="" href="redesign-2.html"><span class="header-section-number">11</span> Redesign</a></li>
<li><a class="" href="part-ii-exercises.html"><span class="header-section-number">12</span> Part II Exercises</a></li>
<li class="book-part">Research Design Library</li>
<li><a class="" href="research-design-library.html"><span class="header-section-number">13</span> Research Design Library</a></li>
<li><a class="" href="observational-designs-for-descriptive-inference.html"><span class="header-section-number">14</span> Observational designs for descriptive inference</a></li>
<li><a class="" href="experimental-designs-for-descriptive-inference.html"><span class="header-section-number">15</span> Experimental designs for descriptive inference</a></li>
<li><a class="" href="observational-designs-for-causal-inference.html"><span class="header-section-number">16</span> Observational designs for causal inference</a></li>
<li><a class="" href="experimental-designs-for-causal-inference.html"><span class="header-section-number">17</span> Experimental designs for causal inference</a></li>
<li><a class="" href="multi-study-designs.html"><span class="header-section-number">18</span> Multi-study designs</a></li>
<li><a class="" href="part-iii-exercises.html"><span class="header-section-number">19</span> Part III Exercises</a></li>
<li class="book-part">Research Design Lifecycle</li>
<li><a class="" href="research-design-lifecycle.html"><span class="header-section-number">20</span> Research Design Lifecycle</a></li>
<li><a class="" href="before.html"><span class="header-section-number">21</span> Before</a></li>
<li><a class="" href="during.html"><span class="header-section-number">22</span> During</a></li>
<li><a class="" href="after.html"><span class="header-section-number">23</span> After</a></li>
<li><a class="" href="part-iv-exercises.html"><span class="header-section-number">24</span> Part IV Exercises</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="declaration" class="section level1">
<h1>
<span class="header-section-number">5</span> Declaration<a class="anchor" aria-label="anchor" href="#declaration"><i class="fas fa-link"></i></a>
</h1>
<!-- make sure to rename the section title below -->
<p>In Chapter 2, we gave a high-level overview of our framework for describing research designs in terms of their models, inquiries, data strategies, and answer strategies, our process for diagnosing their properties, and a general purpose approach for improving them to better fit research tasks. Now in this chapter, we place our approach on a firmer formal footing. To do so, we employ elements from Pearl’s <span class="citation">(<a href="references.html#ref-pearl2009causality" role="doc-biblioref">2009</a>)</span> approach to causal modeling (directed acyclic graphs, or DAGs for short), which provides a syntax for mapping design inputs to design outputs. We also use the potential outcomes framework as presented, for example, in <span class="citation">Imbens and Rubin (<a href="references.html#ref-Imbens2015" role="doc-biblioref">2015</a>)</span>, which many social scientists use to clarify their inferential targets.</p>
<p>Our goal here is not formalization for formalization’s sake. Describing a research design as a DAG helps us to see the fundamental symmetries across the theoretical (M and I) and empirical (D and A) halves of a research design. A recurring theme of our book is that research designs tend to be stronger when the relationship of M to I is mirrored by the relationship of D to A; the aim of this chapter is to make this somewhat mystical claim more concrete.</p>
<p>We define a research design as <span class="math inline">\(\Delta\)</span>, with four elements <span class="math inline">\(&lt;M,I,D,A&gt;\)</span>. Describing a research design entails “declaring” each of these four elements.</p>
<p><span class="math inline">\(M\)</span> is a reference <strong>model</strong>, or a set of reference models, of how the world works. Following Pearl’s definition of a probabilistic causal model, a model in <span class="math inline">\(M\)</span> contains three core elements. The first is a specification of the variables <span class="math inline">\(X\)</span> about which research is being conducted. This includes endogenous and exogenous variables (<span class="math inline">\(V\)</span> and <span class="math inline">\(U\)</span> respectively) and the ranges of these variables. In the formal literature, this is sometimes called the <em>signature</em> of a model <span class="citation">(Halpern <a href="references.html#ref-halpern2000" role="doc-biblioref">2000</a>)</span>. The second element (<span class="math inline">\(F\)</span>) a specification of how each endogenous variable depends on other variables. These can be considered functional relations or, as in <span class="citation">Imbens and Rubin (<a href="references.html#ref-Imbens2015" role="doc-biblioref">2015</a>)</span>, potential outcomes. The third and final element is a probability distribution over exogenous variables, written as <span class="math inline">\(P(U)\)</span>. Sometimes it is useful to think of the draws from <span class="math inline">\(U\)</span> as implying distinct models of their own, in which case we might think of <span class="math inline">\(M\)</span> as a family of models and a particular model <span class="math inline">\(m\)</span> as an element of <span class="math inline">\(M\)</span>.</p>
<p>The <strong>inquiry</strong> <span class="math inline">\(I\)</span> is a summary of the variables <span class="math inline">\(X\)</span>, perhaps given interventions on some variables. An inquiry might be the average value of an outcome <span class="math inline">\(Y\)</span>: <span class="math inline">\(\mathbb{E}[Y] = \int{y\times Pr(Y=y)}\)</span>, or the average value of the outcome conditional on the value of a treatment <span class="math inline">\(Z\)</span>: <span class="math inline">\(\mathbb{E}[Y|Z=1] = \int{y\times Pr(Y=y|Z=1)}\)</span>. Using Pearl’s notation we can distinguish between descriptive inquiries and causal inquiries. Causal inquiries are those that summarize distributions that would arise under interventions, as indicated by the <span class="math inline">\(do()\)</span> operator, e.g., <span class="math inline">\(\Pr(Y | do(Z = 1))\)</span>. Descriptive inquiries summarize distributions that arise without intervention, such as <span class="math inline">\(\Pr(Y | Z =1)\)</span>.</p>
<p>We let <span class="math inline">\(a^m\)</span> denote the answer to <span class="math inline">\(I\)</span> <em>under the model</em>. Conditional on the model, <span class="math inline">\(a^m\)</span> is the value of the estimand, the quantity that the researcher wants to learn about. The connection of <span class="math inline">\(a^m\)</span> to the model is given by: <span class="math inline">\(a^m = I(m)\)</span>.</p>
<p>As the saying goes, models are wrong but some may perhaps be useful. We denote the <em>true</em> causal model of the world as <span class="math inline">\(W\)</span> and the realized world <span class="math inline">\(w\)</span> as a draw from this true causal model—a reference model for a particular case. The true answer, then, is <span class="math inline">\(a^w = I(w)\)</span>. The answer under a reference model <span class="math inline">\(a^m\)</span> may be close or far from the true value <span class="math inline">\(a^w\)</span>, which is to say it could be wrong. If the model <span class="math inline">\(m\)</span> is far from <span class="math inline">\(w\)</span>, then of course <span class="math inline">\(a^m\)</span> need not be correct. We note moreover that <span class="math inline">\(a^w\)</span> might even be undefined, since inquiries can only be stated in terms of theoretical models. If the theoretical model is wrong enough—for instance conditioning on events that do not in fact arise—then the inquiry might be nonsensical when applied to the real world.</p>
<p>A <strong>data</strong> strategy, <span class="math inline">\(D\)</span>, generates data <span class="math inline">\(d\)</span>. Data <span class="math inline">\(d\)</span> arises, under model <span class="math inline">\(M\)</span> with probability <span class="math inline">\(P_M(d|D)\)</span>. The data strategy includes sampling strategies and assignment strategies, which we denote by <span class="math inline">\(P_S\)</span> and <span class="math inline">\(P_Z\)</span> respectively. Measurement techniques are also a part of data strategies and can be thought of as a selection of observable variables that carry information about unobservable variables. The data strategy operates on <span class="math inline">\(w\)</span> to produce the observed data: <span class="math inline">\(D(w) = d\)</span>.</p>
<p>While <span class="math inline">\(M\)</span> reflects our beliefs about true underlying causal processes at work where <span class="math inline">\(D\)</span> is the procedure that results in the collection or creation of data. In this light, the phrase “data generating process” is imprecise. Scholars usually use the phrase “true data generating process” to refer to <span class="math inline">\(M\)</span>, even though <span class="math inline">\(M\)</span> doesn’t create data and <span class="math inline">\(D\)</span> does when it is applied to the real world.</p>
<p>The <strong>answer</strong> strategy, <span class="math inline">\(A\)</span>, generates answer <span class="math inline">\(a^d\)</span> using data <span class="math inline">\(d\)</span>. We encode this relationship as <span class="math inline">\(A(d) = a^d\)</span>.</p>
<p>The full set of causal relationships between <span class="math inline">\(M\)</span>, <span class="math inline">\(I\)</span>, <span class="math inline">\(D\)</span>, and <span class="math inline">\(A\)</span> with respect to <span class="math inline">\(m\)</span>, <span class="math inline">\(a^m\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(a^d\)</span>, <span class="math inline">\(w\)</span>, and <span class="math inline">\(a^w\)</span> can be seen in the DAG’s schematic representation of a research design.</p>
<div class="figure">
<span id="fig:worldandtheory"></span>
<img src="book_files/figure-html/worldandtheory-1.svg" alt="MIDA as a DAG" width="100%"><p class="caption">
Figure 5.1: MIDA as a DAG
</p>
</div>
<p>Figure <a href="declaration.html#fig:worldandtheory">5.1</a> illustrates how a research design is a correspondence between <span class="math inline">\(I(m) = a^m\)</span> and <span class="math inline">\(A(d) = a^d\)</span>. The theoretical half of a research design produces an answer to the inquiry <strong>in theory</strong>. The empirical half of a research design produces an <em>empirical estimate</em> of the answer to the inquiry.</p>
<p>Neither answer is necessarily close to the truth <span class="math inline">\(a^w\)</span>, of course. And, as shown in the figure, the truth is not directly accessible either to us in theory or in empirics. Our gamble in empirical research, however, is that our theoretical models are close enough to the truth: that the truth is like the set of models we imagine.</p>
<!-- MH: Having some trouble understanding the distrinction between W and w. If w includes potential outcome functions, isn't it the true causal model? If W is the set of possible worlds, is that a subject of inquiry. For instance say our estimand is sd(ate) would that be a(W) rather than a(w). -->
<!-- Think it worth having a second figure which shows just two panels:if indeed w \in M, then: -->
<!-- We moved this graph to "diagnosis". Can we handle the epistemological point in text -- we hope that one of the models in M is the true causal model W... but of course we don't think that's ever true because of an "all models are wrong, some are useful" type thinking? -->
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:elementsofresearchdesign">Table 5.1: </span> Elements of research design.</caption>
<colgroup>
<col width="13%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th>Relationship</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(m = M()\)</span></td>
<td>
<span class="math inline">\(m\)</span> is a draw from the theoretical causal model <span class="math inline">\(M\)</span>
</td>
</tr>
<tr class="even">
<td><span class="math inline">\(a^m = I(m)\)</span></td>
<td>the answer under the model <span class="math inline">\(a^m\)</span> is the inquiry applied to a draw from the model <span class="math inline">\(m\)</span>
</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(w = W()\)</span></td>
<td>the real world <span class="math inline">\(w\)</span> is a draw from the true causal model <span class="math inline">\(W\)</span> (unobservable)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(a^w = I(w)\)</span></td>
<td>the true answer <span class="math inline">\(a^w\)</span> is the inquiry were it applied to the real world <span class="math inline">\(w\)</span> (unobservable)</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(d = D(w)\)</span></td>
<td>the realized dataset <span class="math inline">\(d\)</span> results from the data strategy applied to the real world <span class="math inline">\(w\)</span>
</td>
</tr>
<tr class="even">
<td><span class="math inline">\(a^d = A(d)\)</span></td>
<td>the empirical answer <span class="math inline">\(a^d\)</span> is the answer strategy applied to the dataset <span class="math inline">\(d\)</span>
</td>
</tr>
</tbody>
</table></div>
<p>From this discussion, we see a striking analogy between the <span class="math inline">\(M\)</span>, <span class="math inline">\(I\)</span> relationship and the <span class="math inline">\(D\)</span>, <span class="math inline">\(A\)</span> relationship. The answer we aim for is gotten by applying <span class="math inline">\(I\)</span> to a draw from <span class="math inline">\(M\)</span>. But the answer we have access to is gotten by applying <span class="math inline">\(A\)</span> to a draw from <span class="math inline">\(D\)</span>. And our hope, usually, is that these two answers are the same. In some cases, this suggests that <span class="math inline">\(A\)</span> should be “like” <span class="math inline">\(I\)</span>: for instance, if we are interested in the mean of a population and we have access to a random sample, the data available to us from <span class="math inline">\(D\)</span> is like the ideal data we would have if we could observe <span class="math inline">\(M\)</span> directly <span style="color: red;"><small>[FLAG]</small></span>(WHAT DOES IT MEAN TO OBSERVE M?). And indeed taking the mean of the data is likely a good strategy. But this principle does not hold as a general matter. For instance, if data is sampled with non-uniform probabilities, a simple mean of the observed data is likely not a good strategy to calculate the average of a population. Rather, the focus should be on the extent to which the two sets of answers line up.</p>
<!-- The central crux of good research design is generated by the deep analogy of Models and Inquiries to Data and Answer Strategies. This analogy can guide many design decisions. The guidance that measurement procedures should be theoretically informed is an instance of the general point that data strategies should parallel theoretical models. The general preference for nonparametric estimation approaches over parametric procedures is an instance of the general point that answer strategies should parallel inquiries.  -->
<!-- $$ -->
<!-- M : I : : D : A -->
<!-- $$ -->
<!-- The DAG also clarifies the main difference between the theoretical and emprical halves of research design is the introduction of reality. When we draw from $M$ to produce $m$, we write $M() = m$ -- the function has no inputs from outside the model because it is purely theoretical. When we draw from the $D$ to produce $d$, we write $D(w) = d$ -- the dataset $d$ that results from the data strategy $D$ depends on the actual state of the world $w$. Empirical researchers must be theorists too: our goal is to choose our theoretical model $M$ such that $m$ is as close to $w$ as possible.  -->
<!-- Idea we want to express here: M:I::D:A, but M and D are different. How are they different? The first way is that M is theoretical and D is empirical -- D() has w as an argument. The second way is that there are two "fundamental" problems facing empirical research. The first is the fundamental problem of causal inference -- we can't observe units in counterfactual states. The second is the fundmental problem of descriptive inference -- we can't observe the latent Y*, only Y as measured. -->
<!-- With a design declared in terms of MIDA, we can then diagnose its properties, and redesign to find an optimal design subject to constraints. Design diagnosis is the process of simulating both $I(m) = a^m$ and $A(d) = a^d$ over many draws from $M()$ and $D(m)$, and comparing them. In other words, diagnosis is the process of learning the value of a diagnosand for a single design, often under multiple specifications of M to assess robustness to alternative models. Redesign is the process of *changing* parts of D and A in order to learn how the diagnosands change. The redesign process is complete when a research selects the best (or one of the best) D and A among the feasible set, as measured by the changing values of the diagnosand. -->
<div id="p2gulzarkhanrevisited" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Example<a class="anchor" aria-label="anchor" href="#p2gulzarkhanrevisited"><i class="fas fa-link"></i></a>
</h2>
<p>In this section, we declare the <span class="citation">Gulzar and Khan (<a href="references.html#ref-Gulzar2020" role="doc-biblioref">2020</a>)</span> example in finer detail. The aim is to capture all of the analytically-relevant features of the design. In Chapter 2, we declared in words and in code a simplified version of the design, in order to communicate its key features. We will make this move again throughout the book: we will present simplified versions of canonical designs in the text, and also provide worked examples with the details of specific studies. Moving back and forth between the two will, we hope, enable you to both learn about the general principles and how to declare your own designs which always involve the fine details of research implementation.</p>
<p>We display the DAG for the design in Figure <a href="declaration.html#fig:p2gulzarkhandag">5.2</a>.</p>
<div class="figure">
<span id="fig:p2gulzarkhandag"></span>
<img src="book_files/figure-html/p2gulzarkhandag-1.svg" alt="DAG for Gulzar-Khan design." width="100%"><p class="caption">
Figure 5.2: DAG for Gulzar-Khan design.
</p>
</div>
<div id="model-1" class="section level3">
<h3>
<span class="header-section-number">5.1.1</span> Model<a class="anchor" aria-label="anchor" href="#model-1"><i class="fas fa-link"></i></a>
</h3>
<p>The model for the study describes the set of units: citizens living in the two Pakistani districts the study took place in, Haripur and Abbottabad, each of which comprises over 300 villages. Approximately 6500 citizens who are eligible to run for elected office live in each village. The main outcome of interest is whether the citizen filed papers to run for office. The outcome depends on the level of three treatments. A neutral appeal simply informs potential candidates of how to run; the other two emphasize either the social or personal benefits of holding public office. We expect the neutral appeal to have some effects and the social and personal appeals to have an additional effect over and above the neutral appeal.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span>
  <span class="fu">declare_population</span><span class="op">(</span>
    districts <span class="op">=</span> <span class="fu">add_level</span><span class="op">(</span>
      N <span class="op">=</span> <span class="fl">2</span>,
      district_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Haripur"</span>, <span class="st">"Abbottabad"</span><span class="op">)</span>,
      N_villages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">311</span>, <span class="fl">359</span><span class="op">)</span>
    <span class="op">)</span>,
    villages <span class="op">=</span> <span class="fu">add_level</span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_villages</span><span class="op">)</span>,
    citizens <span class="op">=</span> <span class="fu">add_level</span><span class="op">(</span>N <span class="op">=</span> <span class="fl">6500</span>,
                         U <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">declare_potential_outcomes</span><span class="op">(</span>
    Y_Z_control <span class="op">=</span> <span class="va">U</span>,
    Y_Z_neutral <span class="op">=</span> <span class="va">U</span> <span class="op">+</span> <span class="fl">0.02</span>,
    Y_Z_personal <span class="op">=</span> <span class="va">U</span> <span class="op">+</span> <span class="fl">0.04</span>,
    Y_Z_social <span class="op">=</span> <span class="va">U</span> <span class="op">+</span> <span class="fl">0.05</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="inquiry-1" class="section level3">
<h3>
<span class="header-section-number">5.1.2</span> Inquiry<a class="anchor" aria-label="anchor" href="#inquiry-1"><i class="fas fa-link"></i></a>
</h3>
<p>This model supports many inquiries, but here we’ll focus on two: the average treatment effect of <em>any</em> appeal versus the pure control condition. This inquiry is theoretically important because it refers to the mere act of inviting citizens to stand for office. A second inquiry is more subtle: the average difference in effectiveness between the appeals to run that focus on the pro-social reasons to stand for office versus the appeals that emphasize the personal returns.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">inquiry</span> <span class="op">&lt;-</span> 
  <span class="fu">declare_estimand</span><span class="op">(</span>
    ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">Y_Z_neutral</span> <span class="op">+</span> <span class="va">Y_Z_personal</span> <span class="op">+</span> <span class="va">Y_Z_social</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span> <span class="op">-</span>
                 <span class="va">Y_Z_control</span><span class="op">)</span>,
    ATE_social_vs_personal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Y_Z_social</span> <span class="op">-</span> <span class="va">Y_Z_personal</span><span class="op">)</span>
  <span class="op">)</span> </code></pre></div>
</div>
<div id="data-strategy-1" class="section level3">
<h3>
<span class="header-section-number">5.1.3</span> Data strategy<a class="anchor" aria-label="anchor" href="#data-strategy-1"><i class="fas fa-link"></i></a>
</h3>
<p>The data strategy entailed three steps. First, 192 of the 670 villages were selected, via cluster sampling, to serve as treatment villages. Of these 48 were assigned to the neutral appeal, 72 to the social appeal, and 72 to the personal appeal. The 478 nonsampled villages did not receive any treatment, so they serve as a pure control. Second, 48 citizens from each treated village were sampled via random walk, and they receive the candidacy appeals. Third, the measurement procedure for this study was to obtain, via the administrative record, the names of all candidates who stood for office. In this way, the outcome is observed for all subjects in the experiment, sampled or not.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_strategy</span> <span class="op">&lt;-</span> 
  <span class="fu">declare_assignment</span><span class="op">(</span>
    m_each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">478</span>, <span class="fl">48</span>, <span class="fl">72</span>, <span class="fl">72</span><span class="op">)</span>,
    clusters <span class="op">=</span> <span class="va">villages</span>,
    conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"neutral"</span>, <span class="st">"social"</span>, <span class="st">"personal"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span> 
  <span class="fu">reveal_outcomes</span><span class="op">(</span><span class="va">Y</span>, <span class="va">Z</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">declare_step</span><span class="op">(</span>any_treatment <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Z</span> <span class="op">==</span> <span class="st">"control"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
               handler <span class="op">=</span> <span class="va">fabricate</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">declare_sampling</span><span class="op">(</span>strata <span class="op">=</span> <span class="va">villages</span>, 
                   n_unit <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Z</span> <span class="op">==</span> <span class="st">"control"</span>, <span class="fl">0</span>, <span class="fl">48</span><span class="op">)</span>, 
                   drop_nonsampled <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </code></pre></div>
</div>
<div id="answer-strategy-1" class="section level3">
<h3>
<span class="header-section-number">5.1.4</span> Answer strategy<a class="anchor" aria-label="anchor" href="#answer-strategy-1"><i class="fas fa-link"></i></a>
</h3>
<p>The <span class="citation">Gulzar and Khan (<a href="references.html#ref-Gulzar2020" role="doc-biblioref">2020</a>)</span> design supports many alternative answer strategies. Here, we focus on two answer strategies in particular. First, we compare the rate of running in untreated villages to the rate among the sampled units in all treatment villages, using an OLS regression with standard errors clustered at the village level.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The implemented design also included a village-level treatment that complicates (in interesting ways!) the interpretation of the untreated units in the treated villages&lt;/p&gt;"><sup>5</sup></a> Second, we compare the rates of running in the personal and social conditions among the sampled units only, again using an OLS regression with standard errors clustered at the village level.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">answer_strategy</span> <span class="op">&lt;-</span> 
  <span class="fu">declare_estimator</span><span class="op">(</span>
    <span class="va">Y</span> <span class="op">~</span> <span class="va">any_treatment</span>,
    clusters <span class="op">=</span> <span class="va">villages</span>,
    model <span class="op">=</span> <span class="va">lm_robust</span>,
    se_type <span class="op">=</span> <span class="st">"CR0"</span>,
    subset <span class="op">=</span> <span class="op">(</span><span class="va">Z</span> <span class="op">==</span> <span class="st">"control"</span> <span class="op">|</span> <span class="va">S</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>,
    estimand <span class="op">=</span> <span class="st">"ATE"</span>,
    label <span class="op">=</span> <span class="st">"ATE"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">declare_estimator</span><span class="op">(</span>
    <span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span>,
    clusters <span class="op">=</span> <span class="va">villages</span>,
    model <span class="op">=</span> <span class="va">lm_robust</span>,
    se_type <span class="op">=</span> <span class="st">"CR0"</span>,
    subset <span class="op">=</span> <span class="op">(</span><span class="va">S</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">Z</span> <span class="op">!=</span> <span class="st">"neutral"</span><span class="op">)</span>,
    estimand <span class="op">=</span> <span class="st">"ATE_social_vs_personal"</span>,
    label <span class="op">=</span> <span class="st">"ATE_social_vs_personal"</span>
  <span class="op">)</span></code></pre></div>
<p>With these elements in hand, we can declare the full design and display one draw of the design:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span> <span class="op">&lt;-</span> 
  <span class="va">model</span> <span class="op">+</span> <span class="va">inquiry</span> <span class="op">+</span> <span class="va">data_strategy</span> <span class="op">+</span> <span class="va">answer_strategy</span></code></pre></div>
<p>We print the first six rows of the simulated data in Table <a href="declaration.html#tab:gulzarkhansimdata">5.2</a>:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">draw_data</span><span class="op">(</span><span class="va">design</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:gulzarkhansimdata">Table 5.2: </span>Five rows of simulated data from the Gulzar-Khan design.
</caption>
<thead><tr>
<th style="text-align:left;">
district_name
</th>
<th style="text-align:right;">
U
</th>
<th style="text-align:right;">
Y_Z_control
</th>
<th style="text-align:right;">
Y_Z_neutral
</th>
<th style="text-align:right;">
Y_Z_personal
</th>
<th style="text-align:right;">
Y_Z_social
</th>
<th style="text-align:left;">
Z
</th>
<th style="text-align:right;">
Y
</th>
<th style="text-align:right;">
any_treatment
</th>
<th style="text-align:right;">
S
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Haripur
</td>
<td style="text-align:right;">
0.616
</td>
<td style="text-align:right;">
0.616
</td>
<td style="text-align:right;">
0.636
</td>
<td style="text-align:right;">
0.656
</td>
<td style="text-align:right;">
0.666
</td>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
0.656
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Haripur
</td>
<td style="text-align:right;">
0.784
</td>
<td style="text-align:right;">
0.784
</td>
<td style="text-align:right;">
0.804
</td>
<td style="text-align:right;">
0.824
</td>
<td style="text-align:right;">
0.834
</td>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
0.824
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Haripur
</td>
<td style="text-align:right;">
0.895
</td>
<td style="text-align:right;">
0.895
</td>
<td style="text-align:right;">
0.915
</td>
<td style="text-align:right;">
0.935
</td>
<td style="text-align:right;">
0.945
</td>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
0.935
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Haripur
</td>
<td style="text-align:right;">
0.192
</td>
<td style="text-align:right;">
0.192
</td>
<td style="text-align:right;">
0.212
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
0.242
</td>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
0.232
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Haripur
</td>
<td style="text-align:right;">
0.432
</td>
<td style="text-align:right;">
0.432
</td>
<td style="text-align:right;">
0.452
</td>
<td style="text-align:right;">
0.472
</td>
<td style="text-align:right;">
0.482
</td>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
0.472
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table></div>
<p>From this data, we present simulated estimates of the two inquiries as well as the simulated estimand values in Table <a href="declaration.html#tab:gulzarkhansimestimates">5.3</a>:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu">run_design</span><span class="op">(</span><span class="va">design</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:gulzarkhansimestimates">Table 5.3: </span>Simulated estimates and estimands from one run of the Gulzar-Khan design.
</caption>
<thead><tr>
<th style="text-align:left;">
estimator_label
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std.error
</th>
<th style="text-align:right;">
estimand
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ATE
</td>
<td style="text-align:right;">
0.039
</td>
<td style="text-align:right;">
0.003
</td>
<td style="text-align:right;">
0.037
</td>
</tr>
<tr>
<td style="text-align:left;">
ATE_social_vs_personal
</td>
<td style="text-align:right;">
-0.001
</td>
<td style="text-align:right;">
0.007
</td>
<td style="text-align:right;">
0.010
</td>
</tr>
</tbody>
</table></div>
<p>In Table <a href="declaration.html#tab:gulzarkhansimcrosstab">5.4</a>, we display the number of people and villages in each treatment assignment and sampling condition to illustrate the data strategy:</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:gulzarkhansimcrosstab">Table 5.4: </span>Count of units by treatment assignment and sampling status.
</caption>
<thead><tr>
<th style="text-align:left;">
Z
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
n_sampled
</th>
<th style="text-align:right;">
n_villages
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
control
</td>
<td style="text-align:right;">
3107000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
478
</td>
</tr>
<tr>
<td style="text-align:left;">
neutral
</td>
<td style="text-align:right;">
312000
</td>
<td style="text-align:right;">
2304
</td>
<td style="text-align:right;">
48
</td>
</tr>
<tr>
<td style="text-align:left;">
social
</td>
<td style="text-align:right;">
468000
</td>
<td style="text-align:right;">
3456
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
personal
</td>
<td style="text-align:right;">
468000
</td>
<td style="text-align:right;">
3456
</td>
<td style="text-align:right;">
72
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="further-reading-2" class="section level2">
<h2>
<span class="header-section-number">5.2</span> Further reading<a class="anchor" aria-label="anchor" href="#further-reading-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<span class="citation">Imbens and Rubin (<a href="references.html#ref-Imbens2015" role="doc-biblioref">2015</a>)</span> on potential outcomes</li>
<li>
<span class="citation">Halpern (<a href="references.html#ref-halpern2000" role="doc-biblioref">2000</a>)</span> on causal models</li>
</ul>
<!-- ## Brief illustration --><!-- To illustrate, consider the following design.  --><!-- * A model *M* specifies three variables $X$, $Y$ and $Z$ (all defined on the reals). These form the signature. In additional we assume functional relationships between them that allow for the possibility of confounding (for example, $Y =  bX + Z + \epsilon_Y; X = Z+ \epsilon_X$, with $Z, \epsilon_X, \epsilon_Z$ distributed standard normal).  --><!-- * The inquiry $I$ is ``what would be the average effect of a unit increase in $X$ on $Y$ in the population?'' Note that this question depends on the signature of the model, but not the functional equations of the model (the answer provided by the model does of course depend on the functional equations).  --><!-- * Under data strategy, $D$,  data is gathered on $X$ and $Y$ for $n$ randomly selected units.  --><!-- * Answer $a^d$, is then generated using ordinary least squares as the answer strategy, $A$. --><!-- We have specified all the components of MIDA. We now ask: How strong is this research design? One way to answer this question is with respect to the diagnosand "expected error." Here the model's functional equations provide an answer, $a^m$ to the inquiry (for any draw of $\beta$), and so the distribution of the expected error, *given the model*, $a^d-a^m$, can be calculated. In this example the expected performance of the design may be poor, as measured by this diagnosand, because the data and analysis strategy do not handle the confounding described by the model. --><!-- In comparison, better performance may be achieved through an alternative data strategy (e.g., where $D'$ randomly assigned $X$ to $n$ units before recording $X$ and $Y$) or an alternative analysis strategy (e.g., $A'$  conditions on $Z$). These design evaluations depend on the model, and so one might reasonably ask how performance would look were the model different (for example if the underlying process involved nonlinearities). --><!-- note do_bookdown is set in index.rmd, so we know if you are running just this .Rmd or compiling the book--><!-- start post here, do not edit above -->
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="part-i-exercises.html"><span class="header-section-number">4</span> Part I Exercises</a></div>
<div class="next"><a href="specifying-the-model.html"><span class="header-section-number">6</span> Specifying the model</a></div>
</div></main><div id="on-this-page-nav" class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#declaration"><span class="header-section-number">5</span> Declaration</a></li>
<li>
<a class="nav-link" href="#p2gulzarkhanrevisited"><span class="header-section-number">5.1</span> Example</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#model-1"><span class="header-section-number">5.1.1</span> Model</a></li>
<li><a class="nav-link" href="#inquiry-1"><span class="header-section-number">5.1.2</span> Inquiry</a></li>
<li><a class="nav-link" href="#data-strategy-1"><span class="header-section-number">5.1.3</span> Data strategy</a></li>
<li><a class="nav-link" href="#answer-strategy-1"><span class="header-section-number">5.1.4</span> Answer strategy</a></li>
</ul>
</li>
<li><a class="nav-link" href="#further-reading-2"><span class="header-section-number">5.2</span> Further reading</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Research Design: Declare, Diagnose, Redesign</strong>" was written by Graeme Blair, Alexander Coppock, and Macartan Humphreys. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Supported by the Laura and John Arnold Foundation and Evidence in Governance and Politics.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
