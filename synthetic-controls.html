<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>16.7 Synthetic controls | Research Design: Declare, Diagnose, Redesign</title>
  <meta name="description" content="describe the book" />
  <meta name="generator" content="bookdown 0.21.4 and GitBook 2.6.7" />

  <meta property="og:title" content="16.7 Synthetic controls | Research Design: Declare, Diagnose, Redesign" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="describe the book" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16.7 Synthetic controls | Research Design: Declare, Diagnose, Redesign" />
  
  <meta name="twitter:description" content="describe the book" />
  

<meta name="author" content="Graeme Blair, Jasper Cooper, Alexander Coppock, and Macartan Humphreys" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bayesianprocesstracing.html"/>
<link rel="next" href="experimental-designs-for-causal-inference.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="https://hypothes.is/embed.js" async></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="headers/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Research Design</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Research Design: Declaration, Diagnose, Redesign</a><ul>
<li class="chapter" data-level="" data-path="graeme-blair-jasper-cooper-alexander-coppock-and-macartan-humphreys.html"><a href="graeme-blair-jasper-cooper-alexander-coppock-and-macartan-humphreys.html"><i class="fa fa-check"></i>Graeme Blair, Jasper Cooper, Alexander Coppock, and Macartan Humphreys</a><ul>
<li class="chapter" data-level="" data-path="graeme-blair-jasper-cooper-alexander-coppock-and-macartan-humphreys.html"><a href="graeme-blair-jasper-cooper-alexander-coppock-and-macartan-humphreys.html#draft.-under-advance-contract-princeton-university-press"><i class="fa fa-check"></i>Draft. Under advance contract, Princeton University Press</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i><b>1</b> Preamble</a><ul>
<li class="chapter" data-level="1.1" data-path="how-to-read-this-book.html"><a href="how-to-read-this-book.html"><i class="fa fa-check"></i><b>1.1</b> How to read this book</a></li>
<li class="chapter" data-level="1.2" data-path="how-to-work-this-book.html"><a href="how-to-work-this-book.html"><i class="fa fa-check"></i><b>1.2</b> How to <strong>work</strong> this book</a></li>
<li class="chapter" data-level="1.3" data-path="what-this-book-will-not-do.html"><a href="what-this-book-will-not-do.html"><i class="fa fa-check"></i><b>1.3</b> What this book will not do</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="improving-research-designs.html"><a href="improving-research-designs.html"><i class="fa fa-check"></i><b>2</b> Improving research designs</a><ul>
<li class="chapter" data-level="2.1" data-path="the-four-components-of-research-design.html"><a href="the-four-components-of-research-design.html"><i class="fa fa-check"></i><b>2.1</b> The four components of research design</a><ul>
<li class="chapter" data-level="2.1.1" data-path="the-four-components-of-research-design.html"><a href="the-four-components-of-research-design.html#example"><i class="fa fa-check"></i><b>2.1.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="declaring-a-design-in-code.html"><a href="declaring-a-design-in-code.html"><i class="fa fa-check"></i><b>2.2</b> Declaring a design in code</a></li>
<li class="chapter" data-level="2.3" data-path="assessing-research-design-quality-design-diagnosis.html"><a href="assessing-research-design-quality-design-diagnosis.html"><i class="fa fa-check"></i><b>2.3</b> Assessing research design quality: design diagnosis</a></li>
<li class="chapter" data-level="2.4" data-path="redesign.html"><a href="redesign.html"><i class="fa fa-check"></i><b>2.4</b> Redesign</a></li>
<li class="chapter" data-level="2.5" data-path="putting-designs-to-use.html"><a href="putting-designs-to-use.html"><i class="fa fa-check"></i><b>2.5</b> Putting designs to use</a></li>
<li class="chapter" data-level="2.6" data-path="avoiding-declaration-and-diagnosis-pitfalls.html"><a href="avoiding-declaration-and-diagnosis-pitfalls.html"><i class="fa fa-check"></i><b>2.6</b> Avoiding declaration and diagnosis pitfalls</a></li>
<li class="chapter" data-level="2.7" data-path="further-reading.html"><a href="further-reading.html"><i class="fa fa-check"></i><b>2.7</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="primer.html"><a href="primer.html"><i class="fa fa-check"></i><b>3</b> Software primer</a><ul>
<li class="chapter" data-level="3.1" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>3.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html"><i class="fa fa-check"></i><b>3.2</b> Building a step of a research design</a><ul>
<li class="chapter" data-level="3.2.1" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#options-and-defaults"><i class="fa fa-check"></i><b>3.2.1</b> Options and defaults</a></li>
<li class="chapter" data-level="3.2.2" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#your-own-handlers"><i class="fa fa-check"></i><b>3.2.2</b> Your own handlers</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="research-design-steps.html"><a href="research-design-steps.html"><i class="fa fa-check"></i><b>3.3</b> Research design steps</a><ul>
<li class="chapter" data-level="3.3.1" data-path="research-design-steps.html"><a href="research-design-steps.html#model"><i class="fa fa-check"></i><b>3.3.1</b> Model</a></li>
<li class="chapter" data-level="3.3.2" data-path="research-design-steps.html"><a href="research-design-steps.html#inquiry"><i class="fa fa-check"></i><b>3.3.2</b> Inquiry</a></li>
<li class="chapter" data-level="3.3.3" data-path="research-design-steps.html"><a href="research-design-steps.html#data-strategy"><i class="fa fa-check"></i><b>3.3.3</b> Data strategy</a></li>
<li class="chapter" data-level="3.3.4" data-path="research-design-steps.html"><a href="research-design-steps.html#answer-strategy"><i class="fa fa-check"></i><b>3.3.4</b> Answer strategy</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html"><i class="fa fa-check"></i><b>3.4</b> Building a design from design steps</a><ul>
<li class="chapter" data-level="3.4.1" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html#order-matters"><i class="fa fa-check"></i><b>3.4.1</b> Order matters</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html"><i class="fa fa-check"></i><b>3.5</b> Simulating a research design</a></li>
<li class="chapter" data-level="3.6" data-path="diagnosing-a-research-design.html"><a href="diagnosing-a-research-design.html"><i class="fa fa-check"></i><b>3.6</b> Diagnosing a research design</a></li>
<li class="chapter" data-level="3.7" data-path="comparing-designs.html"><a href="comparing-designs.html"><i class="fa fa-check"></i><b>3.7</b> Comparing designs</a><ul>
<li class="chapter" data-level="3.7.1" data-path="comparing-designs.html"><a href="comparing-designs.html#comparing-many-variants-of-a-design"><i class="fa fa-check"></i><b>3.7.1</b> Comparing many variants of a design</a></li>
<li class="chapter" data-level="3.7.2" data-path="comparing-designs.html"><a href="comparing-designs.html#library-of-designs"><i class="fa fa-check"></i><b>3.7.2</b> Library of designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="part-i-exercises.html"><a href="part-i-exercises.html"><i class="fa fa-check"></i><b>4</b> Part I Exercises</a></li>
<li class="part"><span><b>II Declaration, Diagnosis, Redesign</b></span></li>
<li class="chapter" data-level="5" data-path="declaration.html"><a href="declaration.html"><i class="fa fa-check"></i><b>5</b> Declaration</a><ul>
<li class="chapter" data-level="5.1" data-path="p2gulzarkhanrevisited.html"><a href="p2gulzarkhanrevisited.html"><i class="fa fa-check"></i><b>5.1</b> Example</a></li>
<li class="chapter" data-level="5.2" data-path="further-reading-1.html"><a href="further-reading-1.html"><i class="fa fa-check"></i><b>5.2</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="specifying-the-model.html"><a href="specifying-the-model.html"><i class="fa fa-check"></i><b>6</b> Specifying the model</a><ul>
<li class="chapter" data-level="6.1" data-path="what-is-the-population.html"><a href="what-is-the-population.html"><i class="fa fa-check"></i><b>6.1</b> What is the population?</a></li>
<li class="chapter" data-level="6.2" data-path="what-variables-to-include.html"><a href="what-variables-to-include.html"><i class="fa fa-check"></i><b>6.2</b> What variables to include?</a><ul>
<li class="chapter" data-level="6.2.1" data-path="what-variables-to-include.html"><a href="what-variables-to-include.html#types-of-variables"><i class="fa fa-check"></i><b>6.2.1</b> Types of variables</a></li>
<li class="chapter" data-level="6.2.2" data-path="what-variables-to-include.html"><a href="what-variables-to-include.html#what-variables-are-needed-for-declaration-and-diagnosis"><i class="fa fa-check"></i><b>6.2.2</b> What variables are <em>needed</em> for declaration and diagnosis?</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="specifying-structural-relations.html"><a href="specifying-structural-relations.html"><i class="fa fa-check"></i><b>6.3</b> Specifying structural relations</a></li>
<li class="chapter" data-level="6.4" data-path="substantive-justifications-for-choices-of-nodes-and-equations.html"><a href="substantive-justifications-for-choices-of-nodes-and-equations.html"><i class="fa fa-check"></i><b>6.4</b> Substantive justifications for choices of nodes and equations</a><ul>
<li class="chapter" data-level="6.4.1" data-path="substantive-justifications-for-choices-of-nodes-and-equations.html"><a href="substantive-justifications-for-choices-of-nodes-and-equations.html#reality-tracking-models"><i class="fa fa-check"></i><b>6.4.1</b> Reality tracking models</a></li>
<li class="chapter" data-level="6.4.2" data-path="substantive-justifications-for-choices-of-nodes-and-equations.html"><a href="substantive-justifications-for-choices-of-nodes-and-equations.html#discursive-models"><i class="fa fa-check"></i><b>6.4.2</b> Discursive models</a></li>
<li class="chapter" data-level="6.4.3" data-path="substantive-justifications-for-choices-of-nodes-and-equations.html"><a href="substantive-justifications-for-choices-of-nodes-and-equations.html#sufficient-models"><i class="fa fa-check"></i><b>6.4.3</b> Sufficient models</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="getting-it-right.html"><a href="getting-it-right.html"><i class="fa fa-check"></i><b>6.5</b> Getting it right?</a><ul>
<li class="chapter" data-level="6.5.1" data-path="getting-it-right.html"><a href="getting-it-right.html#robustness-to-multiple-models"><i class="fa fa-check"></i><b>6.5.1</b> Robustness to multiple models</a></li>
<li class="chapter" data-level="6.5.2" data-path="getting-it-right.html"><a href="getting-it-right.html#fundamental-uncertainty"><i class="fa fa-check"></i><b>6.5.2</b> Fundamental uncertainty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="defining-the-inquiry.html"><a href="defining-the-inquiry.html"><i class="fa fa-check"></i><b>7</b> Defining the inquiry</a><ul>
<li class="chapter" data-level="7.1" data-path="three-families-of-inquiries.html"><a href="three-families-of-inquiries.html"><i class="fa fa-check"></i><b>7.1</b> Three families of inquiries</a><ul>
<li class="chapter" data-level="7.1.1" data-path="three-families-of-inquiries.html"><a href="three-families-of-inquiries.html#descriptive-inquiries"><i class="fa fa-check"></i><b>7.1.1</b> Descriptive inquiries</a></li>
<li class="chapter" data-level="7.1.2" data-path="three-families-of-inquiries.html"><a href="three-families-of-inquiries.html#inquiries-about-causal-effects"><i class="fa fa-check"></i><b>7.1.2</b> Inquiries about causal effects</a></li>
<li class="chapter" data-level="7.1.3" data-path="three-families-of-inquiries.html"><a href="three-families-of-inquiries.html#causalattribution"><i class="fa fa-check"></i><b>7.1.3</b> Causal attribution inquiries</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="estimands-declared.html"><a href="estimands-declared.html"><i class="fa fa-check"></i><b>7.2</b> Estimands declared</a></li>
<li class="chapter" data-level="7.3" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html"><i class="fa fa-check"></i><b>7.3</b> Common complexities in defining estimands</a><ul>
<li class="chapter" data-level="7.3.1" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#data-dependent-inquiries"><i class="fa fa-check"></i><b>7.3.1</b> Data-dependent inquiries</a></li>
<li class="chapter" data-level="7.3.2" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#non-decomposable-inquiries"><i class="fa fa-check"></i><b>7.3.2</b> Non-decomposable inquiries</a></li>
<li class="chapter" data-level="7.3.3" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#model-dependent-inquiries"><i class="fa fa-check"></i><b>7.3.3</b> Model dependent inquiries</a></li>
<li class="chapter" data-level="7.3.4" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#complex-counterfactual-inquiries"><i class="fa fa-check"></i><b>7.3.4</b> Complex counterfactual inquiries</a></li>
<li class="chapter" data-level="7.3.5" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#inquiries-with-continuous-causal-variables"><i class="fa fa-check"></i><b>7.3.5</b> Inquiries with continuous causal variables</a></li>
<li class="chapter" data-level="7.3.6" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#undefined-and-unanswerable-inquiries"><i class="fa fa-check"></i><b>7.3.6</b> Undefined and unanswerable inquiries</a></li>
<li class="chapter" data-level="7.3.7" data-path="common-complexities-in-defining-estimands.html"><a href="common-complexities-in-defining-estimands.html#example-1"><i class="fa fa-check"></i><b>7.3.7</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="how-should-you-select-inquiries.html"><a href="how-should-you-select-inquiries.html"><i class="fa fa-check"></i><b>7.4</b> How should you select inquiries?</a></li>
<li class="chapter" data-level="7.5" data-path="further-reading-2.html"><a href="further-reading-2.html"><i class="fa fa-check"></i><b>7.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="crafting-a-data-strategy.html"><a href="crafting-a-data-strategy.html"><i class="fa fa-check"></i><b>8</b> Crafting a data strategy</a><ul>
<li class="chapter" data-level="8.1" data-path="p2sampling.html"><a href="p2sampling.html"><i class="fa fa-check"></i><b>8.1</b> Sampling strategies</a><ul>
<li class="chapter" data-level="8.1.1" data-path="p2sampling.html"><a href="p2sampling.html#randomized-sampling-designs"><i class="fa fa-check"></i><b>8.1.1</b> Randomized sampling designs</a></li>
<li class="chapter" data-level="8.1.2" data-path="p2sampling.html"><a href="p2sampling.html#nonrandomized-sampling-designs"><i class="fa fa-check"></i><b>8.1.2</b> Nonrandomized sampling designs</a></li>
<li class="chapter" data-level="8.1.3" data-path="p2sampling.html"><a href="p2sampling.html#sampling-designs-for-qualitative-research"><i class="fa fa-check"></i><b>8.1.3</b> Sampling designs for qualitative research</a></li>
<li class="chapter" data-level="8.1.4" data-path="p2sampling.html"><a href="p2sampling.html#choosing-among-sampling-designs"><i class="fa fa-check"></i><b>8.1.4</b> Choosing among sampling designs</a></li>
<li class="chapter" data-level="8.1.5" data-path="p2sampling.html"><a href="p2sampling.html#example-wang2015forecasting"><i class="fa fa-check"></i><b>8.1.5</b> Example: <span class="citation">Wang et al. (<span>2015</span>)</span></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="p2assignment.html"><a href="p2assignment.html"><i class="fa fa-check"></i><b>8.2</b> Treatment assignment</a><ul>
<li class="chapter" data-level="8.2.1" data-path="p2assignment.html"><a href="p2assignment.html#two-arm-trials"><i class="fa fa-check"></i><b>8.2.1</b> Two arm trials</a></li>
<li class="chapter" data-level="8.2.2" data-path="p2assignment.html"><a href="p2assignment.html#multiarm-and-factorial-trials"><i class="fa fa-check"></i><b>8.2.2</b> Multiarm and factorial trials</a></li>
<li class="chapter" data-level="8.2.3" data-path="p2assignment.html"><a href="p2assignment.html#complex-designs"><i class="fa fa-check"></i><b>8.2.3</b> Complex designs</a></li>
<li class="chapter" data-level="8.2.4" data-path="p2assignment.html"><a href="p2assignment.html#non-randomized-assignment"><i class="fa fa-check"></i><b>8.2.4</b> Non randomized assignment</a></li>
<li class="chapter" data-level="8.2.5" data-path="p2assignment.html"><a href="p2assignment.html#example-sociology-natural-experiment-from-government-or-official-cutoff"><i class="fa fa-check"></i><b>8.2.5</b> Example: sociology natural experiment from government or official cutoff</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="measurement.html"><a href="measurement.html"><i class="fa fa-check"></i><b>8.3</b> Measurement</a><ul>
<li class="chapter" data-level="8.3.1" data-path="measurement.html"><a href="measurement.html#example-weaver2019too"><i class="fa fa-check"></i><b>8.3.1</b> Example: <span class="citation">Weaver, Prowse, and Piston (<span>2019</span>)</span></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="threats-to-implementation.html"><a href="threats-to-implementation.html"><i class="fa fa-check"></i><b>8.4</b> Threats to implementation</a><ul>
<li class="chapter" data-level="8.4.1" data-path="threats-to-implementation.html"><a href="threats-to-implementation.html#noncompliance"><i class="fa fa-check"></i><b>8.4.1</b> Noncompliance</a></li>
<li class="chapter" data-level="8.4.2" data-path="threats-to-implementation.html"><a href="threats-to-implementation.html#attrition"><i class="fa fa-check"></i><b>8.4.2</b> Attrition</a></li>
<li class="chapter" data-level="8.4.3" data-path="threats-to-implementation.html"><a href="threats-to-implementation.html#excludability"><i class="fa fa-check"></i><b>8.4.3</b> Excludability</a></li>
<li class="chapter" data-level="8.4.4" data-path="threats-to-implementation.html"><a href="threats-to-implementation.html#interference"><i class="fa fa-check"></i><b>8.4.4</b> Interference</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="further-reading-3.html"><a href="further-reading-3.html"><i class="fa fa-check"></i><b>8.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="choosing-an-answer-strategy.html"><a href="choosing-an-answer-strategy.html"><i class="fa fa-check"></i><b>9</b> Choosing an answer strategy</a><ul>
<li class="chapter" data-level="9.1" data-path="following-the-model.html"><a href="following-the-model.html"><i class="fa fa-check"></i><b>9.1</b> Following the model</a><ul>
<li class="chapter" data-level="9.1.1" data-path="following-the-model.html"><a href="following-the-model.html#identification"><i class="fa fa-check"></i><b>9.1.1</b> Identification</a></li>
<li class="chapter" data-level="9.1.2" data-path="following-the-model.html"><a href="following-the-model.html#estimation"><i class="fa fa-check"></i><b>9.1.2</b> Estimation</a></li>
<li class="chapter" data-level="9.1.3" data-path="following-the-model.html"><a href="following-the-model.html#robustness"><i class="fa fa-check"></i><b>9.1.3</b> Robustness</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html"><i class="fa fa-check"></i><b>9.2</b> Following the inquiry</a><ul>
<li class="chapter" data-level="9.2.1" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html#plug-in-principle"><i class="fa fa-check"></i><b>9.2.1</b> Plug-in principle</a></li>
<li class="chapter" data-level="9.2.2" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html#point-estimation"><i class="fa fa-check"></i><b>9.2.2</b> Point estimation</a></li>
<li class="chapter" data-level="9.2.3" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html#estimating-the-variance"><i class="fa fa-check"></i><b>9.2.3</b> Estimating the variance</a></li>
<li class="chapter" data-level="9.2.4" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html#tests"><i class="fa fa-check"></i><b>9.2.4</b> Tests</a></li>
<li class="chapter" data-level="9.2.5" data-path="following-the-inquiry.html"><a href="following-the-inquiry.html#partial-identification"><i class="fa fa-check"></i><b>9.2.5</b> Partial identification</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="p2followdatastrategy.html"><a href="p2followdatastrategy.html"><i class="fa fa-check"></i><b>9.3</b> Following the data strategy</a></li>
<li class="chapter" data-level="9.4" data-path="qualitative-methods-of-inference.html"><a href="qualitative-methods-of-inference.html"><i class="fa fa-check"></i><b>9.4</b> Qualitative methods of inference</a><ul>
<li class="chapter" data-level="9.4.1" data-path="qualitative-methods-of-inference.html"><a href="qualitative-methods-of-inference.html#process-tracing"><i class="fa fa-check"></i><b>9.4.1</b> Process-tracing</a></li>
<li class="chapter" data-level="9.4.2" data-path="qualitative-methods-of-inference.html"><a href="qualitative-methods-of-inference.html#boolean-and-set-theoretic-methods"><i class="fa fa-check"></i><b>9.4.2</b> Boolean and set-theoretic methods</a></li>
<li class="chapter" data-level="9.4.3" data-path="qualitative-methods-of-inference.html"><a href="qualitative-methods-of-inference.html#narrative-comparison"><i class="fa fa-check"></i><b>9.4.3</b> Narrative comparison</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="answer-strategies-as-procedures.html"><a href="answer-strategies-as-procedures.html"><i class="fa fa-check"></i><b>9.5</b> Answer strategies as procedures</a></li>
<li class="chapter" data-level="9.6" data-path="interpretation.html"><a href="interpretation.html"><i class="fa fa-check"></i><b>9.6</b> Interpretation</a></li>
<li class="chapter" data-level="9.7" data-path="further-reading-4.html"><a href="further-reading-4.html"><i class="fa fa-check"></i><b>9.7</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="p2diagnosis.html"><a href="p2diagnosis.html"><i class="fa fa-check"></i><b>10</b> Diagnosis</a><ul>
<li class="chapter" data-level="10.1" data-path="estimating-diagnosands-analytically.html"><a href="estimating-diagnosands-analytically.html"><i class="fa fa-check"></i><b>10.1</b> Estimating diagnosands analytically</a></li>
<li class="chapter" data-level="10.2" data-path="estimating-diagnosands-via-simulation.html"><a href="estimating-diagnosands-via-simulation.html"><i class="fa fa-check"></i><b>10.2</b> Estimating diagnosands via simulation</a><ul>
<li class="chapter" data-level="10.2.1" data-path="estimating-diagnosands-via-simulation.html"><a href="estimating-diagnosands-via-simulation.html#interpreting-diagnosands"><i class="fa fa-check"></i><b>10.2.1</b> Interpreting diagnosands</a></li>
<li class="chapter" data-level="10.2.2" data-path="estimating-diagnosands-via-simulation.html"><a href="estimating-diagnosands-via-simulation.html#how-many-simulations-to-run"><i class="fa fa-check"></i><b>10.2.2</b> How many simulations to run</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="diagnosands.html"><a href="diagnosands.html"><i class="fa fa-check"></i><b>10.3</b> How to choose among diagnosands</a></li>
<li class="chapter" data-level="10.4" data-path="diagnosing-with-respect-to-variations-in-m.html"><a href="diagnosing-with-respect-to-variations-in-m.html"><i class="fa fa-check"></i><b>10.4</b> Diagnosing with respect to variations in M</a><ul>
<li class="chapter" data-level="10.4.1" data-path="diagnosing-with-respect-to-variations-in-m.html"><a href="diagnosing-with-respect-to-variations-in-m.html#estimating-the-minimum-detectable-effect-size"><i class="fa fa-check"></i><b>10.4.1</b> Estimating the minimum detectable effect size</a></li>
<li class="chapter" data-level="10.4.2" data-path="diagnosing-with-respect-to-variations-in-m.html"><a href="diagnosing-with-respect-to-variations-in-m.html#adjudicating-between-competing-models"><i class="fa fa-check"></i><b>10.4.2</b> Adjudicating between competing models</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="further-reading-5.html"><a href="further-reading-5.html"><i class="fa fa-check"></i><b>10.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="redesign-1.html"><a href="redesign-1.html"><i class="fa fa-check"></i><b>11</b> Redesign</a><ul>
<li class="chapter" data-level="11.1" data-path="redesign-mountain.html"><a href="redesign-mountain.html"><i class="fa fa-check"></i><b>11.1</b> Redesign Mountain</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="part-ii-exercises.html"><a href="part-ii-exercises.html"><i class="fa fa-check"></i><b>12</b> Part II Exercises</a></li>
<li class="part"><span><b>III Research Design Library</b></span></li>
<li class="chapter" data-level="13" data-path="research-design-library.html"><a href="research-design-library.html"><i class="fa fa-check"></i><b>13</b> Research Design Library</a></li>
<li class="chapter" data-level="14" data-path="observational-designs-for-descriptive-inference.html"><a href="observational-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>14</b> Observational designs for descriptive inference</a><ul>
<li class="chapter" data-level="14.1" data-path="random-sampling.html"><a href="random-sampling.html"><i class="fa fa-check"></i><b>14.1</b> Random sampling</a><ul>
<li class="chapter" data-level="14.1.1" data-path="random-sampling.html"><a href="random-sampling.html#declaration-1"><i class="fa fa-check"></i><b>14.1.1</b> Declaration</a></li>
<li class="chapter" data-level="14.1.2" data-path="random-sampling.html"><a href="random-sampling.html#dag"><i class="fa fa-check"></i><b>14.1.2</b> Dag</a></li>
<li class="chapter" data-level="14.1.3" data-path="random-sampling.html"><a href="random-sampling.html#example-2"><i class="fa fa-check"></i><b>14.1.3</b> Example</a></li>
<li class="chapter" data-level="14.1.4" data-path="random-sampling.html"><a href="random-sampling.html#simple-random-sampling"><i class="fa fa-check"></i><b>14.1.4</b> Simple random sampling</a></li>
<li class="chapter" data-level="14.1.5" data-path="random-sampling.html"><a href="random-sampling.html#stratified-and-clustered-random-sampling"><i class="fa fa-check"></i><b>14.1.5</b> Stratified and clustered random sampling</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="poststratification.html"><a href="poststratification.html"><i class="fa fa-check"></i><b>14.2</b> Poststratification</a><ul>
<li class="chapter" data-level="14.2.1" data-path="poststratification.html"><a href="poststratification.html#declaration-2"><i class="fa fa-check"></i><b>14.2.1</b> Declaration</a></li>
<li class="chapter" data-level="14.2.2" data-path="poststratification.html"><a href="poststratification.html#dag-1"><i class="fa fa-check"></i><b>14.2.2</b> Dag</a></li>
<li class="chapter" data-level="14.2.3" data-path="poststratification.html"><a href="poststratification.html#exercises-1"><i class="fa fa-check"></i><b>14.2.3</b> Exercises</a></li>
<li class="chapter" data-level="14.2.4" data-path="poststratification.html"><a href="poststratification.html#example-3"><i class="fa fa-check"></i><b>14.2.4</b> Example</a></li>
<li class="chapter" data-level="14.2.5" data-path="poststratification.html"><a href="poststratification.html#example-4"><i class="fa fa-check"></i><b>14.2.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html"><i class="fa fa-check"></i><b>14.3</b> Inference about unobserved variables</a><ul>
<li class="chapter" data-level="14.3.1" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html#declaration-3"><i class="fa fa-check"></i><b>14.3.1</b> Declaration</a></li>
<li class="chapter" data-level="14.3.2" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html#dag-2"><i class="fa fa-check"></i><b>14.3.2</b> Dag</a></li>
<li class="chapter" data-level="14.3.3" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html#example-5"><i class="fa fa-check"></i><b>14.3.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="structural-estimation.html"><a href="structural-estimation.html"><i class="fa fa-check"></i><b>14.4</b> Structural estimation</a><ul>
<li class="chapter" data-level="14.4.1" data-path="structural-estimation.html"><a href="structural-estimation.html#declaration-4"><i class="fa fa-check"></i><b>14.4.1</b> Declaration</a></li>
<li class="chapter" data-level="14.4.2" data-path="structural-estimation.html"><a href="structural-estimation.html#dag-3"><i class="fa fa-check"></i><b>14.4.2</b> Dag</a></li>
<li class="chapter" data-level="14.4.3" data-path="structural-estimation.html"><a href="structural-estimation.html#example-6"><i class="fa fa-check"></i><b>14.4.3</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="experimental-designs-for-descriptive-inference.html"><a href="experimental-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>15</b> Experimental designs for descriptive inference</a><ul>
<li class="chapter" data-level="15.1" data-path="audit-experiments.html"><a href="audit-experiments.html"><i class="fa fa-check"></i><b>15.1</b> Audit experiments</a><ul>
<li class="chapter" data-level="15.1.1" data-path="audit-experiments.html"><a href="audit-experiments.html#declaration-5"><i class="fa fa-check"></i><b>15.1.1</b> Declaration</a></li>
<li class="chapter" data-level="15.1.2" data-path="audit-experiments.html"><a href="audit-experiments.html#dag-4"><i class="fa fa-check"></i><b>15.1.2</b> Dag</a></li>
<li class="chapter" data-level="15.1.3" data-path="audit-experiments.html"><a href="audit-experiments.html#example-7"><i class="fa fa-check"></i><b>15.1.3</b> Example</a></li>
<li class="chapter" data-level="15.1.4" data-path="audit-experiments.html"><a href="audit-experiments.html#design-declaration-2"><i class="fa fa-check"></i><b>15.1.4</b> Design Declaration</a></li>
<li class="chapter" data-level="15.1.5" data-path="audit-experiments.html"><a href="audit-experiments.html#takeaways-2"><i class="fa fa-check"></i><b>15.1.5</b> Takeaways</a></li>
<li class="chapter" data-level="15.1.6" data-path="audit-experiments.html"><a href="audit-experiments.html#applications"><i class="fa fa-check"></i><b>15.1.6</b> Applications</a></li>
<li class="chapter" data-level="15.1.7" data-path="audit-experiments.html"><a href="audit-experiments.html#exercises-2"><i class="fa fa-check"></i><b>15.1.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html"><i class="fa fa-check"></i><b>15.2</b> Experiments for sensitive questions</a><ul>
<li class="chapter" data-level="15.2.1" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#declaration-6"><i class="fa fa-check"></i><b>15.2.1</b> Declaration</a></li>
<li class="chapter" data-level="15.2.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#dag-5"><i class="fa fa-check"></i><b>15.2.2</b> Dag</a></li>
<li class="chapter" data-level="15.2.3" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#example-8"><i class="fa fa-check"></i><b>15.2.3</b> Example</a></li>
<li class="chapter" data-level="15.2.4" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#list-experiments"><i class="fa fa-check"></i><b>15.2.4</b> List experiments</a></li>
<li class="chapter" data-level="15.2.5" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#randomized-response-technique"><i class="fa fa-check"></i><b>15.2.5</b> Randomized response technique</a></li>
<li class="chapter" data-level="15.2.6" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#references"><i class="fa fa-check"></i><b>15.2.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="conjoint-experiments.html"><a href="conjoint-experiments.html"><i class="fa fa-check"></i><b>15.3</b> Conjoint experiments</a><ul>
<li class="chapter" data-level="15.3.1" data-path="conjoint-experiments.html"><a href="conjoint-experiments.html#declaration-8"><i class="fa fa-check"></i><b>15.3.1</b> Declaration</a></li>
<li class="chapter" data-level="15.3.2" data-path="conjoint-experiments.html"><a href="conjoint-experiments.html#dag-6"><i class="fa fa-check"></i><b>15.3.2</b> Dag</a></li>
<li class="chapter" data-level="15.3.3" data-path="conjoint-experiments.html"><a href="conjoint-experiments.html#example-9"><i class="fa fa-check"></i><b>15.3.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="behavioral-games.html"><a href="behavioral-games.html"><i class="fa fa-check"></i><b>15.4</b> Behavioral games</a><ul>
<li class="chapter" data-level="15.4.1" data-path="behavioral-games.html"><a href="behavioral-games.html#declaration-9"><i class="fa fa-check"></i><b>15.4.1</b> Declaration</a></li>
<li class="chapter" data-level="15.4.2" data-path="behavioral-games.html"><a href="behavioral-games.html#dag-7"><i class="fa fa-check"></i><b>15.4.2</b> Dag</a></li>
<li class="chapter" data-level="15.4.3" data-path="behavioral-games.html"><a href="behavioral-games.html#example-10"><i class="fa fa-check"></i><b>15.4.3</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="observational-designs-for-causal-inference.html"><a href="observational-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>16</b> Observational designs for causal inference</a><ul>
<li class="chapter" data-level="16.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html"><i class="fa fa-check"></i><b>16.1</b> Selection on observables</a><ul>
<li class="chapter" data-level="16.1.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html#declaration-10"><i class="fa fa-check"></i><b>16.1.1</b> Declaration</a></li>
<li class="chapter" data-level="16.1.2" data-path="selection-on-observables.html"><a href="selection-on-observables.html#dag-8"><i class="fa fa-check"></i><b>16.1.2</b> Dag</a></li>
<li class="chapter" data-level="16.1.3" data-path="selection-on-observables.html"><a href="selection-on-observables.html#example-11"><i class="fa fa-check"></i><b>16.1.3</b> Example</a></li>
<li class="chapter" data-level="16.1.4" data-path="selection-on-observables.html"><a href="selection-on-observables.html#classic-confounding"><i class="fa fa-check"></i><b>16.1.4</b> Classic Confounding</a></li>
<li class="chapter" data-level="16.1.5" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-functional-form-is-wrong"><i class="fa fa-check"></i><b>16.1.5</b> What if the functional form is wrong?</a></li>
<li class="chapter" data-level="16.1.6" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-you-have-unobserved-confounding"><i class="fa fa-check"></i><b>16.1.6</b> What if you have unobserved confounding?</a></li>
<li class="chapter" data-level="16.1.7" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-observed-covariate-is-post-treatment"><i class="fa fa-check"></i><b>16.1.7</b> What if the observed covariate is post-treatment?</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="further-reading-6.html"><a href="further-reading-6.html"><i class="fa fa-check"></i><b>16.2</b> Further reading</a></li>
<li class="chapter" data-level="16.3" data-path="p3iv.html"><a href="p3iv.html"><i class="fa fa-check"></i><b>16.3</b> Instrumental variables</a><ul>
<li class="chapter" data-level="16.3.1" data-path="p3iv.html"><a href="p3iv.html#declaration-11"><i class="fa fa-check"></i><b>16.3.1</b> Declaration</a></li>
<li class="chapter" data-level="16.3.2" data-path="p3iv.html"><a href="p3iv.html#dag-9"><i class="fa fa-check"></i><b>16.3.2</b> Dag</a></li>
<li class="chapter" data-level="16.3.3" data-path="p3iv.html"><a href="p3iv.html#redesign-2"><i class="fa fa-check"></i><b>16.3.3</b> Redesign</a></li>
<li class="chapter" data-level="16.3.4" data-path="p3iv.html"><a href="p3iv.html#suggested-readings"><i class="fa fa-check"></i><b>16.3.4</b> Suggested readings</a></li>
<li class="chapter" data-level="16.3.5" data-path="p3iv.html"><a href="p3iv.html#example-12"><i class="fa fa-check"></i><b>16.3.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="difference-in-differences.html"><a href="difference-in-differences.html"><i class="fa fa-check"></i><b>16.4</b> Difference-in-differences</a><ul>
<li class="chapter" data-level="16.4.1" data-path="difference-in-differences.html"><a href="difference-in-differences.html#declaration-12"><i class="fa fa-check"></i><b>16.4.1</b> Declaration</a></li>
<li class="chapter" data-level="16.4.2" data-path="difference-in-differences.html"><a href="difference-in-differences.html#dag-10"><i class="fa fa-check"></i><b>16.4.2</b> Dag</a></li>
<li class="chapter" data-level="16.4.3" data-path="difference-in-differences.html"><a href="difference-in-differences.html#example-13"><i class="fa fa-check"></i><b>16.4.3</b> Example</a></li>
<li class="chapter" data-level="16.4.4" data-path="difference-in-differences.html"><a href="difference-in-differences.html#two-period-two-group-setting"><i class="fa fa-check"></i><b>16.4.4</b> Two-period two-group setting</a></li>
<li class="chapter" data-level="16.4.5" data-path="difference-in-differences.html"><a href="difference-in-differences.html#parallel-trends-assumption"><i class="fa fa-check"></i><b>16.4.5</b> Parallel trends assumption</a></li>
<li class="chapter" data-level="16.4.6" data-path="difference-in-differences.html"><a href="difference-in-differences.html#multi-period-design"><i class="fa fa-check"></i><b>16.4.6</b> Multi-period design</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="RDD.html"><a href="RDD.html"><i class="fa fa-check"></i><b>16.5</b> Regression Discontinuity</a><ul>
<li class="chapter" data-level="16.5.1" data-path="RDD.html"><a href="RDD.html#declaration-13"><i class="fa fa-check"></i><b>16.5.1</b> Declaration</a></li>
<li class="chapter" data-level="16.5.2" data-path="RDD.html"><a href="RDD.html#dag-11"><i class="fa fa-check"></i><b>16.5.2</b> Dag</a></li>
<li class="chapter" data-level="16.5.3" data-path="RDD.html"><a href="RDD.html#example-14"><i class="fa fa-check"></i><b>16.5.3</b> Example</a></li>
<li class="chapter" data-level="16.5.4" data-path="RDD.html"><a href="RDD.html#design-declaration-3"><i class="fa fa-check"></i><b>16.5.4</b> Design Declaration</a></li>
<li class="chapter" data-level="16.5.5" data-path="RDD.html"><a href="RDD.html#takeaways-3"><i class="fa fa-check"></i><b>16.5.5</b> Takeaways</a></li>
<li class="chapter" data-level="16.5.6" data-path="RDD.html"><a href="RDD.html#further-reading-7"><i class="fa fa-check"></i><b>16.5.6</b> Further Reading</a></li>
<li class="chapter" data-level="16.5.7" data-path="RDD.html"><a href="RDD.html#exercises-3"><i class="fa fa-check"></i><b>16.5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html"><i class="fa fa-check"></i><b>16.6</b> Bayesian process-tracing</a><ul>
<li class="chapter" data-level="16.6.1" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html#declaration-14"><i class="fa fa-check"></i><b>16.6.1</b> Declaration</a></li>
<li class="chapter" data-level="16.6.2" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html#dag-12"><i class="fa fa-check"></i><b>16.6.2</b> Dag</a></li>
<li class="chapter" data-level="16.6.3" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html#exercises-4"><i class="fa fa-check"></i><b>16.6.3</b> Exercises</a></li>
<li class="chapter" data-level="16.6.4" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html#online-appendix-applied-example"><i class="fa fa-check"></i><b>16.6.4</b> Online Appendix Applied Example</a></li>
<li class="chapter" data-level="16.6.5" data-path="bayesianprocesstracing.html"><a href="bayesianprocesstracing.html#dag-13"><i class="fa fa-check"></i><b>16.6.5</b> Dag</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="synthetic-controls.html"><a href="synthetic-controls.html"><i class="fa fa-check"></i><b>16.7</b> Synthetic controls</a><ul>
<li class="chapter" data-level="16.7.1" data-path="synthetic-controls.html"><a href="synthetic-controls.html#declaration-15"><i class="fa fa-check"></i><b>16.7.1</b> Declaration</a></li>
<li class="chapter" data-level="16.7.2" data-path="synthetic-controls.html"><a href="synthetic-controls.html#dag-14"><i class="fa fa-check"></i><b>16.7.2</b> Dag</a></li>
<li class="chapter" data-level="16.7.3" data-path="synthetic-controls.html"><a href="synthetic-controls.html#example-15"><i class="fa fa-check"></i><b>16.7.3</b> Example</a></li>
<li class="chapter" data-level="16.7.4" data-path="synthetic-controls.html"><a href="synthetic-controls.html#when-there-are-not-good-controls-standard-synth-will-get-the-wrong-answer"><i class="fa fa-check"></i><b>16.7.4</b> When there are not good controls, standard synth will get the wrong answer</a></li>
<li class="chapter" data-level="16.7.5" data-path="synthetic-controls.html"><a href="synthetic-controls.html#references-1"><i class="fa fa-check"></i><b>16.7.5</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="experimental-designs-for-causal-inference.html"><a href="experimental-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>17</b> Experimental designs for causal inference</a><ul>
<li class="chapter" data-level="17.1" data-path="two-arm-trials-1.html"><a href="two-arm-trials-1.html"><i class="fa fa-check"></i><b>17.1</b> Two arm trials</a><ul>
<li class="chapter" data-level="17.1.1" data-path="two-arm-trials-1.html"><a href="two-arm-trials-1.html#declaration-16"><i class="fa fa-check"></i><b>17.1.1</b> Declaration</a></li>
<li class="chapter" data-level="17.1.2" data-path="two-arm-trials-1.html"><a href="two-arm-trials-1.html#dag-15"><i class="fa fa-check"></i><b>17.1.2</b> Dag</a></li>
<li class="chapter" data-level="17.1.3" data-path="two-arm-trials-1.html"><a href="two-arm-trials-1.html#example-16"><i class="fa fa-check"></i><b>17.1.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="blocked-trials.html"><a href="blocked-trials.html"><i class="fa fa-check"></i><b>17.2</b> Blocked trials</a><ul>
<li class="chapter" data-level="17.2.1" data-path="blocked-trials.html"><a href="blocked-trials.html#declaration-17"><i class="fa fa-check"></i><b>17.2.1</b> Declaration</a></li>
<li class="chapter" data-level="17.2.2" data-path="blocked-trials.html"><a href="blocked-trials.html#dag-16"><i class="fa fa-check"></i><b>17.2.2</b> Dag</a></li>
<li class="chapter" data-level="17.2.3" data-path="blocked-trials.html"><a href="blocked-trials.html#example-17"><i class="fa fa-check"></i><b>17.2.3</b> Example</a></li>
<li class="chapter" data-level="17.2.4" data-path="blocked-trials.html"><a href="blocked-trials.html#two-arm-trials-and-designs-with-blocking-and-clustering"><i class="fa fa-check"></i><b>17.2.4</b> Two-arm trials and designs with blocking and clustering</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="multiarm-designs.html"><a href="multiarm-designs.html"><i class="fa fa-check"></i><b>17.3</b> Multiarm Designs</a><ul>
<li class="chapter" data-level="17.3.1" data-path="multiarm-designs.html"><a href="multiarm-designs.html#declaration-18"><i class="fa fa-check"></i><b>17.3.1</b> Declaration</a></li>
<li class="chapter" data-level="17.3.2" data-path="multiarm-designs.html"><a href="multiarm-designs.html#dag-17"><i class="fa fa-check"></i><b>17.3.2</b> Dag</a></li>
<li class="chapter" data-level="17.3.3" data-path="multiarm-designs.html"><a href="multiarm-designs.html#example-18"><i class="fa fa-check"></i><b>17.3.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="encouragement-designs.html"><a href="encouragement-designs.html"><i class="fa fa-check"></i><b>17.4</b> Encouragement designs</a><ul>
<li class="chapter" data-level="17.4.1" data-path="encouragement-designs.html"><a href="encouragement-designs.html#declaration-19"><i class="fa fa-check"></i><b>17.4.1</b> Declaration</a></li>
<li class="chapter" data-level="17.4.2" data-path="encouragement-designs.html"><a href="encouragement-designs.html#dag-18"><i class="fa fa-check"></i><b>17.4.2</b> Dag</a></li>
<li class="chapter" data-level="17.4.3" data-path="encouragement-designs.html"><a href="encouragement-designs.html#example-19"><i class="fa fa-check"></i><b>17.4.3</b> Example</a></li>
<li class="chapter" data-level="17.4.4" data-path="encouragement-designs.html"><a href="encouragement-designs.html#references-2"><i class="fa fa-check"></i><b>17.4.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html"><i class="fa fa-check"></i><b>17.5</b> Stepped wedge designs</a><ul>
<li class="chapter" data-level="17.5.1" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#declaration-20"><i class="fa fa-check"></i><b>17.5.1</b> Declaration</a></li>
<li class="chapter" data-level="17.5.2" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#dag-19"><i class="fa fa-check"></i><b>17.5.2</b> Dag</a></li>
<li class="chapter" data-level="17.5.3" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#exercises-5"><i class="fa fa-check"></i><b>17.5.3</b> Exercises</a></li>
<li class="chapter" data-level="17.5.4" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#online-appendix-applied-example-1"><i class="fa fa-check"></i><b>17.5.4</b> Online Appendix Applied Example</a></li>
<li class="chapter" data-level="17.5.5" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#references-3"><i class="fa fa-check"></i><b>17.5.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html"><i class="fa fa-check"></i><b>17.6</b> Randomized Saturation Design</a><ul>
<li class="chapter" data-level="17.6.1" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#declaration-21"><i class="fa fa-check"></i><b>17.6.1</b> Declaration</a></li>
<li class="chapter" data-level="17.6.2" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#dag-20"><i class="fa fa-check"></i><b>17.6.2</b> Dag</a></li>
<li class="chapter" data-level="17.6.3" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#exercises-6"><i class="fa fa-check"></i><b>17.6.3</b> Exercises</a></li>
<li class="chapter" data-level="17.6.4" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#online-appendix-applied-example-2"><i class="fa fa-check"></i><b>17.6.4</b> Online Appendix Applied Example</a></li>
<li class="chapter" data-level="17.6.5" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#design-declaration-4"><i class="fa fa-check"></i><b>17.6.5</b> Design Declaration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="multi-study-designs.html"><a href="multi-study-designs.html"><i class="fa fa-check"></i><b>18</b> Multi-study designs</a><ul>
<li class="chapter" data-level="18.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html"><i class="fa fa-check"></i><b>18.1</b> Papers with multiple studies</a><ul>
<li class="chapter" data-level="18.1.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#design-declaration-5"><i class="fa fa-check"></i><b>18.1.1</b> Design Declaration</a></li>
<li class="chapter" data-level="18.1.2" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#dag-21"><i class="fa fa-check"></i><b>18.1.2</b> DAG</a></li>
<li class="chapter" data-level="18.1.3" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#takeaways-4"><i class="fa fa-check"></i><b>18.1.3</b> Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="multi-site-studies.html"><a href="multi-site-studies.html"><i class="fa fa-check"></i><b>18.2</b> Multi-site studies</a></li>
<li class="chapter" data-level="18.3" data-path="the-metaketa-design.html"><a href="the-metaketa-design.html"><i class="fa fa-check"></i><b>18.3</b> The Metaketa design</a><ul>
<li class="chapter" data-level="18.3.1" data-path="the-metaketa-design.html"><a href="the-metaketa-design.html#unbiased-estimates-of-out-of-sample-sites-in-presence-of-heterogeneous-effects"><i class="fa fa-check"></i><b>18.3.1</b> Unbiased estimates of out-of-sample sites in presence of heterogeneous effects</a></li>
<li class="chapter" data-level="18.3.2" data-path="the-metaketa-design.html"><a href="the-metaketa-design.html#bayesian-estimation-can-improve-estimates-of-effects-for-sampled-sites"><i class="fa fa-check"></i><b>18.3.2</b> Bayesian estimation can improve estimates of effects for sampled sites</a></li>
<li class="chapter" data-level="18.3.3" data-path="the-metaketa-design.html"><a href="the-metaketa-design.html#when-things-break-down-confounded-sampling"><i class="fa fa-check"></i><b>18.3.3</b> when things break down: confounded sampling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="part-iii-exercises.html"><a href="part-iii-exercises.html"><i class="fa fa-check"></i><b>19</b> Part III Exercises</a></li>
<li class="part"><span><b>IV Research Design Lifecycle</b></span></li>
<li class="chapter" data-level="20" data-path="research-design-lifecycle.html"><a href="research-design-lifecycle.html"><i class="fa fa-check"></i><b>20</b> Research Design Lifecycle</a><ul>
<li class="chapter" data-level="20.1" data-path="p4planning.html"><a href="p4planning.html"><i class="fa fa-check"></i><b>20.1</b> Planning</a><ul>
<li class="chapter" data-level="20.1.1" data-path="p4planning.html"><a href="p4planning.html#example-20"><i class="fa fa-check"></i><b>20.1.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="ethical-review.html"><a href="ethical-review.html"><i class="fa fa-check"></i><b>20.2</b> Ethical Review</a><ul>
<li class="chapter" data-level="20.2.1" data-path="ethical-review.html"><a href="ethical-review.html#ethical-principles-as-diagnosands"><i class="fa fa-check"></i><b>20.2.1</b> Ethical principles as diagnosands</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="partners.html"><a href="partners.html"><i class="fa fa-check"></i><b>20.3</b> Partners</a></li>
<li class="chapter" data-level="20.4" data-path="funding.html"><a href="funding.html"><i class="fa fa-check"></i><b>20.4</b> Funding</a></li>
<li class="chapter" data-level="20.5" data-path="p4piloting.html"><a href="p4piloting.html"><i class="fa fa-check"></i><b>20.5</b> Piloting</a></li>
<li class="chapter" data-level="20.6" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>20.6</b> Implementation</a></li>
<li class="chapter" data-level="20.7" data-path="p4populatedpap.html"><a href="p4populatedpap.html"><i class="fa fa-check"></i><b>20.7</b> Populated Preanalysis Plan</a><ul>
<li class="chapter" data-level="20.7.1" data-path="p4populatedpap.html"><a href="p4populatedpap.html#example-21"><i class="fa fa-check"></i><b>20.7.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="20.8" data-path="reconciliation.html"><a href="reconciliation.html"><i class="fa fa-check"></i><b>20.8</b> Reconciliation</a><ul>
<li class="chapter" data-level="20.8.1" data-path="reconciliation.html"><a href="reconciliation.html#example-22"><i class="fa fa-check"></i><b>20.8.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="20.9" data-path="writing.html"><a href="writing.html"><i class="fa fa-check"></i><b>20.9</b> Writing</a></li>
<li class="chapter" data-level="20.10" data-path="publication.html"><a href="publication.html"><i class="fa fa-check"></i><b>20.10</b> Publication</a><ul>
<li class="chapter" data-level="20.10.1" data-path="publication.html"><a href="publication.html#reviewing-papers"><i class="fa fa-check"></i><b>20.10.1</b> Reviewing papers</a></li>
<li class="chapter" data-level="20.10.2" data-path="publication.html"><a href="publication.html#responding-to-reviewers"><i class="fa fa-check"></i><b>20.10.2</b> Responding to reviewers</a></li>
</ul></li>
<li class="chapter" data-level="20.11" data-path="archiving.html"><a href="archiving.html"><i class="fa fa-check"></i><b>20.11</b> Archiving</a></li>
<li class="chapter" data-level="20.12" data-path="reanalysis.html"><a href="reanalysis.html"><i class="fa fa-check"></i><b>20.12</b> Reanalysis</a></li>
<li class="chapter" data-level="20.13" data-path="replication.html"><a href="replication.html"><i class="fa fa-check"></i><b>20.13</b> Replication</a></li>
<li class="chapter" data-level="20.14" data-path="resolving-disputes.html"><a href="resolving-disputes.html"><i class="fa fa-check"></i><b>20.14</b> Resolving Disputes</a></li>
<li class="chapter" data-level="20.15" data-path="synthesis.html"><a href="synthesis.html"><i class="fa fa-check"></i><b>20.15</b> Synthesis</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="part-iv-exercises.html"><a href="part-iv-exercises.html"><i class="fa fa-check"></i><b>21</b> Part IV Exercises</a></li>
<li class="chapter" data-level="22" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>22</b> Glossary</a></li>
<li class="chapter" data-level="" data-path="references-4.html"><a href="references-4.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://declaredesign.org" target="blank">DeclareDesign</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Research Design: Declare, Diagnose, Redesign</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="synthetic-controls" class="section level2">
<h2><span class="header-section-number">16.7</span> Synthetic controls</h2>
<div id="declaration-15" class="section level3">
<h3><span class="header-section-number">16.7.1</span> Declaration</h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="synthetic-controls.html#cb117-1"></a>design &lt;-<span class="st"> </span></span>
<span id="cb117-2"><a href="synthetic-controls.html#cb117-2"></a><span class="st">  </span><span class="kw">declare_population</span>(</span>
<span id="cb117-3"><a href="synthetic-controls.html#cb117-3"></a>    <span class="dt">unit =</span> <span class="kw">add_level</span>(<span class="dt">N =</span> <span class="dv">10</span>, <span class="dt">units =</span> <span class="dv">1</span><span class="op">:</span>N, <span class="dt">X =</span> <span class="kw">rnorm</span>(N, <span class="dt">sd =</span> <span class="fl">0.5</span>)),</span>
<span id="cb117-4"><a href="synthetic-controls.html#cb117-4"></a>    <span class="dt">period =</span> <span class="kw">add_level</span>(<span class="dt">N =</span> <span class="dv">3</span>, <span class="dt">time =</span> <span class="dv">1</span><span class="op">:</span>N, <span class="dt">nest =</span> <span class="ot">FALSE</span>),</span>
<span id="cb117-5"><a href="synthetic-controls.html#cb117-5"></a>    <span class="dt">unit_period =</span> <span class="kw">cross_levels</span>(<span class="dt">by =</span> <span class="kw">join</span>(unit, period), <span class="dt">U =</span> <span class="kw">rnorm</span>(N))</span>
<span id="cb117-6"><a href="synthetic-controls.html#cb117-6"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-7"><a href="synthetic-controls.html#cb117-7"></a><span class="st">  </span><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span>X <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span><span class="kw">as.numeric</span>(period) <span class="op">+</span><span class="st"> </span>Z <span class="op">+</span><span class="st"> </span>U) <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-8"><a href="synthetic-controls.html#cb117-8"></a><span class="st">  </span><span class="kw">declare_estimand</span>(<span class="dt">ATE =</span> <span class="kw">mean</span>(Y_Z_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>Y_Z_<span class="dv">0</span>), <span class="dt">subset =</span> period <span class="op">==</span><span class="st"> </span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-9"><a href="synthetic-controls.html#cb117-9"></a><span class="st">  </span><span class="kw">declare_step</span>(<span class="dt">handler =</span> mutate, <span class="dt">Z =</span> unit <span class="op">==</span><span class="st"> &quot;01&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-10"><a href="synthetic-controls.html#cb117-10"></a><span class="st">  </span><span class="kw">declare_reveal</span>(<span class="dt">Y =</span> <span class="kw">if_else</span>(Z <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>period <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>, Y_Z_<span class="dv">0</span>, Y_Z_<span class="dv">1</span>), <span class="dt">handler =</span> mutate) <span class="op">+</span></span>
<span id="cb117-11"><a href="synthetic-controls.html#cb117-11"></a><span class="st">  </span><span class="kw">declare_step</span>(<span class="dt">predictors =</span> <span class="st">&quot;X&quot;</span>,</span>
<span id="cb117-12"><a href="synthetic-controls.html#cb117-12"></a>               <span class="dt">time.predictors.prior =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,</span>
<span id="cb117-13"><a href="synthetic-controls.html#cb117-13"></a>               <span class="dt">dependent =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb117-14"><a href="synthetic-controls.html#cb117-14"></a>               <span class="dt">unit.variable =</span> <span class="st">&quot;units&quot;</span>,</span>
<span id="cb117-15"><a href="synthetic-controls.html#cb117-15"></a>               <span class="dt">time.variable =</span> <span class="st">&quot;time&quot;</span>,</span>
<span id="cb117-16"><a href="synthetic-controls.html#cb117-16"></a>               <span class="dt">treatment.identifier =</span> <span class="dv">1</span>,</span>
<span id="cb117-17"><a href="synthetic-controls.html#cb117-17"></a>               <span class="dt">controls.identifier =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">10</span>, </span>
<span id="cb117-18"><a href="synthetic-controls.html#cb117-18"></a>               <span class="dt">handler =</span> synth_weights_tidy) <span class="op">+</span></span>
<span id="cb117-19"><a href="synthetic-controls.html#cb117-19"></a><span class="st">  </span><span class="kw">declare_estimator</span>(Y <span class="op">~</span><span class="st"> </span>Z, <span class="dt">subset =</span> time <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>, <span class="dt">weights =</span> synth_weights, <span class="dt">model =</span> lm_robust, <span class="dt">label =</span> <span class="st">&quot;synth&quot;</span>)</span></code></pre></div>
</div>
<div id="dag-14" class="section level3">
<h3><span class="header-section-number">16.7.2</span> Dag</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="synthetic-controls.html#cb118-1"></a><span class="co"># Simulation --------------------------------------------------------------</span></span>
<span id="cb118-2"><a href="synthetic-controls.html#cb118-2"></a></span>
<span id="cb118-3"><a href="synthetic-controls.html#cb118-3"></a><span class="co"># simulations &lt;- simulate_design(design, sims = 100)</span></span>
<span id="cb118-4"><a href="synthetic-controls.html#cb118-4"></a><span class="co"># ggplot(simulations, aes(estimate)) + geom_histogram()</span></span>
<span id="cb118-5"><a href="synthetic-controls.html#cb118-5"></a></span>
<span id="cb118-6"><a href="synthetic-controls.html#cb118-6"></a></span>
<span id="cb118-7"><a href="synthetic-controls.html#cb118-7"></a><span class="co"># Synth plot --------------------------------------------------------------</span></span>
<span id="cb118-8"><a href="synthetic-controls.html#cb118-8"></a></span>
<span id="cb118-9"><a href="synthetic-controls.html#cb118-9"></a><span class="co"># data &lt;- draw_data(design)</span></span>
<span id="cb118-10"><a href="synthetic-controls.html#cb118-10"></a><span class="co"># summary_df &lt;- data %&gt;%</span></span>
<span id="cb118-11"><a href="synthetic-controls.html#cb118-11"></a><span class="co">#   group_by(Z, time) %&gt;%</span></span>
<span id="cb118-12"><a href="synthetic-controls.html#cb118-12"></a><span class="co">#   summarize(Y = weighted.mean(Y, w = synth_weights))</span></span>
<span id="cb118-13"><a href="synthetic-controls.html#cb118-13"></a><span class="co"># ggplot(summary_df, aes(x = time, y = Y, color = Z)) +</span></span>
<span id="cb118-14"><a href="synthetic-controls.html#cb118-14"></a><span class="co">#   geom_line(size = 2, alpha = 0.5) +</span></span>
<span id="cb118-15"><a href="synthetic-controls.html#cb118-15"></a><span class="co">#   geom_line(data = data, aes(x = time, y = Y, group = units), color = &quot;black&quot;, alpha = 0.3) +</span></span>
<span id="cb118-16"><a href="synthetic-controls.html#cb118-16"></a><span class="co">#   geom_point(data = data, aes(x = time, y = Y, size = synth_weights^2), alpha = 0.3) +</span></span>
<span id="cb118-17"><a href="synthetic-controls.html#cb118-17"></a><span class="co">#   geom_vline(xintercept = 2.5)</span></span>
<span id="cb118-18"><a href="synthetic-controls.html#cb118-18"></a></span>
<span id="cb118-19"><a href="synthetic-controls.html#cb118-19"></a>dag &lt;-<span class="st"> </span><span class="kw">dagify</span>(Y <span class="op">~</span><span class="st"> </span>X <span class="op">+</span><span class="st"> </span>period <span class="op">+</span><span class="st"> </span>Z <span class="op">+</span><span class="st"> </span>U,</span>
<span id="cb118-20"><a href="synthetic-controls.html#cb118-20"></a>              Z <span class="op">~</span><span class="st"> </span>X)</span>
<span id="cb118-21"><a href="synthetic-controls.html#cb118-21"></a></span>
<span id="cb118-22"><a href="synthetic-controls.html#cb118-22"></a>nodes &lt;-</span>
<span id="cb118-23"><a href="synthetic-controls.html#cb118-23"></a><span class="st">  </span><span class="kw">tibble</span>(</span>
<span id="cb118-24"><a href="synthetic-controls.html#cb118-24"></a>    <span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&quot;U&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;period&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;Y&quot;</span>),</span>
<span id="cb118-25"><a href="synthetic-controls.html#cb118-25"></a>    <span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;U&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;T&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;Y&quot;</span>),</span>
<span id="cb118-26"><a href="synthetic-controls.html#cb118-26"></a>    <span class="dt">annotation =</span> <span class="kw">c</span>(</span>
<span id="cb118-27"><a href="synthetic-controls.html#cb118-27"></a>      <span class="st">&quot;**Unknown heterogeneity**&quot;</span>,</span>
<span id="cb118-28"><a href="synthetic-controls.html#cb118-28"></a>      <span class="st">&quot;**Unit effect**&quot;</span>,</span>
<span id="cb118-29"><a href="synthetic-controls.html#cb118-29"></a>      <span class="st">&quot;**Time period**&quot;</span>,</span>
<span id="cb118-30"><a href="synthetic-controls.html#cb118-30"></a>      <span class="st">&quot;**Treatment assignment**&quot;</span>,</span>
<span id="cb118-31"><a href="synthetic-controls.html#cb118-31"></a>      <span class="st">&quot;**Outcome variable**&quot;</span></span>
<span id="cb118-32"><a href="synthetic-controls.html#cb118-32"></a>    ),</span>
<span id="cb118-33"><a href="synthetic-controls.html#cb118-33"></a>    </span>
<span id="cb118-34"><a href="synthetic-controls.html#cb118-34"></a>    <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>),</span>
<span id="cb118-35"><a href="synthetic-controls.html#cb118-35"></a>    <span class="dt">y =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">3.5</span>, <span class="dv">1</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>), </span>
<span id="cb118-36"><a href="synthetic-controls.html#cb118-36"></a>    <span class="dt">nudge_direction =</span> <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>,<span class="st">&quot;N&quot;</span>),</span>
<span id="cb118-37"><a href="synthetic-controls.html#cb118-37"></a>    <span class="dt">answer_strategy =</span> <span class="st">&quot;uncontrolled&quot;</span>)</span>
<span id="cb118-38"><a href="synthetic-controls.html#cb118-38"></a>    </span>
<span id="cb118-39"><a href="synthetic-controls.html#cb118-39"></a>    </span>
<span id="cb118-40"><a href="synthetic-controls.html#cb118-40"></a></span>
<span id="cb118-41"><a href="synthetic-controls.html#cb118-41"></a>ggdd_df &lt;-<span class="st"> </span><span class="kw">make_dag_df</span>(dag, nodes, design)</span>
<span id="cb118-42"><a href="synthetic-controls.html#cb118-42"></a></span>
<span id="cb118-43"><a href="synthetic-controls.html#cb118-43"></a>base_dag_plot <span class="op">%+%</span><span class="st"> </span>ggdd_df</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-300-1.png" width="100%" /></p>
</div>
<div id="example-15" class="section level3">
<h3><span class="header-section-number">16.7.3</span> Example</h3>
<!-- make sure to rename the section title below -->
<p>Modeled after the example here:</p>
<p><a href="https://www.mitpressjournals.org/doi/abs/10.1162/REST_a_00429?casa_token=o-zWqCima50AAAAA:yiEERZfdhAUoHV0-xBYNjgdljvgfRXrriR8foG7X8nHSUAMFrLcw2vWY8e9pHzmRT24MMAIv9hvKpQ" class="uri">https://www.mitpressjournals.org/doi/abs/10.1162/REST_a_00429?casa_token=o-zWqCima50AAAAA:yiEERZfdhAUoHV0-xBYNjgdljvgfRXrriR8foG7X8nHSUAMFrLcw2vWY8e9pHzmRT24MMAIv9hvKpQ</a></p>
<p>Did the 2007 Legal Arizona Workers Act Reduce the State’s Unauthorized Immigrant Population?
Sarah Bohn, Magnus Lofstrom, and Steven Raphael
The Review of Economics and Statistics 2014 96:2, 258-269
Abstract: We test for an effect of Arizona’s 2007 Legal Arizona Workers Act (LAWA) on the proportion of the state’s population characterized as noncitizen Hispanic. We use the synthetic control method to select a group of states against which Arizona’s population trends can be compared. We document a notable and statistically significant reduction in the proportion of the Hispanic noncitizen population in Arizona. The decline observed matches the timing of LAWA’s implementation, deviates from the time series for the synthetic control group, and stands out relative to the distribution of placebo estimates for other states in the nation.</p>
<p>Outline:
(1) how does synth work?
- declaration: set up states with time trends and levels that are both correlated with a type and following the linear model assumed by SCM
- try three estimators: (1) difference-in-difference; (2) single difference in treated period; and (3) difference in treated period weighted by Synth weights.
- show that synth works under its assumptions; plot of time series of treat and synthetic control; plot of the time series from all units to illustrate which are picked (sorted by weights)
(2) what are synth’s assumptions?
- linear model; treated unit is in convex hull of control units’ pretreatment time series
(3) how to diagnose when you are outside the convex hull
- declaration outside the convex hull and use the Abadie diagnostic demonstrating a poor match. (possibly explore power of this diagnostic)
- show that synth is biased in this setting. augsynth is not.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="synthetic-controls.html#cb119-1"></a><span class="co"># tidy function that takes data and just adds the synthetic control weights to it</span></span>
<span id="cb119-2"><a href="synthetic-controls.html#cb119-2"></a>synth_weights_tidy &lt;-<span class="st"> </span><span class="cf">function</span>(data) {</span>
<span id="cb119-3"><a href="synthetic-controls.html#cb119-3"></a>  dataprep.out &lt;-<span class="st"> </span><span class="kw">dataprep</span>(</span>
<span id="cb119-4"><a href="synthetic-controls.html#cb119-4"></a>    <span class="dt">foo =</span> data,</span>
<span id="cb119-5"><a href="synthetic-controls.html#cb119-5"></a>    <span class="dt">predictors =</span> <span class="st">&quot;prop_non_hispanic_below_hs&quot;</span>,</span>
<span id="cb119-6"><a href="synthetic-controls.html#cb119-6"></a>    <span class="dt">predictors.op =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb119-7"><a href="synthetic-controls.html#cb119-7"></a>    <span class="dt">time.predictors.prior =</span> <span class="dv">1998</span><span class="op">:</span><span class="dv">2006</span>,</span>
<span id="cb119-8"><a href="synthetic-controls.html#cb119-8"></a>    <span class="dt">dependent =</span> <span class="st">&quot;prop_non_hispanic_below_hs&quot;</span>,</span>
<span id="cb119-9"><a href="synthetic-controls.html#cb119-9"></a>    <span class="dt">unit.variable =</span> <span class="st">&quot;state_number&quot;</span>,</span>
<span id="cb119-10"><a href="synthetic-controls.html#cb119-10"></a>    <span class="dt">time.variable =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb119-11"><a href="synthetic-controls.html#cb119-11"></a>    <span class="dt">treatment.identifier =</span> <span class="dv">4</span>,</span>
<span id="cb119-12"><a href="synthetic-controls.html#cb119-12"></a>    <span class="dt">controls.identifier =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">50</span>), <span class="co"># states without Arizona</span></span>
<span id="cb119-13"><a href="synthetic-controls.html#cb119-13"></a>    <span class="dt">time.optimize.ssr =</span> <span class="dv">1998</span><span class="op">:</span><span class="dv">2006</span>,</span>
<span id="cb119-14"><a href="synthetic-controls.html#cb119-14"></a>    <span class="dt">time.plot =</span> <span class="dv">1998</span><span class="op">:</span><span class="dv">2009</span>)</span>
<span id="cb119-15"><a href="synthetic-controls.html#cb119-15"></a>  <span class="kw">capture.output</span>(fit &lt;-<span class="st"> </span><span class="kw">synth</span>(<span class="dt">data.prep.obj =</span> dataprep.out))</span>
<span id="cb119-16"><a href="synthetic-controls.html#cb119-16"></a>  tab &lt;-<span class="st"> </span><span class="kw">synth.tab</span>(<span class="dt">dataprep.res =</span> dataprep.out, <span class="dt">synth.res =</span> fit) </span>
<span id="cb119-17"><a href="synthetic-controls.html#cb119-17"></a>  </span>
<span id="cb119-18"><a href="synthetic-controls.html#cb119-18"></a>  data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb119-19"><a href="synthetic-controls.html#cb119-19"></a><span class="st">    </span><span class="kw">left_join</span>(tab<span class="op">$</span>tab.w <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">synth_weights =</span> w.weights) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(synth_weights, unit.numbers), <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;state_number&quot;</span> =<span class="st"> &quot;unit.numbers&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb119-20"><a href="synthetic-controls.html#cb119-20"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">synth_weights =</span> <span class="kw">replace</span>(synth_weights, state_number <span class="op">==</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">1</span>))</span>
<span id="cb119-21"><a href="synthetic-controls.html#cb119-21"></a>}</span>
<span id="cb119-22"><a href="synthetic-controls.html#cb119-22"></a></span>
<span id="cb119-23"><a href="synthetic-controls.html#cb119-23"></a>augsynth_tidy &lt;-<span class="st"> </span><span class="cf">function</span>(data) {</span>
<span id="cb119-24"><a href="synthetic-controls.html#cb119-24"></a>  fit &lt;-<span class="st"> </span><span class="kw">augsynth</span>(prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span>legal_worker_act, state, year, <span class="dt">t_int =</span> <span class="dv">2007</span>, <span class="dt">data =</span> data)</span>
<span id="cb119-25"><a href="synthetic-controls.html#cb119-25"></a>  res &lt;-<span class="st"> </span><span class="kw">summary</span>(fit)<span class="op">$</span>att <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Time <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Estimate, Std.Error)</span>
<span id="cb119-26"><a href="synthetic-controls.html#cb119-26"></a>  <span class="kw">names</span>(res) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;estimate&quot;</span>, <span class="st">&quot;std.error&quot;</span>)</span>
<span id="cb119-27"><a href="synthetic-controls.html#cb119-27"></a>  res<span class="op">$</span>p.value &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="kw">pt</span>(<span class="op">-</span><span class="kw">abs</span>(res<span class="op">$</span>estimate<span class="op">/</span>res<span class="op">$</span>std.error), <span class="dt">df =</span> <span class="kw">nrow</span>(data) <span class="op">-</span><span class="st"> </span><span class="dv">15</span>)</span>
<span id="cb119-28"><a href="synthetic-controls.html#cb119-28"></a>  res<span class="op">$</span>conf.low &lt;-<span class="st"> </span>res<span class="op">$</span>estimate <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>res<span class="op">$</span>std.error</span>
<span id="cb119-29"><a href="synthetic-controls.html#cb119-29"></a>  res<span class="op">$</span>conf.high &lt;-<span class="st"> </span>res<span class="op">$</span>estimate <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>res<span class="op">$</span>std.error</span>
<span id="cb119-30"><a href="synthetic-controls.html#cb119-30"></a>  res</span>
<span id="cb119-31"><a href="synthetic-controls.html#cb119-31"></a>}</span>
<span id="cb119-32"><a href="synthetic-controls.html#cb119-32"></a></span>
<span id="cb119-33"><a href="synthetic-controls.html#cb119-33"></a><span class="co"># note need to clean up the range of the data, currently over 1</span></span>
<span id="cb119-34"><a href="synthetic-controls.html#cb119-34"></a>design &lt;-</span>
<span id="cb119-35"><a href="synthetic-controls.html#cb119-35"></a><span class="st">  </span><span class="kw">declare_population</span>(</span>
<span id="cb119-36"><a href="synthetic-controls.html#cb119-36"></a>    <span class="dt">states =</span> <span class="kw">add_level</span>(</span>
<span id="cb119-37"><a href="synthetic-controls.html#cb119-37"></a>      <span class="dt">N =</span> <span class="dv">50</span>, </span>
<span id="cb119-38"><a href="synthetic-controls.html#cb119-38"></a>      <span class="dt">state =</span> state.abb,</span>
<span id="cb119-39"><a href="synthetic-controls.html#cb119-39"></a>      <span class="dt">state_number =</span> <span class="kw">as.numeric</span>(<span class="kw">as.factor</span>(state)),</span>
<span id="cb119-40"><a href="synthetic-controls.html#cb119-40"></a>      <span class="dt">state_shock =</span> <span class="kw">runif</span>(N, <span class="fl">-.15</span>, <span class="fl">.15</span>),</span>
<span id="cb119-41"><a href="synthetic-controls.html#cb119-41"></a>      <span class="dt">border_state =</span> state <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;AZ&quot;</span>, <span class="st">&quot;CA&quot;</span>, <span class="st">&quot;NM&quot;</span>, <span class="st">&quot;TX&quot;</span>),</span>
<span id="cb119-42"><a href="synthetic-controls.html#cb119-42"></a>      <span class="dt">state_shock =</span> <span class="kw">ifelse</span>(border_state, <span class="fl">.2</span>, state_shock)</span>
<span id="cb119-43"><a href="synthetic-controls.html#cb119-43"></a>    ),</span>
<span id="cb119-44"><a href="synthetic-controls.html#cb119-44"></a>    <span class="dt">years =</span> <span class="kw">add_level</span>(</span>
<span id="cb119-45"><a href="synthetic-controls.html#cb119-45"></a>      <span class="dt">N =</span> <span class="dv">12</span>, <span class="dt">nest =</span> <span class="ot">FALSE</span>,</span>
<span id="cb119-46"><a href="synthetic-controls.html#cb119-46"></a>      <span class="dt">year =</span> <span class="dv">1998</span><span class="op">:</span><span class="dv">2009</span>,</span>
<span id="cb119-47"><a href="synthetic-controls.html#cb119-47"></a>      <span class="dt">post_treatment_period =</span> year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2007</span>,</span>
<span id="cb119-48"><a href="synthetic-controls.html#cb119-48"></a>      <span class="dt">year_shock =</span> <span class="kw">runif</span>(N, <span class="fl">-.025</span>, <span class="fl">.025</span>), </span>
<span id="cb119-49"><a href="synthetic-controls.html#cb119-49"></a>      <span class="dt">year_trend =</span> year <span class="op">-</span><span class="st"> </span><span class="dv">1998</span></span>
<span id="cb119-50"><a href="synthetic-controls.html#cb119-50"></a>    ),</span>
<span id="cb119-51"><a href="synthetic-controls.html#cb119-51"></a>    <span class="dt">obs =</span> <span class="kw">cross_levels</span>(</span>
<span id="cb119-52"><a href="synthetic-controls.html#cb119-52"></a>      <span class="dt">by =</span> <span class="kw">join</span>(states, years),</span>
<span id="cb119-53"><a href="synthetic-controls.html#cb119-53"></a>      <span class="co"># treatment indicator:</span></span>
<span id="cb119-54"><a href="synthetic-controls.html#cb119-54"></a>      <span class="dt">legal_worker_act =</span> <span class="kw">if_else</span>(post_treatment_period <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span>state <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb119-55"><a href="synthetic-controls.html#cb119-55"></a>      <span class="dt">state_year_shock =</span> <span class="kw">runif</span>(N, <span class="fl">-.025</span>, <span class="fl">.025</span>),</span>
<span id="cb119-56"><a href="synthetic-controls.html#cb119-56"></a>      <span class="dt">prop_non_hispanic_below_hs_baseline =</span> </span>
<span id="cb119-57"><a href="synthetic-controls.html#cb119-57"></a>        <span class="fl">0.4</span> <span class="op">+</span><span class="st"> </span>state_shock <span class="op">+</span><span class="st"> </span>year_shock <span class="op">+</span><span class="st"> </span>(.<span class="dv">01</span> <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">*</span><span class="st"> </span>border_state) <span class="op">*</span><span class="st"> </span>year_trend <span class="op">+</span><span class="st"> </span>state_year_shock</span>
<span id="cb119-58"><a href="synthetic-controls.html#cb119-58"></a>    )</span>
<span id="cb119-59"><a href="synthetic-controls.html#cb119-59"></a>  ) <span class="op">+</span></span>
<span id="cb119-60"><a href="synthetic-controls.html#cb119-60"></a><span class="st">  </span><span class="kw">declare_potential_outcomes</span>(</span>
<span id="cb119-61"><a href="synthetic-controls.html#cb119-61"></a>    prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span>prop_non_hispanic_below_hs_baseline <span class="op">+</span><span class="st"> </span><span class="fl">0.25</span> <span class="op">*</span><span class="st"> </span>legal_worker_act, </span>
<span id="cb119-62"><a href="synthetic-controls.html#cb119-62"></a>    <span class="dt">assignment_variable =</span> legal_worker_act) <span class="op">+</span></span>
<span id="cb119-63"><a href="synthetic-controls.html#cb119-63"></a><span class="st">  </span><span class="kw">declare_estimand</span>(</span>
<span id="cb119-64"><a href="synthetic-controls.html#cb119-64"></a>    <span class="dt">ATE_AZ =</span> <span class="kw">mean</span>(prop_non_hispanic_below_hs_legal_worker_act_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span></span>
<span id="cb119-65"><a href="synthetic-controls.html#cb119-65"></a><span class="st">                    </span>prop_non_hispanic_below_hs_legal_worker_act_<span class="dv">0</span>), </span>
<span id="cb119-66"><a href="synthetic-controls.html#cb119-66"></a>    <span class="dt">subset =</span> legal_worker_act <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb119-67"><a href="synthetic-controls.html#cb119-67"></a><span class="st">  </span><span class="kw">declare_reveal</span>(prop_non_hispanic_below_hs, legal_worker_act) <span class="op">+</span></span>
<span id="cb119-68"><a href="synthetic-controls.html#cb119-68"></a><span class="st">  </span><span class="kw">declare_step</span>(<span class="dt">handler =</span> synth_weights_tidy) <span class="op">+</span></span>
<span id="cb119-69"><a href="synthetic-controls.html#cb119-69"></a><span class="st">  </span><span class="kw">declare_estimator</span>(</span>
<span id="cb119-70"><a href="synthetic-controls.html#cb119-70"></a>    prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span>legal_worker_act, </span>
<span id="cb119-71"><a href="synthetic-controls.html#cb119-71"></a>    <span class="dt">subset =</span> year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2007</span>, <span class="dt">weights =</span> synth_weights, <span class="dt">model =</span> lm_robust, <span class="dt">label =</span> <span class="st">&quot;synth&quot;</span>) <span class="op">+</span></span>
<span id="cb119-72"><a href="synthetic-controls.html#cb119-72"></a><span class="st">  </span><span class="kw">declare_estimator</span>(</span>
<span id="cb119-73"><a href="synthetic-controls.html#cb119-73"></a>    prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span>legal_worker_act, <span class="dt">subset =</span> year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2007</span>, </span>
<span id="cb119-74"><a href="synthetic-controls.html#cb119-74"></a>    <span class="dt">model =</span> lm_robust, <span class="dt">label =</span> <span class="st">&quot;unweighted&quot;</span>) <span class="op">+</span></span>
<span id="cb119-75"><a href="synthetic-controls.html#cb119-75"></a><span class="st">  </span><span class="kw">declare_estimator</span>(</span>
<span id="cb119-76"><a href="synthetic-controls.html#cb119-76"></a>    prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span><span class="kw">I</span>(state <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>) <span class="op">+</span><span class="st"> </span>post_treatment_period <span class="op">+</span><span class="st"> </span>legal_worker_act, <span class="dt">term =</span> <span class="st">&quot;legal_worker_act&quot;</span>, </span>
<span id="cb119-77"><a href="synthetic-controls.html#cb119-77"></a>    <span class="dt">model =</span> lm_robust, <span class="dt">label =</span> <span class="st">&quot;unweighted_did&quot;</span>) <span class="op">+</span></span>
<span id="cb119-78"><a href="synthetic-controls.html#cb119-78"></a><span class="st">  </span><span class="kw">declare_estimator</span>(<span class="dt">handler =</span> <span class="kw">tidy_estimator</span>(augsynth_tidy), <span class="dt">label =</span> <span class="st">&quot;augsynth&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="synthetic-controls.html#cb120-1"></a>state_data &lt;-<span class="st"> </span><span class="kw">draw_data</span>(design)</span>
<span id="cb120-2"><a href="synthetic-controls.html#cb120-2"></a></span>
<span id="cb120-3"><a href="synthetic-controls.html#cb120-3"></a>state_data <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(state, synth_weights) <span class="op">%&gt;%</span><span class="st"> </span>distinct <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="op">-</span>synth_weights) <span class="op">%&gt;%</span><span class="st"> </span>head</span></code></pre></div>
<pre><code>##   state synth_weights
## 1    AZ         1.000
## 2    NM         0.990
## 3    TX         0.007
## 4    CA         0.001
## 5    AL         0.000
## 6    AK         0.000</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="synthetic-controls.html#cb122-1"></a>state_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb122-2"><a href="synthetic-controls.html#cb122-2"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb122-3"><a href="synthetic-controls.html#cb122-3"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(year, prop_non_hispanic_below_hs)) <span class="op">+</span></span>
<span id="cb122-4"><a href="synthetic-controls.html#cb122-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>state)</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-303-1.png" width="100%" /></p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="synthetic-controls.html#cb123-1"></a>state_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb123-2"><a href="synthetic-controls.html#cb123-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">treatment_state =</span> <span class="kw">factor</span>(state <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Synthethic Control&quot;</span>, <span class="st">&quot;Arizona&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb123-3"><a href="synthetic-controls.html#cb123-3"></a><span class="st">  </span><span class="kw">group_by</span>(treatment_state, year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb123-4"><a href="synthetic-controls.html#cb123-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">prop_non_hispanic_below_hs =</span> <span class="kw">weighted.mean</span>(prop_non_hispanic_below_hs, <span class="dt">w =</span> synth_weights)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb123-5"><a href="synthetic-controls.html#cb123-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> prop_non_hispanic_below_hs, <span class="dt">color =</span> treatment_state)) <span class="op">+</span></span>
<span id="cb123-6"><a href="synthetic-controls.html#cb123-6"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb123-7"><a href="synthetic-controls.html#cb123-7"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">2007</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb123-8"><a href="synthetic-controls.html#cb123-8"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> scales<span class="op">::</span><span class="kw">pretty_breaks</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb123-9"><a href="synthetic-controls.html#cb123-9"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="fl">2006.7</span>, <span class="dt">y =</span> <span class="fl">1.7</span>, <span class="dt">label =</span> <span class="st">&quot;Law Introduced in 2007&quot;</span>, <span class="dt">hjust =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">family =</span> <span class="st">&quot;Palatino&quot;</span>) <span class="op">+</span></span>
<span id="cb123-10"><a href="synthetic-controls.html#cb123-10"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb123-11"><a href="synthetic-controls.html#cb123-11"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Proportion Non-Hispanic Below H.S. Education&quot;</span>) <span class="op">+</span></span>
<span id="cb123-12"><a href="synthetic-controls.html#cb123-12"></a><span class="st">  </span><span class="kw">dd_theme</span>()</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-304-1.png" width="100%" /></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="synthetic-controls.html#cb124-1"></a>simulations &lt;-<span class="st"> </span><span class="kw">simulate_design</span>(design, <span class="dt">sims =</span> sims)</span></code></pre></div>
<p>Now all that simulating, saving, and loading is done, and we can use the simulations for whatever you want.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="synthetic-controls.html#cb125-1"></a>synth_diagnosands &lt;-<span class="st"> </span><span class="kw">declare_diagnosands</span>(<span class="dt">select =</span> <span class="kw">c</span>(<span class="st">&quot;bias&quot;</span>, <span class="st">&quot;rmse&quot;</span>, <span class="st">&quot;coverage&quot;</span>))</span>
<span id="cb125-2"><a href="synthetic-controls.html#cb125-2"></a></span>
<span id="cb125-3"><a href="synthetic-controls.html#cb125-3"></a>diagnosis &lt;-<span class="st"> </span><span class="kw">diagnose_design</span>(simulations, <span class="dt">diagnosands =</span> synth_diagnosands, <span class="dt">bootstrap_sims =</span> b_sims)</span>
<span id="cb125-4"><a href="synthetic-controls.html#cb125-4"></a></span>
<span id="cb125-5"><a href="synthetic-controls.html#cb125-5"></a><span class="kw">kable</span>(<span class="kw">reshape_diagnosis</span>(diagnosis))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Design Label
</th>
<th style="text-align:left;">
Estimand Label
</th>
<th style="text-align:left;">
Estimator Label
</th>
<th style="text-align:left;">
Term
</th>
<th style="text-align:left;">
N Sims
</th>
<th style="text-align:left;">
Bias
</th>
<th style="text-align:left;">
RMSE
</th>
<th style="text-align:left;">
Coverage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
design
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
augsynth
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:left;">
0.02
</td>
<td style="text-align:left;">
0.66
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.01)
</td>
</tr>
<tr>
<td style="text-align:left;">
design
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
synth
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.01
</td>
<td style="text-align:left;">
0.02
</td>
<td style="text-align:left;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
<tr>
<td style="text-align:left;">
design
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
unweighted
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.66
</td>
<td style="text-align:left;">
0.66
</td>
<td style="text-align:left;">
0.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
<tr>
<td style="text-align:left;">
design
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
unweighted_did
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.28
</td>
<td style="text-align:left;">
0.28
</td>
<td style="text-align:left;">
0.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
</tbody>
</table>
<ul>
<li>we see that Synth outperforms either method</li>
</ul>
</div>
<div id="when-there-are-not-good-controls-standard-synth-will-get-the-wrong-answer" class="section level3">
<h3><span class="header-section-number">16.7.4</span> When there are not good controls, standard synth will get the wrong answer</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="synthetic-controls.html#cb126-1"></a><span class="co"># declaration outside the convex hull</span></span>
<span id="cb126-2"><a href="synthetic-controls.html#cb126-2"></a>design_outside_hull &lt;-<span class="st"> </span><span class="kw">replace_step</span>(</span>
<span id="cb126-3"><a href="synthetic-controls.html#cb126-3"></a>  design, </span>
<span id="cb126-4"><a href="synthetic-controls.html#cb126-4"></a>  <span class="dt">step =</span> <span class="dv">2</span>, </span>
<span id="cb126-5"><a href="synthetic-controls.html#cb126-5"></a>  <span class="dt">new_step =</span> <span class="kw">declare_potential_outcomes</span>(</span>
<span id="cb126-6"><a href="synthetic-controls.html#cb126-6"></a>    prop_non_hispanic_below_hs <span class="op">~</span><span class="st"> </span>prop_non_hispanic_below_hs_baseline <span class="op">+</span><span class="st"> </span><span class="fl">0.25</span> <span class="op">*</span><span class="st"> </span>legal_worker_act <span class="op">+</span><span class="st"> </span><span class="fl">0.2</span> <span class="op">*</span><span class="st"> </span>(state <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>), </span>
<span id="cb126-7"><a href="synthetic-controls.html#cb126-7"></a>    <span class="dt">assignment_variable =</span> legal_worker_act))</span>
<span id="cb126-8"><a href="synthetic-controls.html#cb126-8"></a></span>
<span id="cb126-9"><a href="synthetic-controls.html#cb126-9"></a>state_data_outside_hull &lt;-<span class="st"> </span><span class="kw">draw_data</span>(design_outside_hull)</span></code></pre></div>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="synthetic-controls.html#cb127-1"></a>simulations_outside_hull &lt;-<span class="st"> </span><span class="kw">simulate_design</span>(design_outside_hull, <span class="dt">sims =</span> sims)</span></code></pre></div>
<p>Now all that simulating, saving, and loading is done, and we can use the simulations for whatever you want.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="synthetic-controls.html#cb128-1"></a>diagnosis_outside_hull &lt;-<span class="st"> </span><span class="kw">diagnose_design</span>(simulations_outside_hull, <span class="dt">diagnosands =</span> synth_diagnosands, <span class="dt">bootstrap_sims =</span> b_sims)</span>
<span id="cb128-2"><a href="synthetic-controls.html#cb128-2"></a></span>
<span id="cb128-3"><a href="synthetic-controls.html#cb128-3"></a><span class="kw">kable</span>(<span class="kw">reshape_diagnosis</span>(diagnosis_outside_hull))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Design Label
</th>
<th style="text-align:left;">
Estimand Label
</th>
<th style="text-align:left;">
Estimator Label
</th>
<th style="text-align:left;">
Term
</th>
<th style="text-align:left;">
N Sims
</th>
<th style="text-align:left;">
Bias
</th>
<th style="text-align:left;">
RMSE
</th>
<th style="text-align:left;">
Coverage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
design_outside_hull
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
augsynth
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
-0.01
</td>
<td style="text-align:left;">
0.03
</td>
<td style="text-align:left;">
0.75
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.01)
</td>
</tr>
<tr>
<td style="text-align:left;">
design_outside_hull
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
synth
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
<tr>
<td style="text-align:left;">
design_outside_hull
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
unweighted
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.86
</td>
<td style="text-align:left;">
0.86
</td>
<td style="text-align:left;">
0.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
<tr>
<td style="text-align:left;">
design_outside_hull
</td>
<td style="text-align:left;">
ATE_AZ
</td>
<td style="text-align:left;">
unweighted_did
</td>
<td style="text-align:left;">
legal_worker_act
</td>
<td style="text-align:left;">
1000
</td>
<td style="text-align:left;">
0.28
</td>
<td style="text-align:left;">
0.28
</td>
<td style="text-align:left;">
0.00
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
<td style="text-align:left;">
(0.00)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="synthetic-controls.html#cb129-1"></a><span class="co"># plot the synthetic control constructed in this way (it usually picks just texas and is highly biased)</span></span>
<span id="cb129-2"><a href="synthetic-controls.html#cb129-2"></a>state_data_outside_hull <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-3"><a href="synthetic-controls.html#cb129-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">treatment_state =</span> <span class="kw">factor</span>(state <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Synthethic Control&quot;</span>, <span class="st">&quot;Arizona&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-4"><a href="synthetic-controls.html#cb129-4"></a><span class="st">  </span><span class="kw">group_by</span>(treatment_state, year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-5"><a href="synthetic-controls.html#cb129-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">prop_non_hispanic_below_hs =</span> <span class="kw">weighted.mean</span>(prop_non_hispanic_below_hs, <span class="dt">w =</span> synth_weights)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb129-6"><a href="synthetic-controls.html#cb129-6"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> prop_non_hispanic_below_hs, <span class="dt">color =</span> treatment_state)) <span class="op">+</span></span>
<span id="cb129-7"><a href="synthetic-controls.html#cb129-7"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb129-8"><a href="synthetic-controls.html#cb129-8"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">2007</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb129-9"><a href="synthetic-controls.html#cb129-9"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> scales<span class="op">::</span><span class="kw">pretty_breaks</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb129-10"><a href="synthetic-controls.html#cb129-10"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="fl">2006.7</span>, <span class="dt">y =</span> <span class="fl">1.7</span>, <span class="dt">label =</span> <span class="st">&quot;Law Introduced in 2007&quot;</span>, <span class="dt">hjust =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">family =</span> <span class="st">&quot;Palatino&quot;</span>) <span class="op">+</span></span>
<span id="cb129-11"><a href="synthetic-controls.html#cb129-11"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb129-12"><a href="synthetic-controls.html#cb129-12"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Proportion Non-Hispanic Below H.S. Education&quot;</span>) <span class="op">+</span></span>
<span id="cb129-13"><a href="synthetic-controls.html#cb129-13"></a><span class="st">  </span><span class="kw">dd_theme</span>()</span></code></pre></div>
<p><img src="book_files/figure-html/unnamed-chunk-312-1.png" width="100%" /></p>
</div>
<div id="references-1" class="section level3">
<h3><span class="header-section-number">16.7.5</span> References</h3>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="bayesianprocesstracing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="experimental-designs-for-causal-inference.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false,
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
