<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.2 Declaring potential outcomes | Research Design: Declare, Diagnose, Redesign</title>
  <meta name="description" content="describe the book" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="5.2 Declaring potential outcomes | Research Design: Declare, Diagnose, Redesign" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="describe the book" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.2 Declaring potential outcomes | Research Design: Declare, Diagnose, Redesign" />
  
  <meta name="twitter:description" content="describe the book" />
  

<meta name="author" content="Graeme Blair, Jasper Cooper, Alexander Coppock, and Macartan Humphreys" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="declaring-exogenous-and-endogenous-variables-in-the-population.html"/>
<link rel="next" href="declaring-populations.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="https://hypothes.is/embed.js" async></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="headers/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Research Design</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="mida.html"><a href="mida.html"><i class="fa fa-check"></i><b>2</b> MIDA</a><ul>
<li class="chapter" data-level="2.1" data-path="model-inquiry-data-strategy-model-strategy.html"><a href="model-inquiry-data-strategy-model-strategy.html"><i class="fa fa-check"></i><b>2.1</b> Model-Inquiry-Data Strategy-Model Strategy</a></li>
<li class="chapter" data-level="2.2" data-path="diagnosands-and-diagnosis.html"><a href="diagnosands-and-diagnosis.html"><i class="fa fa-check"></i><b>2.2</b> Diagnosands and diagnosis</a></li>
<li class="chapter" data-level="2.3" data-path="what-is-a-complete-design-declaration.html"><a href="what-is-a-complete-design-declaration.html"><i class="fa fa-check"></i><b>2.3</b> What is a <em>Complete</em> Design Declaration?</a></li>
<li class="chapter" data-level="2.4" data-path="declaration-diagnosis-redesign.html"><a href="declaration-diagnosis-redesign.html"><i class="fa fa-check"></i><b>2.4</b> Declaration-Diagnosis-Redesign</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="software-primer.html"><a href="software-primer.html"><i class="fa fa-check"></i><b>3</b> Software primer</a><ul>
<li class="chapter" data-level="3.1" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>3.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2" data-path="where-we-are-going.html"><a href="where-we-are-going.html"><i class="fa fa-check"></i><b>3.2</b> Where we are going</a><ul>
<li class="chapter" data-level="3.2.1" data-path="where-we-are-going.html"><a href="where-we-are-going.html#declaring-a-design"><i class="fa fa-check"></i><b>3.2.1</b> Declaring a design</a></li>
<li class="chapter" data-level="3.2.2" data-path="where-we-are-going.html"><a href="where-we-are-going.html#diagnosis"><i class="fa fa-check"></i><b>3.2.2</b> Diagnosis</a></li>
<li class="chapter" data-level="3.2.3" data-path="where-we-are-going.html"><a href="where-we-are-going.html#redesign"><i class="fa fa-check"></i><b>3.2.3</b> Redesign</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html"><i class="fa fa-check"></i><b>3.3</b> Building a step of a research design</a><ul>
<li class="chapter" data-level="3.3.1" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#using-dplyr"><i class="fa fa-check"></i><b>3.3.1</b> Using dplyr</a></li>
<li class="chapter" data-level="3.3.2" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#as-a-function"><i class="fa fa-check"></i><b>3.3.2</b> As a function</a></li>
<li class="chapter" data-level="3.3.3" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#in-declaredesign"><i class="fa fa-check"></i><b>3.3.3</b> In DeclareDesign</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="research-design-steps.html"><a href="research-design-steps.html"><i class="fa fa-check"></i><b>3.4</b> Research design steps</a><ul>
<li class="chapter" data-level="3.4.1" data-path="research-design-steps.html"><a href="research-design-steps.html#model"><i class="fa fa-check"></i><b>3.4.1</b> Model</a></li>
<li class="chapter" data-level="3.4.2" data-path="research-design-steps.html"><a href="research-design-steps.html#inquiry"><i class="fa fa-check"></i><b>3.4.2</b> Inquiry</a></li>
<li class="chapter" data-level="3.4.3" data-path="research-design-steps.html"><a href="research-design-steps.html#data-strategy"><i class="fa fa-check"></i><b>3.4.3</b> Data strategy</a></li>
<li class="chapter" data-level="3.4.4" data-path="research-design-steps.html"><a href="research-design-steps.html#answer-strategy"><i class="fa fa-check"></i><b>3.4.4</b> Answer strategy</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html"><i class="fa fa-check"></i><b>3.5</b> Building a design from design steps</a><ul>
<li class="chapter" data-level="3.5.1" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html#order-matters"><i class="fa fa-check"></i><b>3.5.1</b> Order matters</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html"><i class="fa fa-check"></i><b>3.6</b> Simulating a research design</a><ul>
<li class="chapter" data-level="3.6.1" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html#in-dplyr"><i class="fa fa-check"></i><b>3.6.1</b> In <code>dplyr</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html#in-declaredesign-1"><i class="fa fa-check"></i><b>3.6.2</b> In <code>DeclareDesign</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="diagnosing-a-research-design.html"><a href="diagnosing-a-research-design.html"><i class="fa fa-check"></i><b>3.7</b> Diagnosing a research design</a></li>
<li class="chapter" data-level="3.8" data-path="comparing-designs.html"><a href="comparing-designs.html"><i class="fa fa-check"></i><b>3.8</b> Comparing designs</a><ul>
<li class="chapter" data-level="3.8.1" data-path="comparing-designs.html"><a href="comparing-designs.html#comparing-many-variants-of-a-design"><i class="fa fa-check"></i><b>3.8.1</b> Comparing many variants of a design</a></li>
<li class="chapter" data-level="3.8.2" data-path="comparing-designs.html"><a href="comparing-designs.html#library-of-designs"><i class="fa fa-check"></i><b>3.8.2</b> Library of designs</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Declaration and Diagnosis in Practice</b></span></li>
<li class="chapter" data-level="4" data-path="research-questions.html"><a href="research-questions.html"><i class="fa fa-check"></i><b>4</b> Research questions</a></li>
<li class="chapter" data-level="5" data-path="specifying-the-model.html"><a href="specifying-the-model.html"><i class="fa fa-check"></i><b>5</b> Specifying the model</a><ul>
<li class="chapter" data-level="5.1" data-path="declaring-exogenous-and-endogenous-variables-in-the-population.html"><a href="declaring-exogenous-and-endogenous-variables-in-the-population.html"><i class="fa fa-check"></i><b>5.1</b> Declaring exogenous and endogenous variables in the population</a></li>
<li class="chapter" data-level="5.2" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html"><i class="fa fa-check"></i><b>5.2</b> Declaring potential outcomes</a><ul>
<li class="chapter" data-level="5.2.1" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#potential-outcomes-can-include-variables-that-are-not-yet-defined"><i class="fa fa-check"></i><b>5.2.1</b> Potential outcomes can include variables that are not yet defined</a></li>
<li class="chapter" data-level="5.2.2" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#when-you-do-and-do-not-need-to-define-potential-outcomes"><i class="fa fa-check"></i><b>5.2.2</b> When you do and do not need to define potential outcomes</a></li>
<li class="chapter" data-level="5.2.3" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#manipulation-creates-potential-outcomes"><i class="fa fa-check"></i><b>5.2.3</b> Manipulation creates potential outcomes</a></li>
<li class="chapter" data-level="5.2.4" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#interference-creates-potential-outcomes"><i class="fa fa-check"></i><b>5.2.4</b> Interference creates potential outcomes</a></li>
<li class="chapter" data-level="5.2.5" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#what-to-do-with-potential-outcomes-whose-parents-are-continuous"><i class="fa fa-check"></i><b>5.2.5</b> What to do with potential outcomes whose parents are continuous</a></li>
<li class="chapter" data-level="5.2.6" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#principal-strata-can-be-defined-in-terms-of-potential-outcomes"><i class="fa fa-check"></i><b>5.2.6</b> Principal strata can be defined in terms of potential outcomes</a></li>
<li class="chapter" data-level="5.2.7" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#develop-a-null-model"><i class="fa fa-check"></i><b>5.2.7</b> Develop a null model</a></li>
<li class="chapter" data-level="5.2.8" data-path="declaring-potential-outcomes.html"><a href="declaring-potential-outcomes.html#consider-heterogeneity"><i class="fa fa-check"></i><b>5.2.8</b> Consider heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="declaring-populations.html"><a href="declaring-populations.html"><i class="fa fa-check"></i><b>5.3</b> Declaring populations</a><ul>
<li class="chapter" data-level="5.3.1" data-path="declaring-populations.html"><a href="declaring-populations.html#use-data-if-you-have-it"><i class="fa fa-check"></i><b>5.3.1</b> Use data, if you have it</a></li>
<li class="chapter" data-level="5.3.2" data-path="declaring-populations.html"><a href="declaring-populations.html#incorporate-hierarchy-into-your-model"><i class="fa fa-check"></i><b>5.3.2</b> Incorporate hierarchy into your model</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="without-a-model-you-can-get-the-answer-pretty-wrong.html"><a href="without-a-model-you-can-get-the-answer-pretty-wrong.html"><i class="fa fa-check"></i><b>5.4</b> Without a model you can get the answer pretty wrong</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="defining-the-inquiry.html"><a href="defining-the-inquiry.html"><i class="fa fa-check"></i><b>6</b> Defining the Inquiry</a><ul>
<li class="chapter" data-level="6.1" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html"><i class="fa fa-check"></i><b>6.1</b> Classes of estimands</a><ul>
<li class="chapter" data-level="6.1.1" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#descriptive-estimands"><i class="fa fa-check"></i><b>6.1.1</b> Descriptive estimands</a></li>
<li class="chapter" data-level="6.1.2" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#simple-causal-estimands"><i class="fa fa-check"></i><b>6.1.2</b> Simple causal estimands</a></li>
<li class="chapter" data-level="6.1.3" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#local-estimands-estiamnds-over-latent-classes-principal-strata"><i class="fa fa-check"></i><b>6.1.3</b> Local estimands / EStiamnds over latent classes, principal strata</a></li>
<li class="chapter" data-level="6.1.4" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#study-dependent-estimands"><i class="fa fa-check"></i><b>6.1.4</b> Study dependent estimands</a></li>
<li class="chapter" data-level="6.1.5" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#complex-counterfactuals"><i class="fa fa-check"></i><b>6.1.5</b> Complex counterfactuals</a></li>
<li class="chapter" data-level="6.1.6" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#parametric-estimands"><i class="fa fa-check"></i><b>6.1.6</b> Parametric estimands</a></li>
<li class="chapter" data-level="6.1.7" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#vector-valued-inquiries-set-of-predictions-for-n-units"><i class="fa fa-check"></i><b>6.1.7</b> Vector-valued inquiries (set of predictions for N units),</a></li>
<li class="chapter" data-level="6.1.8" data-path="classes-of-estimands.html"><a href="classes-of-estimands.html#models-as-estimands"><i class="fa fa-check"></i><b>6.1.8</b> Models as estimands</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="selecting-estimands.html"><a href="selecting-estimands.html"><i class="fa fa-check"></i><b>6.2</b> Selecting estimands</a><ul>
<li class="chapter" data-level="6.2.1" data-path="selecting-estimands.html"><a href="selecting-estimands.html#you-are-responsible-for-your-estimand"><i class="fa fa-check"></i><b>6.2.1</b> You are responsible for your estimand</a></li>
<li class="chapter" data-level="6.2.2" data-path="selecting-estimands.html"><a href="selecting-estimands.html#estimands-to-purpose.-choice-of-inquiry-is-not-valueless"><i class="fa fa-check"></i><b>6.2.2</b> Estimands to purpose. Choice of inquiry is not valueless</a></li>
<li class="chapter" data-level="6.2.3" data-path="selecting-estimands.html"><a href="selecting-estimands.html#estimand-scopewhat-is-the-set-of-units-which-you-want-to-learn-the-answer-about-know-what-ate-averages-over"><i class="fa fa-check"></i><b>6.2.3</b> Estimand scope:What is the set of units which you want to learn the answer about? Know what ATE averages over</a></li>
<li class="chapter" data-level="6.2.4" data-path="selecting-estimands.html"><a href="selecting-estimands.html#unknown-estimands-inquiries-for-discovery"><i class="fa fa-check"></i><b>6.2.4</b> Unknown estimands: Inquiries for discovery</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="crafting-a-data-strategy.html"><a href="crafting-a-data-strategy.html"><i class="fa fa-check"></i><b>7</b> Crafting a data strategy</a><ul>
<li class="chapter" data-level="7.1" data-path="choosing-a-sampling-procedure.html"><a href="choosing-a-sampling-procedure.html"><i class="fa fa-check"></i><b>7.1</b> Choosing a sampling procedure</a></li>
<li class="chapter" data-level="7.2" data-path="choosing-an-assignment-procedure.html"><a href="choosing-an-assignment-procedure.html"><i class="fa fa-check"></i><b>7.2</b> Choosing an assignment procedure</a></li>
<li class="chapter" data-level="7.3" data-path="choosing-a-measurement-procedure.html"><a href="choosing-a-measurement-procedure.html"><i class="fa fa-check"></i><b>7.3</b> Choosing a measurement procedure</a></li>
<li class="chapter" data-level="7.4" data-path="section.html"><a href="section.html"><i class="fa fa-check"></i><b>7.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choosing-an-answer-strategy.html"><a href="choosing-an-answer-strategy.html"><i class="fa fa-check"></i><b>8</b> Choosing an answer strategy</a><ul>
<li class="chapter" data-level="8.1" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html"><i class="fa fa-check"></i><b>8.1</b> What belongs in an answer strategy</a><ul>
<li class="chapter" data-level="8.1.1" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#estimate-estimator-pairs"><i class="fa fa-check"></i><b>8.1.1</b> estimate-estimator pairs</a></li>
<li class="chapter" data-level="8.1.2" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#measures-of-uncertainty"><i class="fa fa-check"></i><b>8.1.2</b> measures of uncertainty</a></li>
<li class="chapter" data-level="8.1.3" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#procedures"><i class="fa fa-check"></i><b>8.1.3</b> procedures</a></li>
<li class="chapter" data-level="8.1.4" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#robustness-checks"><i class="fa fa-check"></i><b>8.1.4</b> robustness checks</a></li>
<li class="chapter" data-level="8.1.5" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#presentation-of-results"><i class="fa fa-check"></i><b>8.1.5</b> presentation of results</a></li>
<li class="chapter" data-level="8.1.6" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#multiple-comparisons"><i class="fa fa-check"></i><b>8.1.6</b> multiple comparisons</a></li>
<li class="chapter" data-level="8.1.7" data-path="what-belongs-in-an-answer-strategy.html"><a href="what-belongs-in-an-answer-strategy.html#what-you-will-do-when-data-goes-sideways"><i class="fa fa-check"></i><b>8.1.7</b> what you will do when data goes sideways</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="how-to-select-an-answer-strategy.html"><a href="how-to-select-an-answer-strategy.html"><i class="fa fa-check"></i><b>8.2</b> How to select an answer strategy</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="diagnosis-1.html"><a href="diagnosis-1.html"><i class="fa fa-check"></i><b>9</b> Diagnosis</a><ul>
<li class="chapter" data-level="9.1" data-path="diagnosing-a-single-design.html"><a href="diagnosing-a-single-design.html"><i class="fa fa-check"></i><b>9.1</b> Diagnosing a single design</a></li>
<li class="chapter" data-level="9.2" data-path="how-do-you-select-diagnosands.html"><a href="how-do-you-select-diagnosands.html"><i class="fa fa-check"></i><b>9.2</b> How do you select diagnosands?</a></li>
<li class="chapter" data-level="9.3" data-path="diagnosis-to-assess-the-robustness-of-designs-to-models-gb.html"><a href="diagnosis-to-assess-the-robustness-of-designs-to-models-gb.html"><i class="fa fa-check"></i><b>9.3</b> Diagnosis to assess the robustness of designs to models [GB]</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="redesign-1.html"><a href="redesign-1.html"><i class="fa fa-check"></i><b>10</b> Redesign</a></li>
<li class="part"><span><b>III Design Library</b></span></li>
<li class="chapter" data-level="11" data-path="design-library.html"><a href="design-library.html"><i class="fa fa-check"></i><b>11</b> Design Library</a></li>
<li class="chapter" data-level="12" data-path="observational-designs-for-descriptive-inference.html"><a href="observational-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>12</b> Observational designs for descriptive inference</a><ul>
<li class="chapter" data-level="12.1" data-path="random-sampling.html"><a href="random-sampling.html"><i class="fa fa-check"></i><b>12.1</b> Random sampling</a><ul>
<li class="chapter" data-level="12.1.1" data-path="random-sampling.html"><a href="random-sampling.html#simple-random-sampling"><i class="fa fa-check"></i><b>12.1.1</b> Simple random sampling</a></li>
<li class="chapter" data-level="12.1.2" data-path="random-sampling.html"><a href="random-sampling.html#stratified-and-clustered-random-sampling"><i class="fa fa-check"></i><b>12.1.2</b> Stratified and clustered random sampling</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="multilevel-regression-and-poststratification.html"><a href="multilevel-regression-and-poststratification.html"><i class="fa fa-check"></i><b>12.2</b> Multilevel regression and poststratification</a></li>
<li class="chapter" data-level="12.3" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html"><i class="fa fa-check"></i><b>12.3</b> Inference about unobserved variables</a></li>
<li class="chapter" data-level="12.4" data-path="structural-estimation.html"><a href="structural-estimation.html"><i class="fa fa-check"></i><b>12.4</b> Structural estimation</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="experimental-designs-for-descriptive-inference.html"><a href="experimental-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>13</b> Experimental designs for descriptive inference</a><ul>
<li class="chapter" data-level="13.1" data-path="audit-experiments.html"><a href="audit-experiments.html"><i class="fa fa-check"></i><b>13.1</b> Audit experiments</a><ul>
<li class="chapter" data-level="13.1.1" data-path="audit-experiments.html"><a href="audit-experiments.html#design-declaration-2"><i class="fa fa-check"></i><b>13.1.1</b> Design Declaration</a></li>
<li class="chapter" data-level="13.1.2" data-path="audit-experiments.html"><a href="audit-experiments.html#takeaways-2"><i class="fa fa-check"></i><b>13.1.2</b> Takeaways</a></li>
<li class="chapter" data-level="13.1.3" data-path="audit-experiments.html"><a href="audit-experiments.html#applications"><i class="fa fa-check"></i><b>13.1.3</b> Applications</a></li>
<li class="chapter" data-level="13.1.4" data-path="audit-experiments.html"><a href="audit-experiments.html#exercises-1"><i class="fa fa-check"></i><b>13.1.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html"><i class="fa fa-check"></i><b>13.2</b> Experiments for sensitive questions</a><ul>
<li class="chapter" data-level="13.2.1" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#list-experiments"><i class="fa fa-check"></i><b>13.2.1</b> List experiments</a></li>
<li class="chapter" data-level="13.2.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#randomized-response-technique"><i class="fa fa-check"></i><b>13.2.2</b> Randomized response technique</a></li>
<li class="chapter" data-level="13.2.3" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#references"><i class="fa fa-check"></i><b>13.2.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="conjoint-experimetns.html"><a href="conjoint-experimetns.html"><i class="fa fa-check"></i><b>13.3</b> Conjoint experimetns</a></li>
<li class="chapter" data-level="13.4" data-path="behavioral-games.html"><a href="behavioral-games.html"><i class="fa fa-check"></i><b>13.4</b> Behavioral games</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="observational-designs-for-causal-inference.html"><a href="observational-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>14</b> Observational designs for causal inference</a><ul>
<li class="chapter" data-level="14.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html"><i class="fa fa-check"></i><b>14.1</b> Selection on observables</a><ul>
<li class="chapter" data-level="14.1.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html#classic-confounding"><i class="fa fa-check"></i><b>14.1.1</b> Classic Confounding</a></li>
<li class="chapter" data-level="14.1.2" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-functional-form-is-wrong"><i class="fa fa-check"></i><b>14.1.2</b> What if the functional form is wrong?</a></li>
<li class="chapter" data-level="14.1.3" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-you-have-unobserved-confounding"><i class="fa fa-check"></i><b>14.1.3</b> What if you have unobserved confounding?</a></li>
<li class="chapter" data-level="14.1.4" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-observed-covariate-is-post-treatment"><i class="fa fa-check"></i><b>14.1.4</b> What if the observed covariate is post-treatment?</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>14.2</b> Instrumental variables</a></li>
<li class="chapter" data-level="14.3" data-path="difference-in-differences.html"><a href="difference-in-differences.html"><i class="fa fa-check"></i><b>14.3</b> Difference-in-differences</a><ul>
<li class="chapter" data-level="14.3.1" data-path="difference-in-differences.html"><a href="difference-in-differences.html#two-period-two-group-setting"><i class="fa fa-check"></i><b>14.3.1</b> Two-period two-group setting</a></li>
<li class="chapter" data-level="14.3.2" data-path="difference-in-differences.html"><a href="difference-in-differences.html#parallel-trends-assumption"><i class="fa fa-check"></i><b>14.3.2</b> Parallel trends assumption</a></li>
<li class="chapter" data-level="14.3.3" data-path="difference-in-differences.html"><a href="difference-in-differences.html#multi-period-design"><i class="fa fa-check"></i><b>14.3.3</b> Multi-period design</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html"><i class="fa fa-check"></i><b>14.4</b> Regression Discontinuity</a><ul>
<li class="chapter" data-level="14.4.1" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#design-declaration-3"><i class="fa fa-check"></i><b>14.4.1</b> Design Declaration</a></li>
<li class="chapter" data-level="14.4.2" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#takeaways-3"><i class="fa fa-check"></i><b>14.4.2</b> Takeaways</a></li>
<li class="chapter" data-level="14.4.3" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#further-reading"><i class="fa fa-check"></i><b>14.4.3</b> Further Reading</a></li>
<li class="chapter" data-level="14.4.4" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#exercises-2"><i class="fa fa-check"></i><b>14.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="process-tracing.html"><a href="process-tracing.html"><i class="fa fa-check"></i><b>14.5</b> Process tracing</a></li>
<li class="chapter" data-level="14.6" data-path="synthetic-controls.html"><a href="synthetic-controls.html"><i class="fa fa-check"></i><b>14.6</b> Synthetic controls</a><ul>
<li class="chapter" data-level="14.6.1" data-path="synthetic-controls.html"><a href="synthetic-controls.html#when-there-are-not-good-controls-standard-synth-will-get-the-wrong-answer"><i class="fa fa-check"></i><b>14.6.1</b> When there are not good controls, standard synth will get the wrong answer</a></li>
<li class="chapter" data-level="14.6.2" data-path="synthetic-controls.html"><a href="synthetic-controls.html#references-1"><i class="fa fa-check"></i><b>14.6.2</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="experimental-designs-for-causal-inference.html"><a href="experimental-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>15</b> Experimental designs for causal inference</a><ul>
<li class="chapter" data-level="15.1" data-path="two-arm-trials.html"><a href="two-arm-trials.html"><i class="fa fa-check"></i><b>15.1</b> Two arm trials</a></li>
<li class="chapter" data-level="15.2" data-path="two-arm-trials-and-designs-with-blocking-and-clustering.html"><a href="two-arm-trials-and-designs-with-blocking-and-clustering.html"><i class="fa fa-check"></i><b>15.2</b> Two-arm trials and designs with blocking and clustering</a></li>
<li class="chapter" data-level="15.3" data-path="multiarm-designs.html"><a href="multiarm-designs.html"><i class="fa fa-check"></i><b>15.3</b> Multiarm Designs</a></li>
<li class="chapter" data-level="15.4" data-path="encouragement-designs.html"><a href="encouragement-designs.html"><i class="fa fa-check"></i><b>15.4</b> Encouragement designs</a><ul>
<li class="chapter" data-level="15.4.1" data-path="encouragement-designs.html"><a href="encouragement-designs.html#references-2"><i class="fa fa-check"></i><b>15.4.1</b> References</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html"><i class="fa fa-check"></i><b>15.5</b> Stepped wedge designs</a><ul>
<li class="chapter" data-level="15.5.1" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#design-declaration-4"><i class="fa fa-check"></i><b>15.5.1</b> Design Declaration</a></li>
<li class="chapter" data-level="15.5.2" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#references-3"><i class="fa fa-check"></i><b>15.5.2</b> References</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html"><i class="fa fa-check"></i><b>15.6</b> Randomized Saturation Design</a><ul>
<li class="chapter" data-level="15.6.1" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#design-declaration-5"><i class="fa fa-check"></i><b>15.6.1</b> Design Declaration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="multi-study-designs.html"><a href="multi-study-designs.html"><i class="fa fa-check"></i><b>16</b> Multi-study designs</a><ul>
<li class="chapter" data-level="16.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html"><i class="fa fa-check"></i><b>16.1</b> Papers with multiple studies</a><ul>
<li class="chapter" data-level="16.1.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#design-declaration-6"><i class="fa fa-check"></i><b>16.1.1</b> Design Declaration</a></li>
<li class="chapter" data-level="16.1.2" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#takeaways-4"><i class="fa fa-check"></i><b>16.1.2</b> Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="multi-site-studies.html"><a href="multi-site-studies.html"><i class="fa fa-check"></i><b>16.2</b> Multi-site studies</a><ul>
<li class="chapter" data-level="16.2.1" data-path="multi-site-studies.html"><a href="multi-site-studies.html#unbiased-estimates-of-out-of-sample-sites-in-presence-of-heterogeneous-effects"><i class="fa fa-check"></i><b>16.2.1</b> Unbiased estimates of out-of-sample sites in presence of heterogeneous effects</a></li>
<li class="chapter" data-level="16.2.2" data-path="multi-site-studies.html"><a href="multi-site-studies.html#bayesian-estimation-can-improve-estimates-of-effects-for-sampled-sites"><i class="fa fa-check"></i><b>16.2.2</b> Bayesian estimation can improve estimates of effects for sampled sites</a></li>
<li class="chapter" data-level="16.2.3" data-path="multi-site-studies.html"><a href="multi-site-studies.html#when-things-break-down-confounded-sampling"><i class="fa fa-check"></i><b>16.2.3</b> when things break down: confounded sampling</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Conclusion</b></span></li>
<li class="chapter" data-level="17" data-path="putting-designs-to-use.html"><a href="putting-designs-to-use.html"><i class="fa fa-check"></i><b>17</b> Putting Designs to Use</a><ul>
<li class="chapter" data-level="17.1" data-path="before-studies.html"><a href="before-studies.html"><i class="fa fa-check"></i><b>17.1</b> Before studies</a><ul>
<li class="chapter" data-level="17.1.1" data-path="before-studies.html"><a href="before-studies.html#pre-analysis-plans"><i class="fa fa-check"></i><b>17.1.1</b> Pre-Analysis Plans</a></li>
<li class="chapter" data-level="17.1.2" data-path="before-studies.html"><a href="before-studies.html#registered-reports"><i class="fa fa-check"></i><b>17.1.2</b> Registered Reports</a></li>
<li class="chapter" data-level="17.1.3" data-path="before-studies.html"><a href="before-studies.html#standard-operating-procedures"><i class="fa fa-check"></i><b>17.1.3</b> Standard Operating Procedures</a></li>
<li class="chapter" data-level="17.1.4" data-path="before-studies.html"><a href="before-studies.html#evaluating-and-supporting-research"><i class="fa fa-check"></i><b>17.1.4</b> Evaluating and Supporting Research</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="after-studies.html"><a href="after-studies.html"><i class="fa fa-check"></i><b>17.2</b> After studies</a><ul>
<li class="chapter" data-level="17.2.1" data-path="after-studies.html"><a href="after-studies.html#reconciliation"><i class="fa fa-check"></i><b>17.2.1</b> Reconciliation</a></li>
<li class="chapter" data-level="17.2.2" data-path="after-studies.html"><a href="after-studies.html#replication"><i class="fa fa-check"></i><b>17.2.2</b> Replication</a></li>
<li class="chapter" data-level="17.2.3" data-path="after-studies.html"><a href="after-studies.html#peers-better-scholarly-critique"><i class="fa fa-check"></i><b>17.2.3</b> Peers: Better scholarly critique</a></li>
<li class="chapter" data-level="17.2.4" data-path="after-studies.html"><a href="after-studies.html#combining-designs"><i class="fa fa-check"></i><b>17.2.4</b> Combining designs</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="improving-designs-in-the-social-sciences.html"><a href="improving-designs-in-the-social-sciences.html"><i class="fa fa-check"></i><b>17.3</b> Improving designs in the social sciences</a><ul>
<li class="chapter" data-level="17.3.1" data-path="improving-designs-in-the-social-sciences.html"><a href="improving-designs-in-the-social-sciences.html#a-library-of-research-designs-as-objects"><i class="fa fa-check"></i><b>17.3.1</b> A library of research designs as objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-4.html"><a href="references-4.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://declaredesign.org" target="blank">DeclareDesign</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Research Design: Declare, Diagnose, Redesign</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="declaring-potential-outcomes" class="section level2">
<h2><span class="header-section-number">5.2</span> Declaring potential outcomes</h2>
<p>Remember from section X that potential outcomes are the building blocks of your inquiry—they describe counterfactual states of the world that could exist, depending on some parent variable.</p>
<p>Say the parent variable is whether you are contacted by an election campaign canvasser, who tries to convince you to vote for Jane Doe, a candidate running in your district. Then you might have at least two potential outcomes that depend on the value of this variable: whether you vote for Jane Doe when a canvasser from her campaign contacts you, on the one hand, and whether you vote for Jane Doe when that canvasser does not contact you, on the other. The difference in those two states of the world describes the treatment effect of the election campaign canvasser on whether you vote for Jane Doe.</p>
<p>Say we did an experiment in which that canvasser visits five out of ten people who answer doors, selected at random. Then we could define the potential outcomes of the people they visit as endogenous variables: the “untreated” potential outcome of the experiment would encode whether each door-answerer would vote for Jane Doe if they were not contacted by the canvasser, and the “treated” potential ouctcome would encode whether they vote for Jane Doe if they <em>were</em> contacted by the canvasser.</p>
<p>In addiiton to the untreated and treated potential outcomes of this experiment, we can add a third, distinct, variable: the vote choice that we would actually observe in an experiment where we actually assigned half of the people to canvassing. To reiterate, if a researcher wants to declare a study with two treatment conditions and no spillovers, her model will have to include at least three variables:</p>
<ol style="list-style-type: decimal">
<li>The untreated potential outcome</li>
<li>The treated potential outcome</li>
<li>The observed outcome</li>
</ol>
<p>That is why <code>DeclareDesign</code> has a whole step devoted to declaring potential outcomes. The <code>declare_potential_outcomes()</code> step is crucial because it splits up endogenous variables into the <em>counterfactual</em> sets of values they could take, given the variables they depend on. Consider this declaration:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">potential_outcomes &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(<span class="dt">Y_Z_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb52-2" title="2">                                                 <span class="dt">Y_Z_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a></code></pre></div>
<p>Here, we have added two variables to the dataset, <code>Y_Z_0</code> and <code>Y_Z_1</code>. They are both endogenous, in the sense that they depend on the value that <code>e</code> takes and on the value that <code>Z</code> takes.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<p>So <code>Y_Z_1</code> is a list of the hypothetical values <code>Y</code> <em>could</em> take, if you were to set a specific variable it depends on, <code>Z</code>, to take the value of <code>1</code>. Suppose, for example, that <code>e</code> represents a person’s utility from voting for Jane Doe. Then, the code says that each person will vote for Jane Doe if <code>e</code> is greater than .5 when they’re untreated, and if they are treated, they vote for Jane Doe when <code>e + .05</code> is greater than .5. So, the <span class="math inline">\(M\)</span>odel stipulates that canvassing makes people roughly five percentage points more likely to vote for Jane Doe.</p>
<p>A variable’s potential outcomes can either be expressed by defining each potential outcome explicitly, as we do above, or through what we call a “potential outcomes function:”</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">potential_outcomes &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span><span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">*</span><span class="st"> </span>Z)</a></code></pre></div>
<p>By default, <code>declare_potential_outcomes()</code> assumes that the functional equation for <code>Y</code> will include a binary <code>Z</code> that it can split on to create <code>Y_Z_0</code> and <code>Y_Z_1</code>. But you can also tell the function to split on any other variables that take on any kind of value. For example,</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1">potential_outcomes &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb54-2" title="2">  income <span class="op">~</span><span class="st"> </span>employed <span class="op">+</span><span class="st"> </span>education <span class="op">+</span><span class="st"> </span>u, </a>
<a class="sourceLine" id="cb54-3" title="3">  <span class="dt">assignment_variables =</span> <span class="kw">list</span>(<span class="dt">employed =</span> <span class="kw">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>), <span class="dt">education =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">12</span>)))</a></code></pre></div>
<p>will create four new variables: <code>income_employed_No_education_10</code>, <code>income_employed_No_education_12</code>, <code>income_employed_Yes_education_10</code>, and <code>income_employed_Yes_education_12</code>. In this setup, <code>income</code> is the observed variable and the other four variables are the potential outcomes that would result from assigning individuals to the corresponding values of <code>employed</code> and <code>education</code>. The resultant function, <code>potential_outcomes</code>, knows not to create potential outcomes corresponding to values of <code>u</code> because <code>u</code> does not appear in the list of <code>assignment_variables</code>.</p>
<div id="potential-outcomes-can-include-variables-that-are-not-yet-defined" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Potential outcomes can include variables that are not yet defined</h3>
<p>Careful readers may have picked up on something a bit confusing in the preceding paragraphs: we have defined potential outcomes in terms of a variable that has not yet been realized in our design.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1">simple_design &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span>potential_outcomes <span class="op">+</span><span class="st"> </span>estimand <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="st">  </span>sampling <span class="op">+</span><span class="st"> </span>assignment <span class="op">+</span><span class="st"> </span>reveal_outcomes <span class="op">+</span><span class="st"> </span>estimator</a></code></pre></div>
<p>The potential outcomes <code>Y_Z_1</code> and <code>Y_Z_0</code> are already defined in terms of <code>Z</code> in the second step of our design, well before the variable <code>Z</code> gets created in the fifth step, <code>assignment</code>.</p>
<p>How is this possible? Oddly, perhaps, the values of potential outcomes do not depend on the actual values that the parent variables happen to take<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>—that is what makes them <em>potential</em> outcomes and not plain old outcomes. Imagine, for example, that your design involves assigning everyone to the control, so that <span class="math inline">\(Z_i = 0~~\forall~~i\)</span> in practice. In that case, we still define the treated potential outcome, <span class="math inline">\(Y_i(Z_i = 1)\)</span>, exactly as before. We do not need to know what values <code>Z</code> will <em>actually</em> take in order to define the values that <code>Y</code> could <em>potentially</em> take.</p>
<p>What this requires at the model specification stage is some forwards-looking: you are going to need to model the imaginary states of the world that could happen before they happen. So, for example, if you have a different potential outcome depending on whether you are treated <em>and</em> whether you are sampled, then you need to define potential outcomes in terms of treatment assignment <em>and</em> sampling before either of these steps have occurred. More on this below.</p>
</div>
<div id="when-you-do-and-do-not-need-to-define-potential-outcomes" class="section level3">
<h3><span class="header-section-number">5.2.2</span> When you do and do not need to define potential outcomes</h3>
<p>So when should you split endogenous variables into all of the counterfactual values they can take on (potential outcomes), and when should you leave them whole? In other words, which variables belong in your <code>population</code> and which belong in your <code>potential_outcomes</code>? Why do we split on variables like <code>Z</code> and not on variables like <code>u</code> or <code>e</code>?</p>
<p>The short answer is that it all depends on your <span class="math inline">\(I\)</span>nquiry.</p>
<p>Let us take a simple example using the population declaration above. Suppose that you were interested in the average effect of <span class="math inline">\(Z\)</span> on <span class="math inline">\(Y\)</span>, for any given value that <span class="math inline">\(X\)</span> can take: <span class="math inline">\(E[Y_i(1) - Y_i(0)]\)</span>. Then your inquiry depends only on <code>Y_Z_1</code> and <code>Y_Z_0</code>. Those are the only potential outcomes you need.</p>
<p>What if you want to know the effect of <span class="math inline">\(Z\)</span> on <span class="math inline">\(Y\)</span> among groups for whom <span class="math inline">\(X\)</span> happened to equal 1 or happened to equal 0: <span class="math inline">\(E[Y_i(1) - Y_i(0)\mid X_i = x]\)</span>. Here, you are not interested in the causal effect of <code>X</code>, just in whether, descriptively, the effect of <code>Z</code> on <code>Y</code> just happens to different among people for whom <code>X == 1</code>. There is no need to split on <code>X</code> in this case: you just need to look at the difference in <code>Y_Z_1</code> and <code>Y_Z_0</code> among the people for whom <code>X</code> is equal to 1 or to 0, which can be achieved through subsetting.</p>
<p>Now, let us imagine that you were interested in the causal effects of both <code>X</code> and <code>Z</code> on <code>Y</code>. For example, you might want to know whether <code>X</code> <em>causes</em> the effects of <code>Z</code> on <code>Y</code> to be bigger:
<span class="math display">\[E[(Y_i(Z_i = 1,X_i = 1) - Y_i(Z_i = 0,X_i = 1)) - \]</span>
<span class="math display">\[~~~~~(Y_i(Z_i = 1,X_i = 0) - Y_i(Z_i = 0,X_i = 0))].\]</span>
That is a claim about the counterfactual states of <code>Y</code> as a function of both variables, and would require something such as:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">potential_outcomes &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb56-2" title="2">  <span class="dt">Y_X_0_Z_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb56-3" title="3">  <span class="dt">Y_X_0_Z_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb56-4" title="4">  <span class="dt">Y_X_1_Z_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb56-5" title="5">  <span class="dt">Y_X_1_Z_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a></code></pre></div>
<p>Where <code>Y_X_0_Z_1</code>, for example, is a variable that lists every individual’s potential <code>Y</code> outcome if <code>X</code> were set to 0 and <code>Z</code> were set to 1. In this example, we have stipulated that <code>X</code> increases the effect of <code>Z</code> by .05. To see this, note that we can rewrite the potential outcomes declaration above using a potential outcomes function:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span><span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span>Z <span class="op">*</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span>Z <span class="op">*</span><span class="st"> </span>X <span class="op">*</span><span class="st"> </span><span class="fl">.05</span>, </a>
<a class="sourceLine" id="cb57-2" title="2">  <span class="dt">assignment_variables =</span> <span class="kw">list</span>(<span class="dt">Z =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">X =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<p>What if the value of <span class="math inline">\(X\)</span> were itself a function of <span class="math inline">\(Z\)</span>, and your inquiry focused on the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>—<span class="math inline">\(E[Y_i(X_i = 1) - Y_i(X_i = 0)]\)</span>? In that case, you might model two sets of potential outcomes: the potential outcomes of <span class="math inline">\(X\)</span> as a function of <span class="math inline">\(Z\)</span>, and the potential outcomes of <span class="math inline">\(Y\)</span> as a function of <span class="math inline">\(X\)</span>:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">potential_outcomes &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb58-2" title="2">  <span class="dt">X_Z_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">*</span><span class="st"> </span><span class="fl">0.75</span>,</a>
<a class="sourceLine" id="cb58-3" title="3">  <span class="dt">X_Z_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">*</span><span class="st"> </span><span class="fl">1.25</span>,</a>
<a class="sourceLine" id="cb58-4" title="4">  <span class="dt">Y_X_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb58-5" title="5">  <span class="dt">Y_X_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a></code></pre></div>
<p>Here, we are assuming <code>Z</code> is exogenous in the sense that it is randomly assigned. However, <code>X</code>, the causal variable of interest, is endogenous to <code>e</code> and to <code>Z</code>. In fact, if we are interested in the effect of <code>X</code> on <code>Y</code>, <code>e</code> is no longer background noise here as it was in the examples above: it has become a confounder of the causal effect in which we are interested . To see this, note that higher levels of <code>e</code> make both <code>X</code> and <code>Y</code> more likely to be TRUE. This is the sort of setup in which analysts would typically use an “instrumental variables” approach (callout to IV).<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p>
<p>In practice, there are always many many more potential outcomes lurking in your study than you need to model. Notice, for example, that we did not model the potential outcomes of <code>Y</code> as a function of specific levels of <code>e</code> above – unless we care about the causal effect of <code>e</code> on some outcome, there is little reason to model the counterfactuals it gives rise to. In the following two sections, we walk through some more concrete advice on which kinds of potential outcomes you need to consider modelling. Specifically, we think you should focus on potential outcomes generated through two processes: manipulation and interference. <!-- One of the first questions to ask yourself is how many potential outcomes you want to $M$odel.   --></p>
</div>
<div id="manipulation-creates-potential-outcomes" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Manipulation creates potential outcomes</h3>
<p>Manipulation is some real or imagined intervention in the world that sets the values of a parent of one of your outcomes. Perhaps the most obvious manipulation is assignment to treatment—a coin flip, for example, is a manipulation that sets <span class="math inline">\(Z\)</span> to 1 for roughly half of the people and to 0 for the others. In quasi-experimental designs, we imagine a quasi-assignment: a non-random policy intervention might set some constituencies to have a change in their electoral rules and not others, for example. In that case, we imagine every constituency’s potential outcome <em>had the policy intervention taken place there</em>, and vice versa.</p>
<p>But there are many other kinds of manipulations: measurement and sampling are two obvious examples. When you randomly sample someone and conduct a survey with them, you set their sampling status to “Sampled” and their measurement status to “Measured.” In general, you should consider modeling any manipulation that might affect the value of your <span class="math inline">\(I\)</span>nquiry.</p>
<p>A good rule of thumb is that there will be at least as many potential outcomes as the Cartesian product of the range of the manipulated variables. Let us suppose, for example, that you have a treatment variable with three values, <span class="math inline">\(Z \in \{1,2,3\}\)</span>, and you think that there might be Hawthorne effects – e.g., an effect of having your outcomes measured, <span class="math inline">\(M \in \{0,1\}\)</span>. That implies you should have six potential outcomes, <span class="math inline">\(Y_i(Z_i,M_i)\)</span>: <span class="math inline">\(Y_i(1,0)\)</span>, <span class="math inline">\(Y_i(2,0)\)</span>, <span class="math inline">\(Y_i(3,0)\)</span>, <span class="math inline">\(Y_i(1,1)\)</span>,<span class="math inline">\(Y_i(2,1)\)</span>, and <span class="math inline">\(Y_i(3,1)\)</span>. The first three represent states of the world revealed by assigning someone to the different arms of the treatment when they are not measured, and the latter three those same treatment outcomes when measured. The following potential outcomes declaration suggests a Hawthorne effect:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1">hawthorne_POs &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb59-2" title="2">  <span class="dt">Y_Z_1_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb59-3" title="3">  <span class="dt">Y_Z_2_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb59-4" title="4">  <span class="dt">Y_Z_3_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb59-5" title="5">  <span class="dt">Y_Z_1_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb59-6" title="6">  <span class="dt">Y_Z_2_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb59-7" title="7">  <span class="dt">Y_Z_3_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a></code></pre></div>
<p>Note, however, that our design now requires some modifications: <code>simple_design</code> has an inquiry defined in terms of the simpler potential outcomes, <code>Y_Z_1</code> and <code>Y_Z_0</code>, which no longer exist. We need to clarify that we are interested in the effect of treatment without any measurement effects (here, we will say we are interested in the treatment 2 versus 1 comparison). Second, <code>simple_design</code> had no variable <code>M</code> to split on: we need a step in which we manipulate the measurement variable to be 1 for everyone in the sample. Finally, <code>simple_design</code> revealed <code>Y</code> purely as a function of <code>Z</code>, but we need to declare that the observed <code>Y</code> will correspond to the values of both <code>Z</code> and <code>M</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">assignment &lt;-<span class="st"> </span><span class="kw">declare_assignment</span>(<span class="dt">conditions =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb60-2" title="2">estimand_no_m &lt;-<span class="st"> </span><span class="kw">declare_estimand</span>(<span class="dt">ate_2_no_m =</span> <span class="kw">mean</span>(Y_Z_<span class="dv">2</span>_M_<span class="dv">0</span> <span class="op">-</span><span class="st"> </span>Y_Z_<span class="dv">1</span>_M_<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb60-3" title="3">measurement &lt;-<span class="st"> </span><span class="kw">declare_step</span>(<span class="dt">M =</span> <span class="dv">1</span>, <span class="dt">handler =</span> fabricate)</a>
<a class="sourceLine" id="cb60-4" title="4">reveal_outcomes_measurement &lt;-<span class="st"> </span><span class="kw">declare_reveal</span>(Y, <span class="kw">c</span>(Z, M))</a>
<a class="sourceLine" id="cb60-5" title="5">hawthorne_design &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span>hawthorne_POs <span class="op">+</span><span class="st"> </span>estimand_no_m <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb60-6" title="6"><span class="st">  </span>sampling <span class="op">+</span><span class="st"> </span>assignment <span class="op">+</span><span class="st"> </span>measurement <span class="op">+</span><span class="st"> </span>reveal_outcomes_measurement <span class="op">+</span><span class="st"> </span>estimator</a></code></pre></div>
<p>From here, it is easy to modify our design with measurement effects to stipulate a model in which there is an interaction between treatment and measurement—this is often referred to as an “experimenter demand” effect, and can be more problematic for inference than a simple Hawthorne effect (you can do some simple algebra with the estimand declaration to see why):</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">experimenter_demand_POs &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb61-2" title="2">  <span class="dt">Y_Z_1_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb61-3" title="3">  <span class="dt">Y_Z_2_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb61-4" title="4">  <span class="dt">Y_Z_3_M_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb61-5" title="5">  <span class="dt">Y_Z_1_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb61-6" title="6">  <span class="dt">Y_Z_2_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb61-7" title="7">  <span class="dt">Y_Z_3_M_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">+</span><span class="st"> </span><span class="fl">.10</span>)</a>
<a class="sourceLine" id="cb61-8" title="8">demand_design &lt;-<span class="st"> </span><span class="kw">replace_step</span>(<span class="dt">design =</span> hawthorne_design, </a>
<a class="sourceLine" id="cb61-9" title="9">                              <span class="dt">step =</span> <span class="st">&quot;hawthorne_POs&quot;</span>,</a>
<a class="sourceLine" id="cb61-10" title="10">                              <span class="dt">new_step =</span> experimenter_demand_POs) </a></code></pre></div>
<p>The very same logic can be applied to defining interactions between different treatment arms, effects from sampling, and other interactive effects.</p>
</div>
<div id="interference-creates-potential-outcomes" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Interference creates potential outcomes</h3>
<p>We stated in the previous section that there are usually <em>at least</em> as many potential outcomes as the Cartesian product of the ranges of the manipulated parents. But that statement assumes that the value of each individual’s potential outcome depends only on the value of their <em>own</em> parent variables. When one individual’s potential outcomes depend on the value of a manipulated variable of any other unit in the study, we refer to this as “interference.” Interference is a generic concept that includes social processes such as spillovers, social comparisons, contagion, communication, displacement, deterrence, and persistence [CITE GG p256-6]. Depending on your model, interference can generate a much, much larger space of potential outcomes.</p>
<p>The formal notation for interference is that <span class="math inline">\(Y_i(Z_i) \neq Y_i(\mathbf{Z})\)</span>. Here, <span class="math inline">\(\mathbf{Z}\)</span> denotes the entire vector of random assignments: the math says that an individual’s potential outcome expressed in terms of their own assignment is not the same thing as their outcome expressed in terms of everyone’s assignment. Accordingly, the most general potential outcomes model in the presence of interference is one in which every conceivable realization of <span class="math inline">\(\mathbf{Z}\)</span> is mapped to exactly one potential outcome.</p>
<p>Consider an employee-of-the-month experiment, in which one of three individuals is randomly assigned to be employee of the month (reference to GG). Suppose that employees 1 and 2 do not like each other. We will define potential outcomes in the following manner: <span class="math inline">\(Y_i(j)\)</span>, where <span class="math inline">\(j\)</span> denotes the index of the treated individual. So, for example, <span class="math inline">\(Y_2(3)\)</span> is the potential outcome of the second individual when individual 3 is assigned to treatment.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">interference_design  &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb62-2" title="2"><span class="st">  </span><span class="kw">declare_population</span>(<span class="dt">N =</span> <span class="dv">3</span>, <span class="dt">e =</span> <span class="kw">runif</span>(N)) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-3" title="3"><span class="st">  </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb62-4" title="4">    <span class="dt">Y_J_1 =</span> <span class="kw">c</span>(.<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="dv">1</span>, <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">3</span>]),</a>
<a class="sourceLine" id="cb62-5" title="5">    <span class="dt">Y_J_2 =</span> <span class="kw">c</span>(.<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span><span class="dv">1</span>, <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">3</span>]),</a>
<a class="sourceLine" id="cb62-6" title="6">    <span class="dt">Y_J_3 =</span> <span class="kw">c</span>(.<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">1</span>], <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">2</span>], <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e[<span class="dv">3</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-7" title="7"><span class="st">  </span><span class="kw">declare_assignment</span>(<span class="dt">conditions =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>), <span class="dt">assignment_variable =</span> <span class="st">&quot;J&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-8" title="8"><span class="st">  </span><span class="kw">declare_step</span>(<span class="dt">Z =</span> <span class="kw">as.numeric</span>(ID <span class="op">==</span><span class="st"> </span>J), <span class="dt">handler =</span> fabricate) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-9" title="9"><span class="st">  </span><span class="kw">declare_reveal</span>(Y, J) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-10" title="10"><span class="st">  </span><span class="kw">declare_estimator</span>(Y <span class="op">~</span><span class="st"> </span>Z, <span class="dt">model =</span> lm_robust)</a></code></pre></div>
<p>Notice we did not declare an estimand here. That is because the inquiry in a design with interference requires particular attention (callout to inquiry section).</p>
<p>As you can see, the space of potential outcomes can expand very quickly when we allow for every possible way in which the treatment can be assigned to affect outcomes differently. Under complete random assignment of <span class="math inline">\(m\)</span> of <span class="math inline">\(N\)</span> people to treatment or control, there are <span class="math inline">\(N\)</span> choose <span class="math inline">\(m\)</span> ways of assigning treatment, for example. For a simple design in which ten people are assigned to treatment and control in equal proportions, there are 252 potential outcomes to consider. The problem of specifying the potential outcomes in your <span class="math inline">\(M\)</span>odel can quickly become intractable.</p>
<p>Often, we do not actually expect outcomes to differ quite so much: if there are 100 employees in the company and Sally does not know Jim or Tracy, she might be indifferent between the two worlds in which either Jim or Tracy wins employee-of-the-month. Generalizing this principle, one might be able to cut down on the number of potential outcomes by considering spillovers limited to social networks within the company.</p>
<p>Where possible, a good way to handle spillovers is to specify a <span class="math inline">\(M\)</span>odel in which they function like any other treatment. Such <span class="math inline">\(M\)</span>odels rely on qualitative knowledge, which can be wrong. Let us say, for example, that you were worried about spillovers in an experiment, but: 1) you know that people’s interactions are restricted by some ordering, such as a queue; 2) you strongly suspected that a person being treated only affects the outcomes of the next person in the queue, but not the person after. For example, if the treatment involved providing some randomly selected people in a queue with extra information and the outcome of interest was customer satisfaction, those who fall in the queue behind treated individuals might get frustrated at observing how long the person in front of them is taking. In this case, we can think of two treatments: <span class="math inline">\(Z\)</span>, being directly treated, and <span class="math inline">\(S\)</span>, having the person before you treated:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">spillover_POs &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb63-2" title="2">  <span class="dt">Y_Z_0_S_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e, </a>
<a class="sourceLine" id="cb63-3" title="3">  <span class="dt">Y_Z_1_S_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>,</a>
<a class="sourceLine" id="cb63-4" title="4">  <span class="dt">Y_Z_0_S_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">-</span><span class="st"> </span><span class="fl">.05</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb63-5" title="5">  <span class="dt">Y_Z_1_S_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb63-6" title="6">neighbors &lt;-<span class="st"> </span><span class="kw">declare_step</span>(<span class="dt">next_neighbor =</span> <span class="kw">c</span>(N,(<span class="dv">1</span><span class="op">:</span>(N<span class="dv">-1</span>))),</a>
<a class="sourceLine" id="cb63-7" title="7">                          <span class="dt">S =</span> Z[next_neighbor], </a>
<a class="sourceLine" id="cb63-8" title="8">                          <span class="dt">handler =</span> fabricate)</a>
<a class="sourceLine" id="cb63-9" title="9">reveal_spillovers &lt;-<span class="st"> </span><span class="kw">declare_reveal</span>(Y, <span class="kw">c</span>(Z, S))</a>
<a class="sourceLine" id="cb63-10" title="10">spillover_design &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span>spillover_POs <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb63-11" title="11"><span class="st">  </span>sampling <span class="op">+</span><span class="st"> </span>assignment <span class="op">+</span><span class="st"> </span>neighbors <span class="op">+</span><span class="st"> </span>reveal_spillovers <span class="op">+</span><span class="st"> </span>estimator </a></code></pre></div>
<p>Now, instead of <span class="math inline">\(N\)</span> choose <span class="math inline">\(m\)</span> potential outcomes, there are four—for any sample size. We have contained the problem of proliferating potential outcomes. Of course, showing that one’s strategy is robust to the spillovers specified in this <span class="math inline">\(M\)</span>odel might not be convincing to a skeptic who contends spillovers might also affect the second or third person behind the treated individual. Moreso than ever, the validity of inferences depend on the robustness of the <span class="math inline">\(A\)</span>nswer strategy to plausible <span class="math inline">\(M\)</span>odels.</p>
</div>
<div id="what-to-do-with-potential-outcomes-whose-parents-are-continuous" class="section level3">
<h3><span class="header-section-number">5.2.5</span> What to do with potential outcomes whose parents are continuous</h3>
<p>So far we have focused on potential outcomes whose parents take on discrete values. But another way in which potential outcomes can proliferate is if there are infinitely many places at which to consider splitting the outcome on the parent variable, as is the case with continuous parents.
[INCLUDE EXAMPLE FROM PAPER]</p>
</div>
<div id="principal-strata-can-be-defined-in-terms-of-potential-outcomes" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Principal strata can be defined in terms of potential outcomes</h3>
<p>One important set of <span class="math inline">\(I\)</span>nquiries comprise estimands that are specific to certain causal “types” in the population. For example, in designs in which not everyone assigned to treatment actually takes treatment, researchers are often interested in the treatment effect among those actually treated (often referred to as “compliers”). Similarly, in designs where some units do not report outcomes and where reporting is possibly a function of treatment, researchers are often interested in the effect among those who would report in either treatment or control. These causal types—referred to as “principal strata” in the literature [CITE imbens rubin]—can be usefully modeled in terms of potential outcomes.</p>
<p>Consider the case of one-sided non-compliance:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">compliance_POs &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb64-2" title="2">  <span class="dt">D_Z_0 =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb64-3" title="3">  <span class="dt">D_Z_1 =</span> <span class="kw">ifelse</span>(<span class="kw">order</span>(e) <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb64-4" title="4">  <span class="dt">Y_D_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb64-5" title="5">  <span class="dt">Y_D_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a>
<a class="sourceLine" id="cb64-6" title="6">ate_estimand &lt;-<span class="st"> </span><span class="kw">declare_estimand</span>(<span class="dt">ate =</span> <span class="kw">mean</span>(Y_D_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>Y_D_<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb64-7" title="7">cace_estimand &lt;-<span class="st"> </span><span class="kw">declare_estimand</span>(<span class="dt">cace =</span> <span class="kw">mean</span>(Y_D_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>Y_D_<span class="dv">0</span>), </a>
<a class="sourceLine" id="cb64-8" title="8">                                  <span class="dt">subset =</span> D_Z_<span class="dv">0</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>D_Z_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<p>Here, treatment status, <span class="math inline">\(D\)</span>, is a potential outcome of treatment assignment, <span class="math inline">\(Z\)</span>. The CACE estimand is easily defined in terms of the causal type: it is the average effect among people for whom <span class="math inline">\(D_i(Z_i = 0) =0, D_i(Z_i = 1) = 1\)</span>.</p>
<p>Similarly, we can think of attrition as a potential outcome. Here, people with the lowest four values of <code>e</code> do not report outcomes if assigned to control, but everyone reports when they are assigned to treatment. Whenever someone does not report we only observe an <code>NA</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">attrition_POs &lt;-<span class="st"> </span><span class="kw">declare_potential_outcomes</span>(</a>
<a class="sourceLine" id="cb65-2" title="2">  <span class="dt">R_Z_0 =</span> <span class="kw">ifelse</span>(<span class="kw">order</span>(e) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb65-3" title="3">  <span class="dt">R_Z_1 =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb65-4" title="4">  <span class="dt">Y_R_0_Z_0 =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb65-5" title="5">  <span class="dt">Y_R_0_Z_1 =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb65-6" title="6">  <span class="dt">Y_R_1_Z_0 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e,</a>
<a class="sourceLine" id="cb65-7" title="7">  <span class="dt">Y_R_1_Z_1 =</span> <span class="fl">.5</span> <span class="op">&lt;</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span><span class="fl">.05</span>)</a></code></pre></div>
</div>
<div id="develop-a-null-model" class="section level3">
<h3><span class="header-section-number">5.2.7</span> Develop a null model</h3>
<p>You might be wondering whether <span class="math inline">\(M\)</span>odels are simply a way of coding hypotheses. The two are similar but not quite the same: many <span class="math inline">\(M\)</span>odels can correspond to the same hypothesis. One particularly important hypothesis is the so-called null hypothesis that the average effect of <span class="math inline">\(Z\)</span> on <span class="math inline">\(Y\)</span> is equal to zero. Consider the following three models:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">population &lt;-<span class="st"> </span><span class="kw">declare_population</span>(<span class="dt">N =</span> <span class="dv">8</span>, <span class="dt">e =</span> <span class="kw">rnorm</span>(N, <span class="dv">0</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb66-2" title="2">model_<span class="dv">1</span> &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span>e)</a>
<a class="sourceLine" id="cb66-3" title="3">model_<span class="dv">2</span> &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span>e <span class="op">+</span><span class="st"> </span>e <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>Z)</a>
<a class="sourceLine" id="cb66-4" title="4">model_<span class="dv">3</span> &lt;-<span class="st"> </span>population <span class="op">+</span><span class="st"> </span><span class="kw">declare_potential_outcomes</span>(Y <span class="op">~</span><span class="st"> </span><span class="kw">ifelse</span>(e <span class="op">&gt;</span><span class="st"> </span><span class="fl">.5</span>, Z <span class="op">*</span><span class="st"> </span><span class="fl">.2</span>, <span class="op">-</span>Z <span class="op">*</span><span class="st"> </span><span class="fl">.2</span>))</a></code></pre></div>
<p>Each of these models is consistent with the null hypothesis. In the first, treatment and control outcomes are exactly the same: <span class="math inline">\(Z\)</span> does not even appear in the functional equation for <span class="math inline">\(Y\)</span>, there is no effect for any unit in the sample. This is sometimes referred to as a “sharp null hypothesis,” and is a specific case of the more general null. In <code>model_2</code>, <span class="math inline">\(Z\)</span> increases the variance of <span class="math inline">\(Y\)</span>, but because the mean of <span class="math inline">\(e\)</span> is 0, there is no average difference in the means of the treated and control outcomes: they are both zero. In <code>model_3</code>, there are large positive treatment effects for those with <span class="math inline">\(e_i &gt; .5\)</span> and large negative treatment effects for those with <span class="math inline">\(e_i \leq .5\)</span>. On average, the effects offset each other leading to an average effect of <span class="math inline">\(Z\)</span> on <span class="math inline">\(Y\)</span> that is equal to zero. Since there are infinitely many ways of parameterizing this average effect of zero (replace .2 with any number in <code>model_3</code>), there are infinitely many models that correspond to the single null hypothesis that the average effect of <code>Z</code> on <code>Y</code> is equal to zero.</p>
<p>Despite the fact that there are many such null models to consider, and the fact that most researchers do not design a project expecting that null hypotheses are true, we see great value in declaring a so-called “null model.” By “null model,” we have in mind something like the potential outcomes in <code>model_1</code>: there is no relationship whatsoever between the outcome of interest and the treatment(s) of interest.</p>
<p>You can you learn at least three important things from a “null model” design, or “null design.”</p>
<p>First, the power of your null design is an important quantity: it is none other than the rate of false positives for your design, otherwise known as the type 1 error rate. It is important to know if the probability with which you (erroneously) reject the null of a zero average effect is equal to your <span class="math inline">\(\alpha\)</span>: the rate at which you stipulate that you are comfortable erroneously rejecting the null (usually 5%). You might be quite happy to see that your non-null design exhibits great power with small effects, for example. But if you check your null design and see that your power is above 10%, then you know you have a problem: you are rejecting the null of no effect at twice the rate you should be for a stated error rate of 5%.</p>
<p>Second, the ability to define the false positive rate for one estimator gives you the ability to define the false positive rate over <em>all</em> of the estimators in your design. This is often referred to as the family-wise error rate: how often at least one of the tests you run erroneously rejects the null of no effect. If your tests are completely unrelated to one another, this rate will just be <span class="math inline">\(\alpha^k\)</span>, where <span class="math inline">\(k\)</span> is the number of tests. But often rejecting one test implies you are more likely to reject another: if an erroneous rejection results from chance imbalance on a variable that is correlated with another variable tested against the same treatment, then you are likely to reject that test too. At the extreme, if you run <span class="math inline">\(k\)</span> equivalent tests, the familywise error rate will be 5%: rejecting one means you reject the rest, failing to reject one means failing to reject the rest. So, as we show in section X, if you use your actual realized data to generate a null design, you can figure out what your actual familywise error rate is under the global null of no effect for any unit or outcome. From there, you can figure out what testwise <span class="math inline">\(\alpha\)</span> you would need to apply in order to reject any test in the family 5% of the time. Often, this will be a lot less punitive than out-of-the-box corrections for multiple comparisons.</p>
<p>Third, and maybe most importantly for practical purposes, a null design does not require any specification about effect sizes. A perennial issue in power analysis is that calculating power requires specification of some arbitrary effect size. But often the very reason we do a study is to determine what the size of an effect is. More meaningful, we think, is using diagnosis to determine the smallest effect you could detect with 80% power. And for that, you only need a good estimate of the standard error, which does not depend on the effect size—it can be derived from a null design. When diagnosing a null design in order to calculate the MDE, it may be worth considering potential outcomes of the form declared in <code>model_2</code>: when trying to determine the standard error, it is important to consider whether the treatment may change the variance in the outcome, even if it does not change the mean.</p>
</div>
<div id="consider-heterogeneity" class="section level3">
<h3><span class="header-section-number">5.2.8</span> Consider heterogeneity</h3>
<ul>
<li><p>treatment effects may be stochastic—this can matter for variance estimation</p></li>
<li><p>treatment effects may vary systematically—many otherwise unbiased designs become biased when this happens, so consider it by default</p></li>
</ul>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>In <code>DeclareDesign</code>, potential outcomes are labelled starting with the outcome (here, <code>Y</code>) followed by a specific parent variable whose effect we are interested in (here, <code>Z</code>), and the value that parent is set to (here <code>1</code> and <code>0</code>), all separated by underscores.<a href="declaring-potential-outcomes.html#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>Include reference to Pearl and truncation here? E.g. <span class="math inline">\(Pr(Y~ \mid ~do(X)) ~~|| ~~Pr(X)\)</span><a href="declaring-potential-outcomes.html#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>One shortcoming of this <span class="math inline">\(M\)</span>odel is that it has “baked in” the assumption of an exclusion restriction: <code>Y</code> is only affected by <code>Z</code> through <code>Z</code>’s effect on <code>X</code>—<code>Z</code> does not appear in the expression for <code>Y</code>. Returning to the fish example: showing that an instrumental variables answer strategy performs well under this <span class="math inline">\(M\)</span>odel would not be convincing to someone who worried about a particular, unmodeled, violation of the exclusion restriction.<a href="declaring-potential-outcomes.html#fnref10" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="declaring-exogenous-and-endogenous-variables-in-the-population.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="declaring-populations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false,
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
