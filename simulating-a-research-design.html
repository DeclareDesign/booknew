<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.6 Simulating a research design | Research Design: Declare, Diagnose, Redesign</title>
  <meta name="description" content="describe the book" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="3.6 Simulating a research design | Research Design: Declare, Diagnose, Redesign" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="describe the book" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.6 Simulating a research design | Research Design: Declare, Diagnose, Redesign" />
  
  <meta name="twitter:description" content="describe the book" />
  

<meta name="author" content="Graeme Blair, Jasper Cooper, Alexander Coppock, and Macartan Humphreys" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="building-a-design-from-design-steps.html"/>
<link rel="next" href="diagnosing-a-research-design.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="https://hypothes.is/embed.js" async></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="headers/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Research Design</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="improving-research-designs.html"><a href="improving-research-designs.html"><i class="fa fa-check"></i><b>2</b> Improving research designs</a><ul>
<li class="chapter" data-level="2.1" data-path="design-declaration-model-inquiry-data-strategy-answer-strategy.html"><a href="design-declaration-model-inquiry-data-strategy-answer-strategy.html"><i class="fa fa-check"></i><b>2.1</b> Design Declaration: Model-Inquiry-Data Strategy-Answer Strategy</a><ul>
<li class="chapter" data-level="2.1.1" data-path="design-declaration-model-inquiry-data-strategy-answer-strategy.html"><a href="design-declaration-model-inquiry-data-strategy-answer-strategy.html#example-gulzar2020"><i class="fa fa-check"></i><b>2.1.1</b> Example: <span class="citation">Gulzar and Khan (<span>n.d.</span>)</span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="assessing-research-design-quality-design-diagnosis.html"><a href="assessing-research-design-quality-design-diagnosis.html"><i class="fa fa-check"></i><b>2.2</b> Assessing research design quality: design diagnosis</a></li>
<li class="chapter" data-level="2.3" data-path="redesign.html"><a href="redesign.html"><i class="fa fa-check"></i><b>2.3</b> Redesign</a></li>
<li class="chapter" data-level="2.4" data-path="formalizing-design-declaration-diagnosis-and-redesing-.html"><a href="formalizing-design-declaration-diagnosis-and-redesing-.html"><i class="fa fa-check"></i><b>2.4</b> Formalizing design declaration, diagnosis, and redesing.</a><ul>
<li class="chapter" data-level="2.4.1" data-path="formalizing-design-declaration-diagnosis-and-redesing-.html"><a href="formalizing-design-declaration-diagnosis-and-redesing-.html#formalizing-mida"><i class="fa fa-check"></i><b>2.4.1</b> Formalizing MIDA</a></li>
<li class="chapter" data-level="2.4.2" data-path="formalizing-design-declaration-diagnosis-and-redesing-.html"><a href="formalizing-design-declaration-diagnosis-and-redesing-.html#formalizing-diagnosis"><i class="fa fa-check"></i><b>2.4.2</b> Formalizing Diagnosis</a></li>
<li class="chapter" data-level="2.4.3" data-path="formalizing-design-declaration-diagnosis-and-redesing-.html"><a href="formalizing-design-declaration-diagnosis-and-redesing-.html#formalizing-redesign"><i class="fa fa-check"></i><b>2.4.3</b> Formalizing Redesign</a></li>
<li class="chapter" data-level="2.4.4" data-path="formalizing-design-declaration-diagnosis-and-redesing-.html"><a href="formalizing-design-declaration-diagnosis-and-redesing-.html#brief-illustration"><i class="fa fa-check"></i><b>2.4.4</b> Brief Illustration</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="relationship-to-other-ways-of-thinking-about-research-design.html"><a href="relationship-to-other-ways-of-thinking-about-research-design.html"><i class="fa fa-check"></i><b>2.5</b> Relationship to other ways of thinking about research design</a></li>
<li class="chapter" data-level="2.6" data-path="implications.html"><a href="implications.html"><i class="fa fa-check"></i><b>2.6</b> Implications</a></li>
<li class="chapter" data-level="2.7" data-path="limitations.html"><a href="limitations.html"><i class="fa fa-check"></i><b>2.7</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="software-primer.html"><a href="software-primer.html"><i class="fa fa-check"></i><b>3</b> Software primer</a><ul>
<li class="chapter" data-level="3.1" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>3.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2" data-path="where-we-are-going.html"><a href="where-we-are-going.html"><i class="fa fa-check"></i><b>3.2</b> Where we are going</a><ul>
<li class="chapter" data-level="3.2.1" data-path="where-we-are-going.html"><a href="where-we-are-going.html#declaring-a-design"><i class="fa fa-check"></i><b>3.2.1</b> Declaring a design</a></li>
<li class="chapter" data-level="3.2.2" data-path="where-we-are-going.html"><a href="where-we-are-going.html#diagnosis"><i class="fa fa-check"></i><b>3.2.2</b> Diagnosis</a></li>
<li class="chapter" data-level="3.2.3" data-path="where-we-are-going.html"><a href="where-we-are-going.html#redesign-1"><i class="fa fa-check"></i><b>3.2.3</b> Redesign</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html"><i class="fa fa-check"></i><b>3.3</b> Building a step of a research design</a><ul>
<li class="chapter" data-level="3.3.1" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#using-dplyr"><i class="fa fa-check"></i><b>3.3.1</b> Using dplyr</a></li>
<li class="chapter" data-level="3.3.2" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#as-a-function"><i class="fa fa-check"></i><b>3.3.2</b> As a function</a></li>
<li class="chapter" data-level="3.3.3" data-path="building-a-step-of-a-research-design.html"><a href="building-a-step-of-a-research-design.html#in-declaredesign"><i class="fa fa-check"></i><b>3.3.3</b> In DeclareDesign</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="research-design-steps.html"><a href="research-design-steps.html"><i class="fa fa-check"></i><b>3.4</b> Research design steps</a><ul>
<li class="chapter" data-level="3.4.1" data-path="research-design-steps.html"><a href="research-design-steps.html#model"><i class="fa fa-check"></i><b>3.4.1</b> Model</a></li>
<li class="chapter" data-level="3.4.2" data-path="research-design-steps.html"><a href="research-design-steps.html#inquiry"><i class="fa fa-check"></i><b>3.4.2</b> Inquiry</a></li>
<li class="chapter" data-level="3.4.3" data-path="research-design-steps.html"><a href="research-design-steps.html#data-strategy"><i class="fa fa-check"></i><b>3.4.3</b> Data strategy</a></li>
<li class="chapter" data-level="3.4.4" data-path="research-design-steps.html"><a href="research-design-steps.html#answer-strategy"><i class="fa fa-check"></i><b>3.4.4</b> Answer strategy</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html"><i class="fa fa-check"></i><b>3.5</b> Building a design from design steps</a><ul>
<li class="chapter" data-level="3.5.1" data-path="building-a-design-from-design-steps.html"><a href="building-a-design-from-design-steps.html#order-matters"><i class="fa fa-check"></i><b>3.5.1</b> Order matters</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html"><i class="fa fa-check"></i><b>3.6</b> Simulating a research design</a><ul>
<li class="chapter" data-level="3.6.1" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html#in-dplyr"><i class="fa fa-check"></i><b>3.6.1</b> In <code>dplyr</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="simulating-a-research-design.html"><a href="simulating-a-research-design.html#in-declaredesign-1"><i class="fa fa-check"></i><b>3.6.2</b> In <code>DeclareDesign</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="diagnosing-a-research-design.html"><a href="diagnosing-a-research-design.html"><i class="fa fa-check"></i><b>3.7</b> Diagnosing a research design</a></li>
<li class="chapter" data-level="3.8" data-path="comparing-designs.html"><a href="comparing-designs.html"><i class="fa fa-check"></i><b>3.8</b> Comparing designs</a><ul>
<li class="chapter" data-level="3.8.1" data-path="comparing-designs.html"><a href="comparing-designs.html#comparing-many-variants-of-a-design"><i class="fa fa-check"></i><b>3.8.1</b> Comparing many variants of a design</a></li>
<li class="chapter" data-level="3.8.2" data-path="comparing-designs.html"><a href="comparing-designs.html#library-of-designs"><i class="fa fa-check"></i><b>3.8.2</b> Library of designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i><b>4</b> How to use this book</a><ul>
<li class="chapter" data-level="4.1" data-path="part-i-exercises.html"><a href="part-i-exercises.html"><i class="fa fa-check"></i><b>4.1</b> Part I Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Declaration and Diagnosis in Practice</b></span></li>
<li class="chapter" data-level="5" data-path="the-fundamental-2x2-of-research-design.html"><a href="the-fundamental-2x2-of-research-design.html"><i class="fa fa-check"></i><b>5</b> The Fundamental 2x2 of Research Design</a></li>
<li class="chapter" data-level="6" data-path="specifying-the-model.html"><a href="specifying-the-model.html"><i class="fa fa-check"></i><b>6</b> Specifying the model</a><ul>
<li class="chapter" data-level="6.1" data-path="two-languages-for-describing-causal-models.html"><a href="two-languages-for-describing-causal-models.html"><i class="fa fa-check"></i><b>6.1</b> Two languages for describing causal models</a></li>
<li class="chapter" data-level="6.2" data-path="example-section.html"><a href="example-section.html"><i class="fa fa-check"></i><b>6.2</b> Example section</a></li>
<li class="chapter" data-level="6.3" data-path="connections-to-mida.html"><a href="connections-to-mida.html"><i class="fa fa-check"></i><b>6.3</b> Connections to MIDA</a></li>
<li class="chapter" data-level="6.4" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html"><i class="fa fa-check"></i><b>6.4</b> Specifying a model in DeclareDesign</a><ul>
<li class="chapter" data-level="6.4.1" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#declaring-exogenous-and-endogenous-variables-in-the-population"><i class="fa fa-check"></i><b>6.4.1</b> Declaring exogenous and endogenous variables in the population</a></li>
<li class="chapter" data-level="6.4.2" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#declaring-potential-outcomes"><i class="fa fa-check"></i><b>6.4.2</b> Declaring potential outcomes</a></li>
<li class="chapter" data-level="6.4.3" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#potential-outcomes-often-include-variables-that-are-not-yet-defined"><i class="fa fa-check"></i><b>6.4.3</b> Potential outcomes often include variables that are not yet defined</a></li>
<li class="chapter" data-level="6.4.4" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#when-you-do-and-do-not-need-to-define-potential-outcomes"><i class="fa fa-check"></i><b>6.4.4</b> When you do and do not need to define potential outcomes</a></li>
<li class="chapter" data-level="6.4.5" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#using-existing-information-pilot-data-past-studies"><i class="fa fa-check"></i><b>6.4.5</b> Using existing information (pilot data, past studies)</a></li>
<li class="chapter" data-level="6.4.6" data-path="specifying-a-model-in-declaredesign.html"><a href="specifying-a-model-in-declaredesign.html#what-to-do-when-you-are-uncertain"><i class="fa fa-check"></i><b>6.4.6</b> What to do when you are uncertain</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="how-you-already-specify-models-in-everyday-research.html"><a href="how-you-already-specify-models-in-everyday-research.html"><i class="fa fa-check"></i><b>6.5</b> How you already specify models in everyday research</a></li>
<li class="chapter" data-level="6.6" data-path="last-word-on-models-.html"><a href="last-word-on-models-.html"><i class="fa fa-check"></i><b>6.6</b> Last word on Models.</a></li>
<li class="chapter" data-level="6.7" data-path="defining-the-inquiry.html"><a href="defining-the-inquiry.html"><i class="fa fa-check"></i><b>6.7</b> Defining the Inquiry</a></li>
<li class="chapter" data-level="6.8" data-path="old-below.html"><a href="old-below.html"><i class="fa fa-check"></i><b>6.8</b> OLD BELOW</a></li>
<li class="chapter" data-level="6.9" data-path="the-false-choice-between-theory-first-and-method-first-approaches-.html"><a href="the-false-choice-between-theory-first-and-method-first-approaches-.html"><i class="fa fa-check"></i><b>6.9</b> The false choice between theory-first and method-first approaches.</a></li>
<li class="chapter" data-level="6.10" data-path="novelty.html"><a href="novelty.html"><i class="fa fa-check"></i><b>6.10</b> Novelty</a></li>
<li class="chapter" data-level="6.11" data-path="mixing-methods.html"><a href="mixing-methods.html"><i class="fa fa-check"></i><b>6.11</b> Mixing methods</a></li>
<li class="chapter" data-level="6.12" data-path="example-section-1.html"><a href="example-section-1.html"><i class="fa fa-check"></i><b>6.12</b> Example section</a></li>
<li class="chapter" data-level="6.13" data-path="connections-to-mida-1.html"><a href="connections-to-mida-1.html"><i class="fa fa-check"></i><b>6.13</b> Connections to MIDA</a></li>
<li class="chapter" data-level="6.14" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html"><i class="fa fa-check"></i><b>6.14</b> Defining the Inquiry in DeclareDesign</a><ul>
<li class="chapter" data-level="6.14.1" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#classes-of-estimands"><i class="fa fa-check"></i><b>6.14.1</b> Classes of estimands</a></li>
<li class="chapter" data-level="6.14.2" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#descriptive-estimands"><i class="fa fa-check"></i><b>6.14.2</b> Descriptive estimands</a></li>
<li class="chapter" data-level="6.14.3" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#simple-causal-estimands"><i class="fa fa-check"></i><b>6.14.3</b> Simple causal estimands</a></li>
<li class="chapter" data-level="6.14.4" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#local-estimands-estiamnds-over-latent-classes-principal-strata"><i class="fa fa-check"></i><b>6.14.4</b> Local estimands / EStiamnds over latent classes, principal strata</a></li>
<li class="chapter" data-level="6.14.5" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#study-dependent-estimands"><i class="fa fa-check"></i><b>6.14.5</b> Study dependent estimands</a></li>
<li class="chapter" data-level="6.14.6" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#complex-counterfactuals"><i class="fa fa-check"></i><b>6.14.6</b> Complex counterfactuals</a></li>
<li class="chapter" data-level="6.14.7" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#parametric-estimands"><i class="fa fa-check"></i><b>6.14.7</b> Parametric estimands</a></li>
<li class="chapter" data-level="6.14.8" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#vector-valued-inquiries-set-of-predictions-for-n-units"><i class="fa fa-check"></i><b>6.14.8</b> Vector-valued inquiries (set of predictions for N units),</a></li>
<li class="chapter" data-level="6.14.9" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#models-as-estimands"><i class="fa fa-check"></i><b>6.14.9</b> Models as estimands</a></li>
<li class="chapter" data-level="6.14.10" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#selecting-estimands"><i class="fa fa-check"></i><b>6.14.10</b> Selecting estimands</a></li>
<li class="chapter" data-level="6.14.11" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#you-are-responsible-for-your-estimand"><i class="fa fa-check"></i><b>6.14.11</b> You are responsible for your estimand</a></li>
<li class="chapter" data-level="6.14.12" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#estimands-to-purpose.-choice-of-inquiry-is-not-valueless"><i class="fa fa-check"></i><b>6.14.12</b> Estimands to purpose. Choice of inquiry is not valueless</a></li>
<li class="chapter" data-level="6.14.13" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#estimand-scopewhat-is-the-set-of-units-which-you-want-to-learn-the-answer-about-know-what-ate-averages-over"><i class="fa fa-check"></i><b>6.14.13</b> Estimand scope:What is the set of units which you want to learn the answer about? Know what ATE averages over</a></li>
<li class="chapter" data-level="6.14.14" data-path="defining-the-inquiry-in-declaredesign.html"><a href="defining-the-inquiry-in-declaredesign.html#unknown-estimands-inquiries-for-discovery"><i class="fa fa-check"></i><b>6.14.14</b> Unknown estimands: Inquiries for discovery</a></li>
</ul></li>
<li class="chapter" data-level="6.15" data-path="auxilliary-inquiries.html"><a href="auxilliary-inquiries.html"><i class="fa fa-check"></i><b>6.15</b> Auxilliary Inquiries</a></li>
<li class="chapter" data-level="6.16" data-path="connections-to-mida-2.html"><a href="connections-to-mida-2.html"><i class="fa fa-check"></i><b>6.16</b> Connections to MIDA</a></li>
<li class="chapter" data-level="6.17" data-path="how-you-already-specify-inquiries-in-current-practice.html"><a href="how-you-already-specify-inquiries-in-current-practice.html"><i class="fa fa-check"></i><b>6.17</b> How you already specify inquiries in current practice</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="crafting-a-data-strategy.html"><a href="crafting-a-data-strategy.html"><i class="fa fa-check"></i><b>7</b> Crafting a data strategy</a><ul>
<li class="chapter" data-level="7.1" data-path="example.html"><a href="example.html"><i class="fa fa-check"></i><b>7.1</b> Example</a></li>
<li class="chapter" data-level="7.2" data-path="crafting-a-data-strategy-in-declaredesign.html"><a href="crafting-a-data-strategy-in-declaredesign.html"><i class="fa fa-check"></i><b>7.2</b> Crafting a Data Strategy in DeclareDesign</a><ul>
<li class="chapter" data-level="7.2.1" data-path="crafting-a-data-strategy-in-declaredesign.html"><a href="crafting-a-data-strategy-in-declaredesign.html#choosing-a-sampling-procedure"><i class="fa fa-check"></i><b>7.2.1</b> Choosing a sampling procedure</a></li>
<li class="chapter" data-level="7.2.2" data-path="crafting-a-data-strategy-in-declaredesign.html"><a href="crafting-a-data-strategy-in-declaredesign.html#choosing-an-assignment-procedure"><i class="fa fa-check"></i><b>7.2.2</b> Choosing an assignment procedure</a></li>
<li class="chapter" data-level="7.2.3" data-path="crafting-a-data-strategy-in-declaredesign.html"><a href="crafting-a-data-strategy-in-declaredesign.html#choosing-a-measurement-procedure"><i class="fa fa-check"></i><b>7.2.3</b> Choosing a measurement procedure</a></li>
<li class="chapter" data-level="7.2.4" data-path="crafting-a-data-strategy-in-declaredesign.html"><a href="crafting-a-data-strategy-in-declaredesign.html#section"><i class="fa fa-check"></i><b>7.2.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="connections-to-mida-3.html"><a href="connections-to-mida-3.html"><i class="fa fa-check"></i><b>7.3</b> Connections to MIDA</a></li>
<li class="chapter" data-level="7.4" data-path="how-you-already-specify-data-strategies-in-current-practice.html"><a href="how-you-already-specify-data-strategies-in-current-practice.html"><i class="fa fa-check"></i><b>7.4</b> How you already specify data strategies in current practice</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choosing-an-answer-strategy.html"><a href="choosing-an-answer-strategy.html"><i class="fa fa-check"></i><b>8</b> Choosing an answer strategy</a><ul>
<li class="chapter" data-level="8.1" data-path="example-1.html"><a href="example-1.html"><i class="fa fa-check"></i><b>8.1</b> Example</a></li>
<li class="chapter" data-level="8.2" data-path="in-declaredesign-2.html"><a href="in-declaredesign-2.html"><i class="fa fa-check"></i><b>8.2</b> In DeclareDesign</a></li>
<li class="chapter" data-level="8.3" data-path="connections-to-mida-4.html"><a href="connections-to-mida-4.html"><i class="fa fa-check"></i><b>8.3</b> Connections to MIDA</a></li>
<li class="chapter" data-level="8.4" data-path="how-you-already-choose-answer-strategies-in-current-practice.html"><a href="how-you-already-choose-answer-strategies-in-current-practice.html"><i class="fa fa-check"></i><b>8.4</b> How you already choose answer strategies in current practice</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="diagnosis-1.html"><a href="diagnosis-1.html"><i class="fa fa-check"></i><b>9</b> Diagnosis</a><ul>
<li class="chapter" data-level="9.1" data-path="diagnosing-a-design.html"><a href="diagnosing-a-design.html"><i class="fa fa-check"></i><b>9.1</b> Diagnosing a design</a></li>
<li class="chapter" data-level="9.2" data-path="estimating-diagnosands-analytically.html"><a href="estimating-diagnosands-analytically.html"><i class="fa fa-check"></i><b>9.2</b> Estimating diagnosands analytically</a></li>
<li class="chapter" data-level="9.3" data-path="estimating-diagnosands-via-simulation.html"><a href="estimating-diagnosands-via-simulation.html"><i class="fa fa-check"></i><b>9.3</b> Estimating diagnosands via simulation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="redesign-2.html"><a href="redesign-2.html"><i class="fa fa-check"></i><b>10</b> Redesign</a><ul>
<li class="chapter" data-level="10.1" data-path="redesign-to-assess-the-robustness-of-designs-to-models-gb.html"><a href="redesign-to-assess-the-robustness-of-designs-to-models-gb.html"><i class="fa fa-check"></i><b>10.1</b> Redesign to assess the robustness of designs to models [GB]</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="part-ii-exercises.html"><a href="part-ii-exercises.html"><i class="fa fa-check"></i><b>11</b> Part II Exercises</a></li>
<li class="part"><span><b>III Design Library</b></span></li>
<li class="chapter" data-level="12" data-path="design-library.html"><a href="design-library.html"><i class="fa fa-check"></i><b>12</b> Design Library</a></li>
<li class="chapter" data-level="13" data-path="observational-designs-for-descriptive-inference.html"><a href="observational-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>13</b> Observational designs for descriptive inference</a><ul>
<li class="chapter" data-level="13.1" data-path="random-sampling.html"><a href="random-sampling.html"><i class="fa fa-check"></i><b>13.1</b> Random sampling</a><ul>
<li class="chapter" data-level="13.1.1" data-path="random-sampling.html"><a href="random-sampling.html#simple-random-sampling"><i class="fa fa-check"></i><b>13.1.1</b> Simple random sampling</a></li>
<li class="chapter" data-level="13.1.2" data-path="random-sampling.html"><a href="random-sampling.html#stratified-and-clustered-random-sampling"><i class="fa fa-check"></i><b>13.1.2</b> Stratified and clustered random sampling</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="multilevel-regression-and-poststratification.html"><a href="multilevel-regression-and-poststratification.html"><i class="fa fa-check"></i><b>13.2</b> Multilevel regression and poststratification</a></li>
<li class="chapter" data-level="13.3" data-path="inference-about-unobserved-variables.html"><a href="inference-about-unobserved-variables.html"><i class="fa fa-check"></i><b>13.3</b> Inference about unobserved variables</a></li>
<li class="chapter" data-level="13.4" data-path="structural-estimation.html"><a href="structural-estimation.html"><i class="fa fa-check"></i><b>13.4</b> Structural estimation</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="experimental-designs-for-descriptive-inference.html"><a href="experimental-designs-for-descriptive-inference.html"><i class="fa fa-check"></i><b>14</b> Experimental designs for descriptive inference</a><ul>
<li class="chapter" data-level="14.1" data-path="audit-experiments.html"><a href="audit-experiments.html"><i class="fa fa-check"></i><b>14.1</b> Audit experiments</a><ul>
<li class="chapter" data-level="14.1.1" data-path="audit-experiments.html"><a href="audit-experiments.html#design-declaration-2"><i class="fa fa-check"></i><b>14.1.1</b> Design Declaration</a></li>
<li class="chapter" data-level="14.1.2" data-path="audit-experiments.html"><a href="audit-experiments.html#takeaways-2"><i class="fa fa-check"></i><b>14.1.2</b> Takeaways</a></li>
<li class="chapter" data-level="14.1.3" data-path="audit-experiments.html"><a href="audit-experiments.html#applications"><i class="fa fa-check"></i><b>14.1.3</b> Applications</a></li>
<li class="chapter" data-level="14.1.4" data-path="audit-experiments.html"><a href="audit-experiments.html#exercises-1"><i class="fa fa-check"></i><b>14.1.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html"><i class="fa fa-check"></i><b>14.2</b> Experiments for sensitive questions</a><ul>
<li class="chapter" data-level="14.2.1" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#list-experiments"><i class="fa fa-check"></i><b>14.2.1</b> List experiments</a></li>
<li class="chapter" data-level="14.2.2" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#randomized-response-technique"><i class="fa fa-check"></i><b>14.2.2</b> Randomized response technique</a></li>
<li class="chapter" data-level="14.2.3" data-path="experiments-for-sensitive-questions.html"><a href="experiments-for-sensitive-questions.html#references"><i class="fa fa-check"></i><b>14.2.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="conjoint-experimetns.html"><a href="conjoint-experimetns.html"><i class="fa fa-check"></i><b>14.3</b> Conjoint experimetns</a></li>
<li class="chapter" data-level="14.4" data-path="behavioral-games.html"><a href="behavioral-games.html"><i class="fa fa-check"></i><b>14.4</b> Behavioral games</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="observational-designs-for-causal-inference.html"><a href="observational-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>15</b> Observational designs for causal inference</a><ul>
<li class="chapter" data-level="15.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html"><i class="fa fa-check"></i><b>15.1</b> Selection on observables</a><ul>
<li class="chapter" data-level="15.1.1" data-path="selection-on-observables.html"><a href="selection-on-observables.html#classic-confounding"><i class="fa fa-check"></i><b>15.1.1</b> Classic Confounding</a></li>
<li class="chapter" data-level="15.1.2" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-functional-form-is-wrong"><i class="fa fa-check"></i><b>15.1.2</b> What if the functional form is wrong?</a></li>
<li class="chapter" data-level="15.1.3" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-you-have-unobserved-confounding"><i class="fa fa-check"></i><b>15.1.3</b> What if you have unobserved confounding?</a></li>
<li class="chapter" data-level="15.1.4" data-path="selection-on-observables.html"><a href="selection-on-observables.html#what-if-the-observed-covariate-is-post-treatment"><i class="fa fa-check"></i><b>15.1.4</b> What if the observed covariate is post-treatment?</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>15.2</b> Instrumental variables</a></li>
<li class="chapter" data-level="15.3" data-path="difference-in-differences.html"><a href="difference-in-differences.html"><i class="fa fa-check"></i><b>15.3</b> Difference-in-differences</a><ul>
<li class="chapter" data-level="15.3.1" data-path="difference-in-differences.html"><a href="difference-in-differences.html#two-period-two-group-setting"><i class="fa fa-check"></i><b>15.3.1</b> Two-period two-group setting</a></li>
<li class="chapter" data-level="15.3.2" data-path="difference-in-differences.html"><a href="difference-in-differences.html#parallel-trends-assumption"><i class="fa fa-check"></i><b>15.3.2</b> Parallel trends assumption</a></li>
<li class="chapter" data-level="15.3.3" data-path="difference-in-differences.html"><a href="difference-in-differences.html#multi-period-design"><i class="fa fa-check"></i><b>15.3.3</b> Multi-period design</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html"><i class="fa fa-check"></i><b>15.4</b> Regression Discontinuity</a><ul>
<li class="chapter" data-level="15.4.1" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#design-declaration-3"><i class="fa fa-check"></i><b>15.4.1</b> Design Declaration</a></li>
<li class="chapter" data-level="15.4.2" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#takeaways-3"><i class="fa fa-check"></i><b>15.4.2</b> Takeaways</a></li>
<li class="chapter" data-level="15.4.3" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#further-reading"><i class="fa fa-check"></i><b>15.4.3</b> Further Reading</a></li>
<li class="chapter" data-level="15.4.4" data-path="regression-discontinuity.html"><a href="regression-discontinuity.html#exercises-2"><i class="fa fa-check"></i><b>15.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="process-tracing.html"><a href="process-tracing.html"><i class="fa fa-check"></i><b>15.5</b> Process tracing</a></li>
<li class="chapter" data-level="15.6" data-path="synthetic-controls.html"><a href="synthetic-controls.html"><i class="fa fa-check"></i><b>15.6</b> Synthetic controls</a><ul>
<li class="chapter" data-level="15.6.1" data-path="synthetic-controls.html"><a href="synthetic-controls.html#when-there-are-not-good-controls-standard-synth-will-get-the-wrong-answer"><i class="fa fa-check"></i><b>15.6.1</b> When there are not good controls, standard synth will get the wrong answer</a></li>
<li class="chapter" data-level="15.6.2" data-path="synthetic-controls.html"><a href="synthetic-controls.html#references-1"><i class="fa fa-check"></i><b>15.6.2</b> References</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="policing-and-post-treatment-bias.html"><a href="policing-and-post-treatment-bias.html"><i class="fa fa-check"></i><b>15.7</b> Policing and post-treatment bias</a></li>
<li class="chapter" data-level="15.8" data-path="design-declaration-4.html"><a href="design-declaration-4.html"><i class="fa fa-check"></i><b>15.8</b> Design Declaration</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="experimental-designs-for-causal-inference.html"><a href="experimental-designs-for-causal-inference.html"><i class="fa fa-check"></i><b>16</b> Experimental designs for causal inference</a><ul>
<li class="chapter" data-level="16.1" data-path="two-arm-trials.html"><a href="two-arm-trials.html"><i class="fa fa-check"></i><b>16.1</b> Two arm trials</a></li>
<li class="chapter" data-level="16.2" data-path="two-arm-trials-and-designs-with-blocking-and-clustering.html"><a href="two-arm-trials-and-designs-with-blocking-and-clustering.html"><i class="fa fa-check"></i><b>16.2</b> Two-arm trials and designs with blocking and clustering</a></li>
<li class="chapter" data-level="16.3" data-path="multiarm-designs.html"><a href="multiarm-designs.html"><i class="fa fa-check"></i><b>16.3</b> Multiarm Designs</a></li>
<li class="chapter" data-level="16.4" data-path="encouragement-designs.html"><a href="encouragement-designs.html"><i class="fa fa-check"></i><b>16.4</b> Encouragement designs</a><ul>
<li class="chapter" data-level="16.4.1" data-path="encouragement-designs.html"><a href="encouragement-designs.html#references-2"><i class="fa fa-check"></i><b>16.4.1</b> References</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html"><i class="fa fa-check"></i><b>16.5</b> Stepped wedge designs</a><ul>
<li class="chapter" data-level="16.5.1" data-path="stepped-wedge-designs.html"><a href="stepped-wedge-designs.html#design-declaration-5"><i class="fa fa-check"></i><b>16.5.1</b> Design Declaration</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="spillovers.html"><a href="spillovers.html"><i class="fa fa-check"></i><b>16.6</b> Spillovers</a><ul>
<li class="chapter" data-level="16.6.1" data-path="spillovers.html"><a href="spillovers.html#references-3"><i class="fa fa-check"></i><b>16.6.1</b> References</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html"><i class="fa fa-check"></i><b>16.7</b> Randomized Saturation Design</a><ul>
<li class="chapter" data-level="16.7.1" data-path="randomized-saturation-design.html"><a href="randomized-saturation-design.html#design-declaration-6"><i class="fa fa-check"></i><b>16.7.1</b> Design Declaration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="multi-study-designs.html"><a href="multi-study-designs.html"><i class="fa fa-check"></i><b>17</b> Multi-study designs</a><ul>
<li class="chapter" data-level="17.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html"><i class="fa fa-check"></i><b>17.1</b> Papers with multiple studies</a><ul>
<li class="chapter" data-level="17.1.1" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#design-declaration-7"><i class="fa fa-check"></i><b>17.1.1</b> Design Declaration</a></li>
<li class="chapter" data-level="17.1.2" data-path="papers-with-multiple-studies.html"><a href="papers-with-multiple-studies.html#takeaways-4"><i class="fa fa-check"></i><b>17.1.2</b> Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="multi-site-studies.html"><a href="multi-site-studies.html"><i class="fa fa-check"></i><b>17.2</b> Multi-site studies</a><ul>
<li class="chapter" data-level="17.2.1" data-path="multi-site-studies.html"><a href="multi-site-studies.html#unbiased-estimates-of-out-of-sample-sites-in-presence-of-heterogeneous-effects"><i class="fa fa-check"></i><b>17.2.1</b> Unbiased estimates of out-of-sample sites in presence of heterogeneous effects</a></li>
<li class="chapter" data-level="17.2.2" data-path="multi-site-studies.html"><a href="multi-site-studies.html#bayesian-estimation-can-improve-estimates-of-effects-for-sampled-sites"><i class="fa fa-check"></i><b>17.2.2</b> Bayesian estimation can improve estimates of effects for sampled sites</a></li>
<li class="chapter" data-level="17.2.3" data-path="multi-site-studies.html"><a href="multi-site-studies.html#when-things-break-down-confounded-sampling"><i class="fa fa-check"></i><b>17.2.3</b> when things break down: confounded sampling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="part-iii-exercises.html"><a href="part-iii-exercises.html"><i class="fa fa-check"></i><b>18</b> Part III Exercises</a></li>
<li class="part"><span><b>IV Conclusion</b></span></li>
<li class="chapter" data-level="19" data-path="putting-designs-to-use.html"><a href="putting-designs-to-use.html"><i class="fa fa-check"></i><b>19</b> Putting Designs to Use</a><ul>
<li class="chapter" data-level="19.1" data-path="before-studies.html"><a href="before-studies.html"><i class="fa fa-check"></i><b>19.1</b> Before studies</a><ul>
<li class="chapter" data-level="19.1.1" data-path="before-studies.html"><a href="before-studies.html#pre-analysis-plans"><i class="fa fa-check"></i><b>19.1.1</b> Pre-Analysis Plans</a></li>
<li class="chapter" data-level="19.1.2" data-path="before-studies.html"><a href="before-studies.html#registered-reports"><i class="fa fa-check"></i><b>19.1.2</b> Registered Reports</a></li>
<li class="chapter" data-level="19.1.3" data-path="before-studies.html"><a href="before-studies.html#standard-operating-procedures"><i class="fa fa-check"></i><b>19.1.3</b> Standard Operating Procedures</a></li>
<li class="chapter" data-level="19.1.4" data-path="before-studies.html"><a href="before-studies.html#evaluating-and-supporting-research"><i class="fa fa-check"></i><b>19.1.4</b> Evaluating and Supporting Research</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="after-studies.html"><a href="after-studies.html"><i class="fa fa-check"></i><b>19.2</b> After studies</a><ul>
<li class="chapter" data-level="19.2.1" data-path="after-studies.html"><a href="after-studies.html#reconciliation"><i class="fa fa-check"></i><b>19.2.1</b> Reconciliation</a></li>
<li class="chapter" data-level="19.2.2" data-path="after-studies.html"><a href="after-studies.html#replication"><i class="fa fa-check"></i><b>19.2.2</b> Replication</a></li>
<li class="chapter" data-level="19.2.3" data-path="after-studies.html"><a href="after-studies.html#peers-better-scholarly-critique"><i class="fa fa-check"></i><b>19.2.3</b> Peers: Better scholarly critique</a></li>
<li class="chapter" data-level="19.2.4" data-path="after-studies.html"><a href="after-studies.html#combining-designs"><i class="fa fa-check"></i><b>19.2.4</b> Combining designs</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="improving-designs-in-the-social-sciences.html"><a href="improving-designs-in-the-social-sciences.html"><i class="fa fa-check"></i><b>19.3</b> Improving designs in the social sciences</a><ul>
<li class="chapter" data-level="19.3.1" data-path="improving-designs-in-the-social-sciences.html"><a href="improving-designs-in-the-social-sciences.html#a-library-of-research-designs-as-objects"><i class="fa fa-check"></i><b>19.3.1</b> A library of research designs as objects</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="part-iv-exercises.html"><a href="part-iv-exercises.html"><i class="fa fa-check"></i><b>19.4</b> Part IV Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-4.html"><a href="references-4.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://declaredesign.org" target="blank">DeclareDesign</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Research Design: Declare, Diagnose, Redesign</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simulating-a-research-design" class="section level2">
<h2><span class="header-section-number">3.6</span> Simulating a research design</h2>
<p>Diagnosing a research design — learning about its properties — requires first simulating running the design over and over. We need to simulate the data generating process, then calculate the estimands, then calculate the estimates that will result.</p>
<div id="in-dplyr" class="section level3">
<h3><span class="header-section-number">3.6.1</span> In <code>dplyr</code></h3>
<p>We first demonstrate how to use the tidy functions created by the <code>declare_*</code> functions in a <code>dplyr</code> pipeline to simulate a design once.</p>
<p>We can run the population function, which generates the data structure, and then add the potential outcomes, and calculate the estimand as follows:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">population</span>() <span class="op">%&gt;%</span><span class="st"> </span>potential_outcomes <span class="op">%&gt;%</span><span class="st"> </span>estimand</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
estimand_label
</th>
<th style="text-align:right;">
estimand
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
</tbody>
</table>
<p>This is the same thing as running the functions one at a time on each other: <code>estimand(potential_outcomes(population()))</code>.</p>
<p>Similarly, if we want to draw simulated estimates from the design, we again simulate a population, add potential outcomes, but now sample units, assign treatments to sampled units, reveal the outcomes, and calculate estimates:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">population</span>() <span class="op">%&gt;%</span><span class="st"> </span>potential_outcomes <span class="op">%&gt;%</span><span class="st"> </span>sampling <span class="op">%&gt;%</span><span class="st">  </span>assignment <span class="op">%&gt;%</span><span class="st"> </span>reveal <span class="op">%&gt;%</span><span class="st"> </span>estimator</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
estimator_label
</th>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std.error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p.value
</th>
<th style="text-align:right;">
conf.low
</th>
<th style="text-align:right;">
conf.high
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:left;">
outcome
</th>
<th style="text-align:left;">
estimand_label
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
0.2227215
</td>
<td style="text-align:right;">
0.3264459
</td>
<td style="text-align:right;">
0.6822618
</td>
<td style="text-align:right;">
0.4985425
</td>
<td style="text-align:right;">
-0.4346286
</td>
<td style="text-align:right;">
0.8800717
</td>
<td style="text-align:right;">
45.36395
</td>
<td style="text-align:left;">
Y
</td>
<td style="text-align:left;">
PATE
</td>
</tr>
</tbody>
</table>
</div>
<div id="in-declaredesign-1" class="section level3">
<h3><span class="header-section-number">3.6.2</span> In <code>DeclareDesign</code></h3>
<p>With simple design defined as an object, we can easily learn about what kind of data it generates, the values of its estimand and estimates, and other features with simple funtions in <code>DeclareDesign</code>. They chain together functions in a similar way to the <code>dplyr</code> pipelines abov.</p>
<p>To draw simulated data based on the design, we use <code>draw_data</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">draw_data</span>(simple_design)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:right;">
u
</th>
<th style="text-align:right;">
Y_Z_0
</th>
<th style="text-align:right;">
Y_Z_1
</th>
<th style="text-align:right;">
S_inclusion_prob
</th>
<th style="text-align:right;">
Z
</th>
<th style="text-align:right;">
Z_cond_prob
</th>
<th style="text-align:right;">
Y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
001
</td>
<td style="text-align:right;">
-1.3523271
</td>
<td style="text-align:right;">
-1.3523271
</td>
<td style="text-align:right;">
-1.1023271
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-1.1023271
</td>
</tr>
<tr>
<td style="text-align:left;">
002
</td>
<td style="text-align:right;">
-0.7237033
</td>
<td style="text-align:right;">
-0.7237033
</td>
<td style="text-align:right;">
-0.4737033
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-0.4737033
</td>
</tr>
<tr>
<td style="text-align:left;">
006
</td>
<td style="text-align:right;">
0.3585086
</td>
<td style="text-align:right;">
0.3585086
</td>
<td style="text-align:right;">
0.6085086
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
0.3585086
</td>
</tr>
<tr>
<td style="text-align:left;">
008
</td>
<td style="text-align:right;">
-0.0191530
</td>
<td style="text-align:right;">
-0.0191530
</td>
<td style="text-align:right;">
0.2308470
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-0.0191530
</td>
</tr>
<tr>
<td style="text-align:left;">
009
</td>
<td style="text-align:right;">
-0.0550281
</td>
<td style="text-align:right;">
-0.0550281
</td>
<td style="text-align:right;">
0.1949719
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
0.1949719
</td>
</tr>
<tr>
<td style="text-align:left;">
010
</td>
<td style="text-align:right;">
0.7643561
</td>
<td style="text-align:right;">
0.7643561
</td>
<td style="text-align:right;">
1.0143561
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1.0143561
</td>
</tr>
</tbody>
</table>
<p><code>draw_data</code> runs all of the “data steps” in a design, which are both from the model (population and potential outcomes) and from the data strategy (typically sampling and assignment).</p>
<p>To simulate the estimands from a single run of the design, we use <code>draw_estimands</code>. This runs two operations at once: it draws the data, and calculates the estimands at the point defined by the design. For example, in our design the estimand comes just after the potential outcomes. In this design, <code>draw_estimands</code> will run the first two steps and then calculate the estimands from the <code>estimand</code> function we declared:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">draw_estimands</span>(simple_design)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
estimand_label
</th>
<th style="text-align:right;">
estimand
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
</tbody>
</table>
<p>Similarly, we can simulate the estimates from a single run with <code>draw_estimates</code> which draws data and at the appropriate moment calculates estimates.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">draw_estimates</span>(simple_design)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
estimator_label
</th>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std.error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p.value
</th>
<th style="text-align:right;">
conf.low
</th>
<th style="text-align:right;">
conf.high
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:left;">
outcome
</th>
<th style="text-align:left;">
estimand_label
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
-0.3010792
</td>
<td style="text-align:right;">
0.188783
</td>
<td style="text-align:right;">
-1.594843
</td>
<td style="text-align:right;">
0.1173209
</td>
<td style="text-align:right;">
-0.680667
</td>
<td style="text-align:right;">
0.0785086
</td>
<td style="text-align:right;">
47.93078
</td>
<td style="text-align:left;">
Y
</td>
<td style="text-align:left;">
PATE
</td>
</tr>
</tbody>
</table>
<p>To diagnose a design, we want a data frame that includes the estimates <em>and</em> estimands from many runs of a design. That is, we want to run the design, draw estimates and estimands, and then do that over and over and stack the results. This is exactly what <code>simulate_design</code> does:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">simulate_design</span>(simple_design, <span class="dt">sims =</span> <span class="dv">500</span>)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
design_label
</th>
<th style="text-align:right;">
sim_ID
</th>
<th style="text-align:left;">
estimand_label
</th>
<th style="text-align:right;">
estimand
</th>
<th style="text-align:left;">
estimator_label
</th>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std.error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p.value
</th>
<th style="text-align:right;">
conf.low
</th>
<th style="text-align:right;">
conf.high
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:left;">
outcome
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
simple_design
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
0.3175358
</td>
<td style="text-align:right;">
0.2423225
</td>
<td style="text-align:right;">
1.310385
</td>
<td style="text-align:right;">
0.1963148
</td>
<td style="text-align:right;">
-0.1697132
</td>
<td style="text-align:right;">
0.8047847
</td>
<td style="text-align:right;">
47.89786
</td>
<td style="text-align:left;">
Y
</td>
</tr>
<tr>
<td style="text-align:left;">
simple_design
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
0.4425311
</td>
<td style="text-align:right;">
0.2481185
</td>
<td style="text-align:right;">
1.783547
</td>
<td style="text-align:right;">
0.0808223
</td>
<td style="text-align:right;">
-0.0563487
</td>
<td style="text-align:right;">
0.9414110
</td>
<td style="text-align:right;">
47.98461
</td>
<td style="text-align:left;">
Y
</td>
</tr>
<tr>
<td style="text-align:left;">
simple_design
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
0.4963841
</td>
<td style="text-align:right;">
0.2786012
</td>
<td style="text-align:right;">
1.781702
</td>
<td style="text-align:right;">
0.0812151
</td>
<td style="text-align:right;">
-0.0639871
</td>
<td style="text-align:right;">
1.0567554
</td>
<td style="text-align:right;">
47.32619
</td>
<td style="text-align:left;">
Y
</td>
</tr>
<tr>
<td style="text-align:left;">
simple_design
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
-0.3844193
</td>
<td style="text-align:right;">
0.2548717
</td>
<td style="text-align:right;">
-1.508285
</td>
<td style="text-align:right;">
0.1384238
</td>
<td style="text-align:right;">
-0.8976614
</td>
<td style="text-align:right;">
0.1288229
</td>
<td style="text-align:right;">
45.30661
</td>
<td style="text-align:left;">
Y
</td>
</tr>
<tr>
<td style="text-align:left;">
simple_design
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
PATE
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
estimator
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:right;">
0.7340671
</td>
<td style="text-align:right;">
0.2561452
</td>
<td style="text-align:right;">
2.865824
</td>
<td style="text-align:right;">
0.0062576
</td>
<td style="text-align:right;">
0.2184385
</td>
<td style="text-align:right;">
1.2496957
</td>
<td style="text-align:right;">
45.88444
</td>
<td style="text-align:left;">
Y
</td>
</tr>
</tbody>
</table>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="building-a-design-from-design-steps.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="diagnosing-a-research-design.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false,
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
